import{r as p,j as e,i as f}from"./index-CHx3oPAQ.js";import{F as i,d as g}from"./index-3c9RWdXx.js";import{T as y}from"./treeSelectBase-BL3Z5-02.js";import{B as F}from"./button-BuR4x7gc.js";import{M as b}from"./index-CM0M5W9W.js";import{I as m}from"./index-D-abcRH2.js";import{T as C,S as A}from"./Table-DTRpGOWg.js";import"./EllipsisOutlined-BpMAEJuO.js";import"./formItemHoc-z0tdCwie.js";import"./dropdown-CLyqTgCB.js";const S=({open:s,onCreate:r,onCancel:n})=>{const[a]=i.useForm();return e.jsx(b,{open:s,title:"新建api",okText:"确定",cancelText:"取消",onCancel:()=>{a.resetFields(),n()},onOk:()=>{a.validateFields().then(t=>{a.resetFields(),r(t)}).catch(t=>{console.log("Validate Failed:",t)})},children:e.jsxs(i,{form:a,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[e.jsx(i.Item,{name:"name",label:"api名称",rules:[{required:!0,message:"请输入!"}],children:e.jsx(m,{})}),e.jsx(i.Item,{name:"remark",rules:[{required:!0,message:"请输入!"}],label:"备注",children:e.jsx(m,{type:"textarea"})}),e.jsx(y,{rules:[{required:!0,message:"请输入!"}],name:"path",label:"路径"})]})})},T=({btnLabel:s,handleUpload:r})=>{const[n,a]=p.useState(!1),t=l=>{r(l),a(!1)};return e.jsxs("span",{style:{marginRight:"12px"},children:[e.jsxs(F,{type:"primary",onClick:()=>{a(!0)},children:["+ ",s]}),e.jsx(S,{open:n,onCreate:t,onCancel:()=>{a(!1)}})]})},d={},k=[{title:"name",dataIndex:"name",key:"name"},{title:"操作",key:"action",render:()=>e.jsx(A,{size:"middle",children:e.jsx("a",{children:"修改"})})}],z=()=>{const{pageNum:s,pageSize:r,addApiAct:n,total:a,apiList:t,fetchApiListAct:l}=f("devStore"),{loading:u,run:x}=g.useAsyncFunction(l,{auto:!0,debounceTime:1e3}),c=async()=>{await x()},h=o=>{n(o)};return p.useEffect(()=>{c()},[]),e.jsxs("div",{className:d.content,children:[e.jsx("div",{className:d.operate_board,children:e.jsx(T,{btnLabel:"添加api",handleUpload:h})}),e.jsx(C,{rowKey:o=>o.id,loading:u,pagination:{pageSize:r,current:s,total:a,onChange(o,j){console.log(o,j),c()}},columns:k,dataSource:t})]})};export{z as default};
