import{r as p,j as e,i as j}from"./index-f5AIFuXe.js";import{d as g}from"./index-BHl4HzdS.js";import{T as y}from"./treeSelectBase-Dt46HAvJ.js";import{B as F}from"./button-CtW_Xfic.js";import{F as i}from"./index-DB_FTVaT.js";import{M as b}from"./index-DkWIVcay.js";import{I as m}from"./index-B_o9MMZ0.js";import{T as C,S as A}from"./Table-D3g2WSbA.js";import"./formItemHoc-Dk_h0O8q.js";import"./EllipsisOutlined-DTrOfCu6.js";import"./dropdown-D-S4ftwO.js";const S=({open:s,onCreate:r,onCancel:n})=>{const[t]=i.useForm();return e.jsx(b,{open:s,title:"新建api",okText:"确定",cancelText:"取消",onCancel:()=>{t.resetFields(),n()},onOk:()=>{t.validateFields().then(a=>{t.resetFields(),r(a)}).catch(a=>{console.log("Validate Failed:",a)})},children:e.jsxs(i,{form:t,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[e.jsx(i.Item,{name:"name",label:"api名称",rules:[{required:!0,message:"请输入!"}],children:e.jsx(m,{})}),e.jsx(i.Item,{name:"remark",rules:[{required:!0,message:"请输入!"}],label:"备注",children:e.jsx(m,{type:"textarea"})}),e.jsx(y,{rules:[{required:!0,message:"请输入!"}],name:"path",label:"路径"})]})})},T=({btnLabel:s,handleUpload:r})=>{const[n,t]=p.useState(!1),a=l=>{r(l),t(!1)};return e.jsxs("span",{style:{marginRight:"12px"},children:[e.jsxs(F,{type:"primary",onClick:()=>{t(!0)},children:["+ ",s]}),e.jsx(S,{open:n,onCreate:a,onCancel:()=>{t(!1)}})]})},d={},k=[{title:"name",dataIndex:"name",key:"name"},{title:"操作",key:"action",render:()=>e.jsx(A,{size:"middle",children:e.jsx("a",{children:"修改"})})}],O=()=>{const{pageNum:s,pageSize:r,addApiAct:n,total:t,apiList:a,fetchApiListAct:l}=j("devStore"),{loading:u,run:x}=g.useAsyncFunction(l,{auto:!0,debounceTime:1e3}),c=async()=>{await x()},h=o=>{n(o)};return p.useEffect(()=>{c()},[]),e.jsxs("div",{className:d.content,children:[e.jsx("div",{className:d.operate_board,children:e.jsx(T,{btnLabel:"添加api",handleUpload:h})}),e.jsx(C,{rowKey:o=>o.id,loading:u,pagination:{pageSize:r,current:s,total:t,onChange(o,f){console.log(o,f),c()}},columns:k,dataSource:a})]})};export{O as default};
