var es=Object.defineProperty;var ns=(_,e,M)=>e in _?es(_,e,{enumerable:!0,configurable:!0,writable:!0,value:M}):_[e]=M;var ne=(_,e,M)=>(ns(_,typeof e!="symbol"?e+"":e,M),M),je=(_,e,M)=>{if(!e.has(_))throw TypeError("Cannot "+M)};var t=(_,e,M)=>(je(_,e,"read from private field"),M?M.call(_):e.get(_)),G=(_,e,M)=>{if(e.has(_))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(_):e.set(_,M)},rt=(_,e,M,n)=>(je(_,e,"write to private field"),n?n.call(_,M):e.set(_,M),M);var me=(_,e,M,n)=>({set _(u){rt(_,e,u,M)},get _(){return t(_,e,n)}}),X=(_,e,M)=>(je(_,e,"access private method"),M);import{a0 as getAugmentedNamespace,h as getDefaultExportFromCjs,r as reactExports,x as React,a1 as PropTypes,j as jsxRuntimeExports,i as useFlat}from"./index-f5AIFuXe.js";import"./index-BHl4HzdS.js";import{u as usePageConfig,S as Switch,a as useFormFields,b as useSearchFields,U as UpOutlined}from"./useFormFields-BDbtDkWD.js";import{F as Form,R as Row,C as Col}from"./index-DB_FTVaT.js";import{T as Typography}from"./index-UQLYRjIp.js";import{S as Space,T as Table}from"./Table-D3g2WSbA.js";import{s as staticMethods}from"./index-Bw0j9_fV.js";import{M as Modal}from"./index-DkWIVcay.js";import{I as Input}from"./index-B_o9MMZ0.js";import{B as Button}from"./button-CtW_Xfic.js";import{D as DownOutlined}from"./dropdown-D-S4ftwO.js";import"./EllipsisOutlined-DTrOfCu6.js";import"./index-CtIDiRPO.js";function _mergeNamespaces(_,e){for(var M=0;M<e.length;M++){const n=e[M];if(typeof n!="string"&&!Array.isArray(n)){for(const u in n)if(u!=="default"&&!(u in _)){const E=Object.getOwnPropertyDescriptor(n,u);E&&Object.defineProperty(_,u,E.get?E:{enumerable:!0,get:()=>n[u]})}}}return Object.freeze(Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}))}const fieldCreater=(_,e={})=>{let{fieldConfig:M}=e;return(!M||Object.values(M).length===0)&&(M={type:"Input",isSearch:!0,formOptions:{rules:[{required:!0}],label:_,name:_}}),M.formOptions={name:_,label:_,rules:[{required:!0}],...M.formOptions||{}},{title:_,dataIndex:_,key:_,fieldConfig:M}};function commonjsRequire(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,M){module.exports=e.pdfjsLib=M()})(globalThis,()=>(()=>{var __webpack_modules__=[,(_,e)=>{var zt;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=dt,e.bytesToString=W,e.createValidAbsoluteUrl=St,e.getModificationDate=Pt,e.getUuid=$t,e.getVerbosityLevel=Y,e.info=it,e.isArrayBuffer=pt,e.isArrayEqual=wt,e.isNodeJS=void 0,e.normalizeUnicode=qt,e.objectFromMap=ut,e.objectSize=ot,e.setVerbosityLevel=w,e.shadow=Tt,e.string32=tt,e.stringToBytes=st,e.stringToPDFString=mt,e.stringToUTF8String=et,e.unreachable=V,e.utf8StringToString=nt,e.warn=ct;const M=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=M;const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const u=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=u;const E=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=E;const j=1.35;e.LINE_FACTOR=j;const at=.35;e.LINE_DESCENT_FACTOR=at;const I=at/j;e.BASELINE_FACTOR=I;const P={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=P;const m={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=m;const N="pdfjs_internal_editor_";e.AnnotationEditorPrefix=N;const B={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=B;const k={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=k;const S={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=S;const x={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=x;const p={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=p;const A={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=A;const R={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=R;const C={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=C;const v={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=v;const l={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=l;const d={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=d;const O={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=O;const b={O:"PageOpen",C:"PageClose"};e.PageActionEventType=b;const c={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=c;const F={NONE:0,BINARY:1};e.CMapCompressionType=F;const g={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=g;const $={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=$;let q=c.WARNINGS;function w(ft){Number.isInteger(ft)&&(q=ft)}function Y(){return q}function it(ft){q>=c.INFOS&&console.log(`Info: ${ft}`)}function ct(ft){q>=c.WARNINGS&&console.log(`Warning: ${ft}`)}function V(ft){throw new Error(ft)}function dt(ft,Z){ft||V(Z)}function bt(ft){switch(ft==null?void 0:ft.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function St(ft,Z=null,K=null){if(!ft)return null;try{if(K&&typeof ft=="string"){if(K.addDefaultProtocol&&ft.startsWith("www.")){const vt=ft.match(/\./g);(vt==null?void 0:vt.length)>=2&&(ft=`http://${ft}`)}if(K.tryConvertEncoding)try{ft=et(ft)}catch{}}const yt=Z?new URL(ft,Z):new URL(ft);if(bt(yt))return yt}catch{}return null}function Tt(ft,Z,K,yt=!1){return Object.defineProperty(ft,Z,{value:K,enumerable:!yt,configurable:!0,writable:!1}),K}const L=function(){function Z(K,yt){this.constructor===Z&&V("Cannot initialize BaseException."),this.message=K,this.name=yt}return Z.prototype=new Error,Z.constructor=Z,Z}();e.BaseException=L;class i extends L{constructor(Z,K){super(Z,"PasswordException"),this.code=K}}e.PasswordException=i;class o extends L{constructor(Z,K){super(Z,"UnknownErrorException"),this.details=K}}e.UnknownErrorException=o;class a extends L{constructor(Z){super(Z,"InvalidPDFException")}}e.InvalidPDFException=a;class h extends L{constructor(Z){super(Z,"MissingPDFException")}}e.MissingPDFException=h;class f extends L{constructor(Z,K){super(Z,"UnexpectedResponseException"),this.status=K}}e.UnexpectedResponseException=f;class T extends L{constructor(Z){super(Z,"FormatError")}}e.FormatError=T;class D extends L{constructor(Z){super(Z,"AbortException")}}e.AbortException=D;function W(ft){(typeof ft!="object"||(ft==null?void 0:ft.length)===void 0)&&V("Invalid argument for bytesToString");const Z=ft.length,K=8192;if(Z<K)return String.fromCharCode.apply(null,ft);const yt=[];for(let vt=0;vt<Z;vt+=K){const ee=Math.min(vt+K,Z),te=ft.subarray(vt,ee);yt.push(String.fromCharCode.apply(null,te))}return yt.join("")}function st(ft){typeof ft!="string"&&V("Invalid argument for stringToBytes");const Z=ft.length,K=new Uint8Array(Z);for(let yt=0;yt<Z;++yt)K[yt]=ft.charCodeAt(yt)&255;return K}function tt(ft){return String.fromCharCode(ft>>24&255,ft>>16&255,ft>>8&255,ft&255)}function ot(ft){return Object.keys(ft).length}function ut(ft){const Z=Object.create(null);for(const[K,yt]of ft)Z[K]=yt;return Z}function gt(){const ft=new Uint8Array(4);return ft[0]=1,new Uint32Array(ft.buffer,0,1)[0]===1}function ht(){try{return new Function(""),!0}catch{return!1}}class Ct{static get isLittleEndian(){return Tt(this,"isLittleEndian",gt())}static get isEvalSupported(){return Tt(this,"isEvalSupported",ht())}static get isOffscreenCanvasSupported(){return Tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Tt(this,"platform",{isWin:!1,isMac:!1}):Tt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Z,K;return Tt(this,"isCSSRoundSupported",(K=(Z=globalThis.CSS)==null?void 0:Z.supports)==null?void 0:K.call(Z,"width: round(1.5px, 1px)"))}}e.FeatureTest=Ct;const Ot=[...Array(256).keys()].map(ft=>ft.toString(16).padStart(2,"0"));class Et{static makeHexColor(Z,K,yt){return`#${Ot[Z]}${Ot[K]}${Ot[yt]}`}static scaleMinMax(Z,K){let yt;Z[0]?(Z[0]<0&&(yt=K[0],K[0]=K[1],K[1]=yt),K[0]*=Z[0],K[1]*=Z[0],Z[3]<0&&(yt=K[2],K[2]=K[3],K[3]=yt),K[2]*=Z[3],K[3]*=Z[3]):(yt=K[0],K[0]=K[2],K[2]=yt,yt=K[1],K[1]=K[3],K[3]=yt,Z[1]<0&&(yt=K[2],K[2]=K[3],K[3]=yt),K[2]*=Z[1],K[3]*=Z[1],Z[2]<0&&(yt=K[0],K[0]=K[1],K[1]=yt),K[0]*=Z[2],K[1]*=Z[2]),K[0]+=Z[4],K[1]+=Z[4],K[2]+=Z[5],K[3]+=Z[5]}static transform(Z,K){return[Z[0]*K[0]+Z[2]*K[1],Z[1]*K[0]+Z[3]*K[1],Z[0]*K[2]+Z[2]*K[3],Z[1]*K[2]+Z[3]*K[3],Z[0]*K[4]+Z[2]*K[5]+Z[4],Z[1]*K[4]+Z[3]*K[5]+Z[5]]}static applyTransform(Z,K){const yt=Z[0]*K[0]+Z[1]*K[2]+K[4],vt=Z[0]*K[1]+Z[1]*K[3]+K[5];return[yt,vt]}static applyInverseTransform(Z,K){const yt=K[0]*K[3]-K[1]*K[2],vt=(Z[0]*K[3]-Z[1]*K[2]+K[2]*K[5]-K[4]*K[3])/yt,ee=(-Z[0]*K[1]+Z[1]*K[0]+K[4]*K[1]-K[5]*K[0])/yt;return[vt,ee]}static getAxialAlignedBoundingBox(Z,K){const yt=this.applyTransform(Z,K),vt=this.applyTransform(Z.slice(2,4),K),ee=this.applyTransform([Z[0],Z[3]],K),te=this.applyTransform([Z[2],Z[1]],K);return[Math.min(yt[0],vt[0],ee[0],te[0]),Math.min(yt[1],vt[1],ee[1],te[1]),Math.max(yt[0],vt[0],ee[0],te[0]),Math.max(yt[1],vt[1],ee[1],te[1])]}static inverseTransform(Z){const K=Z[0]*Z[3]-Z[1]*Z[2];return[Z[3]/K,-Z[1]/K,-Z[2]/K,Z[0]/K,(Z[2]*Z[5]-Z[4]*Z[3])/K,(Z[4]*Z[1]-Z[5]*Z[0])/K]}static singularValueDecompose2dScale(Z){const K=[Z[0],Z[2],Z[1],Z[3]],yt=Z[0]*K[0]+Z[1]*K[2],vt=Z[0]*K[1]+Z[1]*K[3],ee=Z[2]*K[0]+Z[3]*K[2],te=Z[2]*K[1]+Z[3]*K[3],Q=(yt+te)/2,xt=Math.sqrt((yt+te)**2-4*(yt*te-ee*vt))/2,Nt=Q+xt||1,Rt=Q-xt||1;return[Math.sqrt(Nt),Math.sqrt(Rt)]}static normalizeRect(Z){const K=Z.slice(0);return Z[0]>Z[2]&&(K[0]=Z[2],K[2]=Z[0]),Z[1]>Z[3]&&(K[1]=Z[3],K[3]=Z[1]),K}static intersect(Z,K){const yt=Math.max(Math.min(Z[0],Z[2]),Math.min(K[0],K[2])),vt=Math.min(Math.max(Z[0],Z[2]),Math.max(K[0],K[2]));if(yt>vt)return null;const ee=Math.max(Math.min(Z[1],Z[3]),Math.min(K[1],K[3])),te=Math.min(Math.max(Z[1],Z[3]),Math.max(K[1],K[3]));return ee>te?null:[yt,ee,vt,te]}static bezierBoundingBox(Z,K,yt,vt,ee,te,Q,xt){const Nt=[],Rt=[[],[]];let jt,Bt,Qt,At,Kt,Dt,U,s;for(let J=0;J<2;++J){if(J===0?(Bt=6*Z-12*yt+6*ee,jt=-3*Z+9*yt-9*ee+3*Q,Qt=3*yt-3*Z):(Bt=6*K-12*vt+6*te,jt=-3*K+9*vt-9*te+3*xt,Qt=3*vt-3*K),Math.abs(jt)<1e-12){if(Math.abs(Bt)<1e-12)continue;At=-Qt/Bt,0<At&&At<1&&Nt.push(At);continue}U=Bt*Bt-4*Qt*jt,s=Math.sqrt(U),!(U<0)&&(Kt=(-Bt+s)/(2*jt),0<Kt&&Kt<1&&Nt.push(Kt),Dt=(-Bt-s)/(2*jt),0<Dt&&Dt<1&&Nt.push(Dt))}let y=Nt.length,H;const z=y;for(;y--;)At=Nt[y],H=1-At,Rt[0][y]=H*H*H*Z+3*H*H*At*yt+3*H*At*At*ee+At*At*At*Q,Rt[1][y]=H*H*H*K+3*H*H*At*vt+3*H*At*At*te+At*At*At*xt;return Rt[0][z]=Z,Rt[1][z]=K,Rt[0][z+1]=Q,Rt[1][z+1]=xt,Rt[0].length=Rt[1].length=z+2,[Math.min(...Rt[0]),Math.min(...Rt[1]),Math.max(...Rt[0]),Math.max(...Rt[1])]}}e.Util=Et;const It=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function mt(ft){if(ft[0]>="ï"){let K;if(ft[0]==="þ"&&ft[1]==="ÿ"?K="utf-16be":ft[0]==="ÿ"&&ft[1]==="þ"?K="utf-16le":ft[0]==="ï"&&ft[1]==="»"&&ft[2]==="¿"&&(K="utf-8"),K)try{const yt=new TextDecoder(K,{fatal:!0}),vt=st(ft);return yt.decode(vt)}catch(yt){ct(`stringToPDFString: "${yt}".`)}}const Z=[];for(let K=0,yt=ft.length;K<yt;K++){const vt=It[ft.charCodeAt(K)];Z.push(vt?String.fromCharCode(vt):ft.charAt(K))}return Z.join("")}function et(ft){return decodeURIComponent(escape(ft))}function nt(ft){return unescape(encodeURIComponent(ft))}function pt(ft){return typeof ft=="object"&&(ft==null?void 0:ft.byteLength)!==void 0}function wt(ft,Z){if(ft.length!==Z.length)return!1;for(let K=0,yt=ft.length;K<yt;K++)if(ft[K]!==Z[K])return!1;return!0}function Pt(ft=new Date){return[ft.getUTCFullYear().toString(),(ft.getUTCMonth()+1).toString().padStart(2,"0"),ft.getUTCDate().toString().padStart(2,"0"),ft.getUTCHours().toString().padStart(2,"0"),ft.getUTCMinutes().toString().padStart(2,"0"),ft.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ut{constructor(){G(this,zt,!1);this.promise=new Promise((Z,K)=>{this.resolve=yt=>{rt(this,zt,!0),Z(yt)},this.reject=yt=>{rt(this,zt,!0),K(yt)}})}get settled(){return t(this,zt)}}zt=new WeakMap,e.PromiseCapability=Ut;let Vt=null,Ht=null;function qt(ft){return Vt||(Vt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ht=new Map([["ﬅ","ſt"]])),ft.replaceAll(Vt,(Z,K,yt)=>K?K.normalize("NFKC"):Ht.get(yt))}function $t(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ft=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ft);else for(let Z=0;Z<32;Z++)ft[Z]=Math.floor(Math.random()*255);return W(ft)}const Wt="pdfjs_internal_id_";e.AnnotationPrefix=Wt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var _,M,n,u,de,j,xe,I,P,m,N,B,k,S,x,p,Te,R,C,Be,l,d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(b){if(typeof b=="string"||b instanceof URL?b={url:b}:(0,_util.isArrayBuffer)(b)&&(b={data:b}),typeof b!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!b.url&&!b.data&&!b.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const c=new PDFDocumentLoadingTask,{docId:F}=c,g=b.url?getUrlProp(b.url):null,$=b.data?getDataProp(b.data):null,q=b.httpHeaders||null,w=b.withCredentials===!0,Y=b.password??null,it=b.range instanceof PDFDataRangeTransport?b.range:null,ct=Number.isInteger(b.rangeChunkSize)&&b.rangeChunkSize>0?b.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let V=b.worker instanceof PDFWorker?b.worker:null;const dt=b.verbosity,bt=typeof b.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(b.docBaseUrl)?b.docBaseUrl:null,St=typeof b.cMapUrl=="string"?b.cMapUrl:null,Tt=b.cMapPacked!==!1,L=b.CMapReaderFactory||DefaultCMapReaderFactory,i=typeof b.standardFontDataUrl=="string"?b.standardFontDataUrl:null,o=b.StandardFontDataFactory||DefaultStandardFontDataFactory,a=b.stopAtErrors!==!0,h=Number.isInteger(b.maxImageSize)&&b.maxImageSize>-1?b.maxImageSize:-1,f=b.isEvalSupported!==!1,T=typeof b.isOffscreenCanvasSupported=="boolean"?b.isOffscreenCanvasSupported:!_util.isNodeJS,D=Number.isInteger(b.canvasMaxAreaInBytes)?b.canvasMaxAreaInBytes:-1,W=typeof b.disableFontFace=="boolean"?b.disableFontFace:_util.isNodeJS,st=b.fontExtraProperties===!0,tt=b.enableXfa===!0,ot=b.ownerDocument||globalThis.document,ut=b.disableRange===!0,gt=b.disableStream===!0,ht=b.disableAutoFetch===!0,Ct=b.pdfBug===!0,Ot=it?it.length:b.length??NaN,Et=typeof b.useSystemFonts=="boolean"?b.useSystemFonts:!_util.isNodeJS&&!W,It=typeof b.useWorkerFetch=="boolean"?b.useWorkerFetch:L===_display_utils.DOMCMapReaderFactory&&o===_display_utils.DOMStandardFontDataFactory&&St&&i&&(0,_display_utils.isValidFetchUrl)(St,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(i,document.baseURI),mt=b.canvasFactory||new DefaultCanvasFactory({ownerDocument:ot}),et=b.filterFactory||new DefaultFilterFactory({docId:F,ownerDocument:ot}),nt=null;(0,_util.setVerbosityLevel)(dt);const pt={canvasFactory:mt,filterFactory:et};if(It||(pt.cMapReaderFactory=new L({baseUrl:St,isCompressed:Tt}),pt.standardFontDataFactory=new o({baseUrl:i})),!V){const Ut={verbosity:dt,port:_worker_options.GlobalWorkerOptions.workerPort};V=Ut.port?PDFWorker.fromPort(Ut):new PDFWorker(Ut),c._worker=V}const wt={docId:F,apiVersion:"3.11.174",data:$,password:Y,disableAutoFetch:ht,rangeChunkSize:ct,length:Ot,docBaseUrl:bt,enableXfa:tt,evaluatorOptions:{maxImageSize:h,disableFontFace:W,ignoreErrors:a,isEvalSupported:f,isOffscreenCanvasSupported:T,canvasMaxAreaInBytes:D,fontExtraProperties:st,useSystemFonts:Et,cMapUrl:It?St:null,standardFontDataUrl:It?i:null}},Pt={ignoreErrors:a,isEvalSupported:f,disableFontFace:W,fontExtraProperties:st,enableXfa:tt,ownerDocument:ot,disableAutoFetch:ht,pdfBug:Ct,styleElement:nt};return V.promise.then(function(){if(c.destroyed)throw new Error("Loading aborted");const Ut=_fetchDocument(V,wt),Vt=new Promise(function(Ht){let qt;it?qt=new _transport_stream.PDFDataTransportStream({length:Ot,initialData:it.initialData,progressiveDone:it.progressiveDone,contentDispositionFilename:it.contentDispositionFilename,disableRange:ut,disableStream:gt},it):$||(qt=(Wt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Wt):(0,_display_utils.isValidFetchUrl)(Wt.url)?new _displayFetch_stream.PDFFetchStream(Wt):new _displayNetwork.PDFNetworkStream(Wt))({url:g,length:Ot,httpHeaders:q,withCredentials:w,rangeChunkSize:ct,disableRange:ut,disableStream:gt})),Ht(qt)});return Promise.all([Ut,Vt]).then(function([Ht,qt]){if(c.destroyed)throw new Error("Loading aborted");const $t=new _message_handler.MessageHandler(F,Ht,V.port),Wt=new WorkerTransport($t,c,qt,Pt,pt);c._transport=Wt,$t.send("Ready",null)})}).catch(c._capability.reject),c}async function _fetchDocument(b,c){if(b.destroyed)throw new Error("Worker was destroyed");const F=await b.messageHandler.sendWithPromise("GetDocRequest",c,c.data?[c.data.buffer]:null);if(b.destroyed)throw new Error("Worker was destroyed");return F}function getUrlProp(b){if(b instanceof URL)return b.href;try{return new URL(b,window.location).href}catch{if(_util.isNodeJS&&typeof b=="string")return b}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(b){if(_util.isNodeJS&&typeof Buffer<"u"&&b instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength)return b;if(typeof b=="string")return(0,_util.stringToBytes)(b);if(typeof b=="object"&&!isNaN(b==null?void 0:b.length)||(0,_util.isArrayBuffer)(b))return new Uint8Array(b);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${me(e,_)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var c,F,g;this.destroyed=!0;try{(c=this._worker)!=null&&c.port&&(this._worker._pendingDestroy=!0),await((F=this._transport)==null?void 0:F.destroy())}catch($){throw(g=this._worker)!=null&&g.port&&delete this._worker._pendingDestroy,$}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};_=new WeakMap,G(e,_,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(c,F,g=!1,$=null){this.length=c,this.initialData=F,this.progressiveDone=g,this.contentDispositionFilename=$,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(c){this._rangeListeners.push(c)}addProgressListener(c){this._progressListeners.push(c)}addProgressiveReadListener(c){this._progressiveReadListeners.push(c)}addProgressiveDoneListener(c){this._progressiveDoneListeners.push(c)}onDataRange(c,F){for(const g of this._rangeListeners)g(c,F)}onDataProgress(c,F){this._readyCapability.promise.then(()=>{for(const g of this._progressListeners)g(c,F)})}onDataProgressiveRead(c){this._readyCapability.promise.then(()=>{for(const F of this._progressiveReadListeners)F(c)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const c of this._progressiveDoneListeners)c()})}transportReady(){this._readyCapability.resolve()}requestDataRange(c,F){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(c,F){this._pdfInfo=c,this._transport=F,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(g=>{if(!g)return g;const $=[];for(const q in g)$.push(...g[q]);return $}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(c){return this._transport.getPage(c)}getPageIndex(c){return this._transport.getPageIndex(c)}getDestinations(){return this._transport.getDestinations()}getDestination(c){return this._transport.getDestination(c)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(c=!1){return this._transport.startCleanup(c||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(c,F,g,$=!1){G(this,u);G(this,j);G(this,M,null);G(this,n,!1);this._pageIndex=c,this._pageInfo=F,this._transport=g,this._stats=$?new _display_utils.StatTimer:null,this._pdfBug=$,this.commonObjs=g.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:c,rotation:F=this.rotate,offsetX:g=0,offsetY:$=0,dontFlip:q=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:c,rotation:F,offsetX:g,offsetY:$,dontFlip:q})}getAnnotations({intent:c="display"}={}){const F=this._transport.getRenderingIntent(c);return this._transport.getAnnotations(this._pageIndex,F.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var c;return((c=this._transport._htmlForXfa)==null?void 0:c.children[this._pageIndex])||null}render({canvasContext:c,viewport:F,intent:g="display",annotationMode:$=_util.AnnotationMode.ENABLE,transform:q=null,background:w=null,optionalContentConfigPromise:Y=null,annotationCanvasMap:it=null,pageColors:ct=null,printAnnotationStorage:V=null}){var o,a;(o=this._stats)==null||o.time("Overall");const dt=this._transport.getRenderingIntent(g,$,V);rt(this,n,!1),X(this,j,xe).call(this),Y||(Y=this._transport.getOptionalContentConfig());let bt=this._intentStates.get(dt.cacheKey);bt||(bt=Object.create(null),this._intentStates.set(dt.cacheKey,bt)),bt.streamReaderCancelTimeout&&(clearTimeout(bt.streamReaderCancelTimeout),bt.streamReaderCancelTimeout=null);const St=!!(dt.renderingIntent&_util.RenderingIntentFlag.PRINT);bt.displayReadyCapability||(bt.displayReadyCapability=new _util.PromiseCapability,bt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(a=this._stats)==null||a.time("Page Request"),this._pumpOperatorList(dt));const Tt=h=>{var f,T;bt.renderTasks.delete(L),(this._maybeCleanupAfterRender||St)&&rt(this,n,!0),X(this,u,de).call(this,!St),h?(L.capability.reject(h),this._abortOperatorList({intentState:bt,reason:h instanceof Error?h:new Error(h)})):L.capability.resolve(),(f=this._stats)==null||f.timeEnd("Rendering"),(T=this._stats)==null||T.timeEnd("Overall")},L=new InternalRenderTask({callback:Tt,params:{canvasContext:c,viewport:F,transform:q,background:w},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:it,operatorList:bt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!St,pdfBug:this._pdfBug,pageColors:ct});(bt.renderTasks||(bt.renderTasks=new Set)).add(L);const i=L.task;return Promise.all([bt.displayReadyCapability.promise,Y]).then(([h,f])=>{var T;if(this.destroyed){Tt();return}(T=this._stats)==null||T.time("Rendering"),L.initializeGraphics({transparency:h,optionalContentConfig:f}),L.operatorListChanged()}).catch(Tt),i}getOperatorList({intent:c="display",annotationMode:F=_util.AnnotationMode.ENABLE,printAnnotationStorage:g=null}={}){var it;function $(){w.operatorList.lastChunk&&(w.opListReadCapability.resolve(w.operatorList),w.renderTasks.delete(Y))}const q=this._transport.getRenderingIntent(c,F,g,!0);let w=this._intentStates.get(q.cacheKey);w||(w=Object.create(null),this._intentStates.set(q.cacheKey,w));let Y;return w.opListReadCapability||(Y=Object.create(null),Y.operatorListChanged=$,w.opListReadCapability=new _util.PromiseCapability,(w.renderTasks||(w.renderTasks=new Set)).add(Y),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(it=this._stats)==null||it.time("Page Request"),this._pumpOperatorList(q)),w.opListReadCapability.promise}streamTextContent({includeMarkedContent:c=!1,disableNormalization:F=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:c===!0,disableNormalization:F===!0},{highWaterMark:100,size($){return $.items.length}})}getTextContent(c={}){if(this._transport._htmlForXfa)return this.getXfa().then(g=>_xfa_text.XfaText.textContent(g));const F=this.streamTextContent(c);return new Promise(function(g,$){function q(){w.read().then(function({value:it,done:ct}){if(ct){g(Y);return}Object.assign(Y.styles,it.styles),Y.items.push(...it.items),q()},$)}const w=F.getReader(),Y={items:[],styles:Object.create(null)};q()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const c=[];for(const F of this._intentStates.values())if(this._abortOperatorList({intentState:F,reason:new Error("Page was destroyed."),force:!0}),!F.opListReadCapability)for(const g of F.renderTasks)c.push(g.completed),g.cancel();return this.objs.clear(),rt(this,n,!1),X(this,j,xe).call(this),Promise.all(c)}cleanup(c=!1){rt(this,n,!0);const F=X(this,u,de).call(this,!1);return c&&F&&this._stats&&(this._stats=new _display_utils.StatTimer),F}_startRenderPage(c,F){var $,q;const g=this._intentStates.get(F);g&&(($=this._stats)==null||$.timeEnd("Page Request"),(q=g.displayReadyCapability)==null||q.resolve(c))}_renderPageChunk(c,F){for(let g=0,$=c.length;g<$;g++)F.operatorList.fnArray.push(c.fnArray[g]),F.operatorList.argsArray.push(c.argsArray[g]);F.operatorList.lastChunk=c.lastChunk,F.operatorList.separateAnnots=c.separateAnnots;for(const g of F.renderTasks)g.operatorListChanged();c.lastChunk&&X(this,u,de).call(this,!0)}_pumpOperatorList({renderingIntent:c,cacheKey:F,annotationStorageSerializable:g}){const{map:$,transfers:q}=g,Y=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:c,cacheKey:F,annotationStorage:$},q).getReader(),it=this._intentStates.get(F);it.streamReader=Y;const ct=()=>{Y.read().then(({value:V,done:dt})=>{if(dt){it.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(V,it),ct())},V=>{if(it.streamReader=null,!this._transport.destroyed){if(it.operatorList){it.operatorList.lastChunk=!0;for(const dt of it.renderTasks)dt.operatorListChanged();X(this,u,de).call(this,!0)}if(it.displayReadyCapability)it.displayReadyCapability.reject(V);else if(it.opListReadCapability)it.opListReadCapability.reject(V);else throw V}})};ct()}_abortOperatorList({intentState:c,reason:F,force:g=!1}){if(c.streamReader){if(c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null),!g){if(c.renderTasks.size>0)return;if(F instanceof _display_utils.RenderingCancelledException){let $=RENDERING_CANCELLED_TIMEOUT;F.extraDelay>0&&F.extraDelay<1e3&&($+=F.extraDelay),c.streamReaderCancelTimeout=setTimeout(()=>{c.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:c,reason:F,force:!0})},$);return}}if(c.streamReader.cancel(new _util.AbortException(F.message)).catch(()=>{}),c.streamReader=null,!this._transport.destroyed){for(const[$,q]of this._intentStates)if(q===c){this._intentStates.delete($);break}this.cleanup()}}}get stats(){return this._stats}}M=new WeakMap,n=new WeakMap,u=new WeakSet,de=function(c=!1){if(X(this,j,xe).call(this),!t(this,n)||this.destroyed)return!1;if(c)return rt(this,M,setTimeout(()=>{rt(this,M,null),X(this,u,de).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:F,operatorList:g}of this._intentStates.values())if(F.size>0||!g.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),rt(this,n,!1),!0},j=new WeakSet,xe=function(){t(this,M)&&(clearTimeout(t(this,M)),rt(this,M,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){G(this,I,new Set);G(this,P,Promise.resolve())}postMessage(c,F){const g={data:structuredClone(c,F?{transfer:F}:null)};t(this,P).then(()=>{for(const $ of t(this,I))$.call(this,g)})}addEventListener(c,F){t(this,I).add(F)}removeEventListener(c,F){t(this,I).delete(F)}terminate(){t(this,I).clear()}}I=new WeakMap,P=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const b=(m=document==null?void 0:document.currentScript)==null?void 0:m.src;b&&(PDFWorkerUtil.fallbackWorkerSrc=b.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(b,c){let F;try{if(F=new URL(b),!F.origin||F.origin==="null")return!1}catch{return!1}const g=new URL(c,F);return F.origin===g.origin},PDFWorkerUtil.createCDNWrapper=function(b){const c=`importScripts("${b}");`;return URL.createObjectURL(new Blob([c]))}}const _PDFWorker=class _PDFWorker{constructor({name:b=null,port:c=null,verbosity:F=(0,_util.getVerbosityLevel)()}={}){var g;if(this.name=b,this.destroyed=!1,this.verbosity=F,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,c){if((g=t(_PDFWorker,N))!=null&&g.has(c))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,N)||rt(_PDFWorker,N,new WeakMap)).set(c,this),this._initializeFromPort(c);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(b){this._port=b,this._messageHandler=new _message_handler.MessageHandler("main","worker",b),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:b}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,b)||(b=PDFWorkerUtil.createCDNWrapper(new URL(b,window.location).href));const c=new Worker(b),F=new _message_handler.MessageHandler("main","worker",c),g=()=>{c.removeEventListener("error",$),F.destroy(),c.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},$=()=>{this._webWorker||g()};c.addEventListener("error",$),F.on("test",w=>{if(c.removeEventListener("error",$),this.destroyed){g();return}w?(this._messageHandler=F,this._port=c,this._webWorker=c,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),F.destroy(),c.terminate())}),F.on("ready",w=>{if(c.removeEventListener("error",$),this.destroyed){g();return}try{q()}catch{this._setupFakeWorker()}});const q=()=>{const w=new Uint8Array;F.send("test",w,[w.buffer])};q();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(b=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const c=new LoopbackPort;this._port=c;const F=`fake${PDFWorkerUtil.fakeWorkerId++}`,g=new _message_handler.MessageHandler(F+"_worker",F,c);b.setup(g,c);const $=new _message_handler.MessageHandler(F,F+"_worker",c);this._messageHandler=$,this._readyCapability.resolve(),$.send("configure",{verbosity:this.verbosity})}).catch(b=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${b.message}".`))})}destroy(){var b;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(b=t(_PDFWorker,N))==null||b.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(b){var F;if(!(b!=null&&b.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const c=(F=t(this,N))==null?void 0:F.get(b.port);if(c){if(c._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return c}return new _PDFWorker(b)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var b;try{return((b=globalThis.pdfjsWorker)==null?void 0:b.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};N=new WeakMap,G(_PDFWorker,N,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(c,F,g,$,q){G(this,p);G(this,B,new Map);G(this,k,new Map);G(this,S,new Map);G(this,x,null);this.messageHandler=c,this.loadingTask=F,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:$.ownerDocument,styleElement:$.styleElement}),this._params=$,this.canvasFactory=q.canvasFactory,this.filterFactory=q.filterFactory,this.cMapReaderFactory=q.cMapReaderFactory,this.standardFontDataFactory=q.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=g,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(c,F=_util.AnnotationMode.ENABLE,g=null,$=!1){let q=_util.RenderingIntentFlag.DISPLAY,w=_annotation_storage.SerializableEmpty;switch(c){case"any":q=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":q=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${c}`)}switch(F){case _util.AnnotationMode.DISABLE:q+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:q+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:q+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,w=(q&_util.RenderingIntentFlag.PRINT&&g instanceof _annotation_storage.PrintAnnotationStorage?g:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${F}`)}return $&&(q+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:q,cacheKey:`${q}_${w.hash}`,annotationStorageSerializable:w}}destroy(){var g;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(g=t(this,x))==null||g.reject(new Error("Worker was destroyed during onPassword callback"));const c=[];for(const $ of t(this,k).values())c.push($._destroy());t(this,k).clear(),t(this,S).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const F=this.messageHandler.sendWithPromise("Terminate",null);return c.push(F),Promise.all(c).then(()=>{var $;this.commonObjs.clear(),this.fontLoader.clear(),t(this,B).clear(),this.filterFactory.destroy(),($=this._networkStream)==null||$.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:c,loadingTask:F}=this;c.on("GetReader",(g,$)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=q=>{this._lastProgress={loaded:q.loaded,total:q.total}},$.onPull=()=>{this._fullReader.read().then(function({value:q,done:w}){if(w){$.close();return}(0,_util.assert)(q instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),$.enqueue(new Uint8Array(q),1,[q])}).catch(q=>{$.error(q)})},$.onCancel=q=>{this._fullReader.cancel(q),$.ready.catch(w=>{if(!this.destroyed)throw w})}}),c.on("ReaderHeadersReady",g=>{const $=new _util.PromiseCapability,q=this._fullReader;return q.headersReady.then(()=>{var w;(!q.isStreamingSupported||!q.isRangeSupported)&&(this._lastProgress&&((w=F.onProgress)==null||w.call(F,this._lastProgress)),q.onProgress=Y=>{var it;(it=F.onProgress)==null||it.call(F,{loaded:Y.loaded,total:Y.total})}),$.resolve({isStreamingSupported:q.isStreamingSupported,isRangeSupported:q.isRangeSupported,contentLength:q.contentLength})},$.reject),$.promise}),c.on("GetRangeReader",(g,$)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const q=this._networkStream.getRangeReader(g.begin,g.end);if(!q){$.close();return}$.onPull=()=>{q.read().then(function({value:w,done:Y}){if(Y){$.close();return}(0,_util.assert)(w instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),$.enqueue(new Uint8Array(w),1,[w])}).catch(w=>{$.error(w)})},$.onCancel=w=>{q.cancel(w),$.ready.catch(Y=>{if(!this.destroyed)throw Y})}}),c.on("GetDoc",({pdfInfo:g})=>{this._numPages=g.numPages,this._htmlForXfa=g.htmlForXfa,delete g.htmlForXfa,F._capability.resolve(new PDFDocumentProxy(g,this))}),c.on("DocException",function(g){let $;switch(g.name){case"PasswordException":$=new _util.PasswordException(g.message,g.code);break;case"InvalidPDFException":$=new _util.InvalidPDFException(g.message);break;case"MissingPDFException":$=new _util.MissingPDFException(g.message);break;case"UnexpectedResponseException":$=new _util.UnexpectedResponseException(g.message,g.status);break;case"UnknownErrorException":$=new _util.UnknownErrorException(g.message,g.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}F._capability.reject($)}),c.on("PasswordRequest",g=>{if(rt(this,x,new _util.PromiseCapability),F.onPassword){const $=q=>{q instanceof Error?t(this,x).reject(q):t(this,x).resolve({password:q})};try{F.onPassword($,g.code)}catch(q){t(this,x).reject(q)}}else t(this,x).reject(new _util.PasswordException(g.message,g.code));return t(this,x).promise}),c.on("DataLoaded",g=>{var $;($=F.onProgress)==null||$.call(F,{loaded:g.length,total:g.length}),this.downloadInfoCapability.resolve(g)}),c.on("StartRenderPage",g=>{if(this.destroyed)return;t(this,k).get(g.pageIndex)._startRenderPage(g.transparency,g.cacheKey)}),c.on("commonobj",([g,$,q])=>{var w;if(!this.destroyed&&!this.commonObjs.has(g))switch($){case"Font":const Y=this._params;if("error"in q){const V=q.error;(0,_util.warn)(`Error during font loading: ${V}`),this.commonObjs.resolve(g,V);break}const it=Y.pdfBug&&((w=globalThis.FontInspector)!=null&&w.enabled)?(V,dt)=>globalThis.FontInspector.fontAdded(V,dt):null,ct=new _font_loader.FontFaceObject(q,{isEvalSupported:Y.isEvalSupported,disableFontFace:Y.disableFontFace,ignoreErrors:Y.ignoreErrors,inspectFont:it});this.fontLoader.bind(ct).catch(V=>c.sendWithPromise("FontFallback",{id:g})).finally(()=>{!Y.fontExtraProperties&&ct.data&&(ct.data=null),this.commonObjs.resolve(g,ct)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(g,q);break;default:throw new Error(`Got unknown common object type ${$}`)}}),c.on("obj",([g,$,q,w])=>{var it;if(this.destroyed)return;const Y=t(this,k).get($);if(!Y.objs.has(g))switch(q){case"Image":if(Y.objs.resolve(g,w),w){let ct;if(w.bitmap){const{width:V,height:dt}=w;ct=V*dt*4}else ct=((it=w.data)==null?void 0:it.length)||0;ct>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Y._maybeCleanupAfterRender=!0)}break;case"Pattern":Y.objs.resolve(g,w);break;default:throw new Error(`Got unknown object type ${q}`)}}),c.on("DocProgress",g=>{var $;this.destroyed||($=F.onProgress)==null||$.call(F,{loaded:g.loaded,total:g.total})}),c.on("FetchBuiltInCMap",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(g):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),c.on("FetchStandardFontData",g=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(g):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var g;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:c,transfers:F}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:c,filename:((g=this._fullReader)==null?void 0:g.filename)??null},F).finally(()=>{this.annotationStorage.resetModified()})}getPage(c){if(!Number.isInteger(c)||c<=0||c>this._numPages)return Promise.reject(new Error("Invalid page request."));const F=c-1,g=t(this,S).get(F);if(g)return g;const $=this.messageHandler.sendWithPromise("GetPage",{pageIndex:F}).then(q=>{if(this.destroyed)throw new Error("Transport destroyed");const w=new PDFPageProxy(F,q,this,this._params.pdfBug);return t(this,k).set(F,w),w});return t(this,S).set(F,$),$}getPageIndex(c){return typeof c!="object"||c===null||!Number.isInteger(c.num)||c.num<0||!Number.isInteger(c.gen)||c.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:c.num,gen:c.gen})}getAnnotations(c,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c,intent:F})}getFieldObjects(){return X(this,p,Te).call(this,"GetFieldObjects")}hasJSActions(){return X(this,p,Te).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(c){return typeof c!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:c})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return X(this,p,Te).call(this,"GetDocJSActions")}getPageJSActions(c){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c})}getStructTree(c){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(c=>new _optional_content_config.OptionalContentConfig(c))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const c="GetMetadata",F=t(this,B).get(c);if(F)return F;const g=this.messageHandler.sendWithPromise(c,null).then($=>{var q,w;return{info:$[0],metadata:$[1]?new _metadata.Metadata($[1]):null,contentDispositionFilename:((q=this._fullReader)==null?void 0:q.filename)??null,contentLength:((w=this._fullReader)==null?void 0:w.contentLength)??null}});return t(this,B).set(c,g),g}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(c=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const F of t(this,k).values())if(!F.cleanup())throw new Error(`startCleanup: Page ${F.pageNumber} is currently rendering.`);this.commonObjs.clear(),c||this.fontLoader.clear(),t(this,B).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:c,enableXfa:F}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:c,enableXfa:F})}}B=new WeakMap,k=new WeakMap,S=new WeakMap,x=new WeakMap,p=new WeakSet,Te=function(c,F=null){const g=t(this,B).get(c);if(g)return g;const $=this.messageHandler.sendWithPromise(c,F);return t(this,B).set(c,$),$};class PDFObjects{constructor(){G(this,C);G(this,R,Object.create(null))}get(c,F=null){if(F){const $=X(this,C,Be).call(this,c);return $.capability.promise.then(()=>F($.data)),null}const g=t(this,R)[c];if(!(g!=null&&g.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${c}.`);return g.data}has(c){const F=t(this,R)[c];return(F==null?void 0:F.capability.settled)||!1}resolve(c,F=null){const g=X(this,C,Be).call(this,c);g.data=F,g.capability.resolve()}clear(){var c;for(const F in t(this,R)){const{data:g}=t(this,R)[F];(c=g==null?void 0:g.bitmap)==null||c.close()}rt(this,R,Object.create(null))}}R=new WeakMap,C=new WeakSet,Be=function(c){var F;return(F=t(this,R))[c]||(F[c]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(c){G(this,l,null);rt(this,l,c),this.onContinue=null}get promise(){return t(this,l).capability.promise}cancel(c=0){t(this,l).cancel(null,c)}get separateAnnots(){const{separateAnnots:c}=t(this,l).operatorList;if(!c)return!1;const{annotationCanvasMap:F}=t(this,l);return c.form||c.canvas&&(F==null?void 0:F.size)>0}}l=new WeakMap,exports.RenderTask=RenderTask;const O=class O{constructor({callback:c,params:F,objs:g,commonObjs:$,annotationCanvasMap:q,operatorList:w,pageIndex:Y,canvasFactory:it,filterFactory:ct,useRequestAnimationFrame:V=!1,pdfBug:dt=!1,pageColors:bt=null}){this.callback=c,this.params=F,this.objs=g,this.commonObjs=$,this.annotationCanvasMap=q,this.operatorListIdx=null,this.operatorList=w,this._pageIndex=Y,this.canvasFactory=it,this.filterFactory=ct,this._pdfBug=dt,this.pageColors=bt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=V===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:c=!1,optionalContentConfig:F}){var Y,it;if(this.cancelled)return;if(this._canvas){if(t(O,d).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(O,d).add(this._canvas)}this._pdfBug&&((Y=globalThis.StepperManager)!=null&&Y.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:$,transform:q,background:w}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:F},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:q,viewport:$,transparency:c,background:w}),this.operatorListIdx=0,this.graphicsReady=!0,(it=this.graphicsReadyCallback)==null||it.call(this)}cancel(c=null,F=0){var g;this.running=!1,this.cancelled=!0,(g=this.gfx)==null||g.endDrawing(),t(O,d).delete(this._canvas),this.callback(c||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,F))}operatorListChanged(){var c;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(c=this.stepper)==null||c.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(O,d).delete(this._canvas),this.callback())))}};d=new WeakMap,G(O,d,new WeakSet);let InternalRenderTask=O;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(_,e,M)=>{var P,m,N,vn,k;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=M(1),u=M(4),E=M(8);const j=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=j;class at{constructor(){G(this,N);G(this,P,!1);G(this,m,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(x,p){const A=t(this,m).get(x);return A===void 0?p:Object.assign(p,A)}getRawValue(x){return t(this,m).get(x)}remove(x){if(t(this,m).delete(x),t(this,m).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const p of t(this,m).values())if(p instanceof u.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(x,p){const A=t(this,m).get(x);let R=!1;if(A!==void 0)for(const[C,v]of Object.entries(p))A[C]!==v&&(R=!0,A[C]=v);else R=!0,t(this,m).set(x,p);R&&X(this,N,vn).call(this),p instanceof u.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(p.constructor._type)}has(x){return t(this,m).has(x)}getAll(){return t(this,m).size>0?(0,n.objectFromMap)(t(this,m)):null}setAll(x){for(const[p,A]of Object.entries(x))this.setValue(p,A)}get size(){return t(this,m).size}resetModified(){t(this,P)&&(rt(this,P,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new I(this)}get serializable(){if(t(this,m).size===0)return j;const x=new Map,p=new E.MurmurHash3_64,A=[],R=Object.create(null);let C=!1;for(const[v,l]of t(this,m)){const d=l instanceof u.AnnotationEditor?l.serialize(!1,R):l;d&&(x.set(v,d),p.update(`${v}:${JSON.stringify(d)}`),C||(C=!!d.bitmap))}if(C)for(const v of x.values())v.bitmap&&A.push(v.bitmap);return x.size>0?{map:x,hash:p.hexdigest(),transfers:A}:j}}P=new WeakMap,m=new WeakMap,N=new WeakSet,vn=function(){t(this,P)||(rt(this,P,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=at;class I extends at{constructor(p){super();G(this,k,void 0);const{map:A,hash:R,transfers:C}=p.serializable,v=structuredClone(A,C?{transfer:C}:null);rt(this,k,{map:v,hash:R,transfers:C})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,k)}}k=new WeakMap,e.PrintAnnotationStorage=I},(_,e,M)=>{var I,P,m,N,B,k,S,x,p,A,R,C,v,l,d,Ue,b,He,F,We,$,Ge,w,En,it,Sn,V,xn,bt,$e,Tt,Tn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=M(5),u=M(1),E=M(6);const i=class i{constructor(a){G(this,d);G(this,b);G(this,$);G(this,w);G(this,it);G(this,V);G(this,bt);G(this,Tt);G(this,I,"");G(this,P,!1);G(this,m,null);G(this,N,null);G(this,B,null);G(this,k,!1);G(this,S,null);G(this,x,this.focusin.bind(this));G(this,p,this.focusout.bind(this));G(this,A,!1);G(this,R,!1);G(this,C,!1);ne(this,"_initialOptions",Object.create(null));ne(this,"_uiManager",null);ne(this,"_focusEventsAllowed",!0);ne(this,"_l10nPromise",null);G(this,v,!1);G(this,l,i._zIndex++);this.constructor===i&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null,this._uiManager=a.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=a.isCentered,this._structTreeParentId=null;const{rotation:h,rawDims:{pageWidth:f,pageHeight:T,pageX:D,pageY:W}}=this.parent.viewport;this.rotation=h,this.pageRotation=(360+h-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[f,T],this.pageTranslation=[D,W];const[st,tt]=this.parentDimensions;this.x=a.x/st,this.y=a.y/tt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(a){const h=new at({id:a.parent.getNextId(),parent:a.parent,uiManager:a._uiManager});h.annotationElementId=a.annotationElementId,h.deleted=!0,h._uiManager.addToAnnotationStorage(h)}static initialize(a,h=null){if(i._l10nPromise||(i._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(T=>[T,a.get(T)]))),h!=null&&h.strings)for(const T of h.strings)i._l10nPromise.set(T,a.get(T));if(i._borderLineWidth!==-1)return;const f=getComputedStyle(document.documentElement);i._borderLineWidth=parseFloat(f.getPropertyValue("--outline-width"))||0}static updateDefaultParams(a,h){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(a){return!1}static paste(a,h){(0,u.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,v)}set _isDraggable(a){var h;rt(this,v,a),(h=this.div)==null||h.classList.toggle("draggable",a)}center(){const[a,h]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*h/(a*2),this.y+=this.width*a/(h*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*h/(a*2),this.y-=this.width*a/(h*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(a){this._uiManager.addCommands(a)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,l)}setParent(a){a!==null&&(this.pageIndex=a.pageIndex,this.pageDimensions=a.pageDimensions),this.parent=a}focusin(a){this._focusEventsAllowed&&(t(this,A)?rt(this,A,!1):this.parent.setSelected(this))}focusout(a){var f;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const h=a.relatedTarget;h!=null&&h.closest(`#${this.id}`)||(a.preventDefault(),(f=this.parent)!=null&&f.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(a,h,f,T){const[D,W]=this.parentDimensions;[f,T]=this.screenToPageTranslation(f,T),this.x=(a+f)/D,this.y=(h+T)/W,this.fixAndSetPosition()}translate(a,h){X(this,d,Ue).call(this,this.parentDimensions,a,h)}translateInPage(a,h){X(this,d,Ue).call(this,this.pageDimensions,a,h),this.div.scrollIntoView({block:"nearest"})}drag(a,h){const[f,T]=this.parentDimensions;if(this.x+=a/f,this.y+=h/T,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ot,y:ut}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ot,ut)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:D,y:W}=this;const[st,tt]=X(this,b,He).call(this);D+=st,W+=tt,this.div.style.left=`${(100*D).toFixed(2)}%`,this.div.style.top=`${(100*W).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[a,h]=this.pageDimensions;let{x:f,y:T,width:D,height:W}=this;switch(D*=a,W*=h,f*=a,T*=h,this.rotation){case 0:f=Math.max(0,Math.min(a-D,f)),T=Math.max(0,Math.min(h-W,T));break;case 90:f=Math.max(0,Math.min(a-W,f)),T=Math.min(h,Math.max(D,T));break;case 180:f=Math.min(a,Math.max(D,f)),T=Math.min(h,Math.max(W,T));break;case 270:f=Math.min(a,Math.max(W,f)),T=Math.max(0,Math.min(h-D,T));break}this.x=f/=a,this.y=T/=h;const[st,tt]=X(this,b,He).call(this);f+=st,T+=tt;const{style:ot}=this.div;ot.left=`${(100*f).toFixed(2)}%`,ot.top=`${(100*T).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(a,h){var f;return X(f=i,F,We).call(f,a,h,this.parentRotation)}pageTranslationToScreen(a,h){var f;return X(f=i,F,We).call(f,a,h,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:a,pageDimensions:[h,f]}=this,T=h*a,D=f*a;return u.FeatureTest.isCSSRoundSupported?[Math.round(T),Math.round(D)]:[T,D]}setDims(a,h){var D;const[f,T]=this.parentDimensions;this.div.style.width=`${(100*a/f).toFixed(2)}%`,t(this,k)||(this.div.style.height=`${(100*h/T).toFixed(2)}%`),(D=t(this,m))==null||D.classList.toggle("small",a<i.SMALL_EDITOR_SIZE||h<i.SMALL_EDITOR_SIZE)}fixDims(){const{style:a}=this.div,{height:h,width:f}=a,T=f.endsWith("%"),D=!t(this,k)&&h.endsWith("%");if(T&&D)return;const[W,st]=this.parentDimensions;T||(a.width=`${(100*parseFloat(f)/W).toFixed(2)}%`),!t(this,k)&&!D&&(a.height=`${(100*parseFloat(h)/st).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,m))return;const a=rt(this,m,document.createElement("button"));a.className="altText";const h=await i._l10nPromise.get("editor_alt_text_button_label");a.textContent=h,a.setAttribute("aria-label",h),a.tabIndex="0",a.addEventListener("contextmenu",E.noContextMenu),a.addEventListener("pointerdown",f=>f.stopPropagation()),a.addEventListener("click",f=>{f.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),a.addEventListener("keydown",f=>{f.target===a&&f.key==="Enter"&&(f.preventDefault(),this._uiManager.editAltText(this))}),X(this,bt,$e).call(this),this.div.append(a),i.SMALL_EDITOR_SIZE||(i.SMALL_EDITOR_SIZE=Math.min(128,Math.round(a.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,I),decorative:t(this,P)}}set altTextData({altText:a,decorative:h}){t(this,I)===a&&t(this,P)===h||(rt(this,I,a),rt(this,P,h),X(this,bt,$e).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,x)),this.div.addEventListener("focusout",t(this,p));const[a,h]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*h/a).toFixed(2)}%`,this.div.style.maxHeight=`${(100*a/h).toFixed(2)}%`);const[f,T]=this.getInitialTranslation();return this.translate(f,T),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(a){const{isMac:h}=u.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&h){a.preventDefault();return}rt(this,A,!0),X(this,Tt,Tn).call(this,a)}moveInDOM(){var a;(a=this.parent)==null||a.moveEditorInDOM(this)}_setParentAndPosition(a,h,f){a.changeParent(this),this.x=h,this.y=f,this.fixAndSetPosition()}getRect(a,h){const f=this.parentScale,[T,D]=this.pageDimensions,[W,st]=this.pageTranslation,tt=a/f,ot=h/f,ut=this.x*T,gt=this.y*D,ht=this.width*T,Ct=this.height*D;switch(this.rotation){case 0:return[ut+tt+W,D-gt-ot-Ct+st,ut+tt+ht+W,D-gt-ot+st];case 90:return[ut+ot+W,D-gt+tt+st,ut+ot+Ct+W,D-gt+tt+ht+st];case 180:return[ut-tt-ht+W,D-gt+ot+st,ut-tt+W,D-gt+ot+Ct+st];case 270:return[ut-ot-Ct+W,D-gt-tt-ht+st,ut-ot+W,D-gt-tt+st];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,h){const[f,T,D,W]=a,st=D-f,tt=W-T;switch(this.rotation){case 0:return[f,h-W,st,tt];case 90:return[f,h-T,tt,st];case 180:return[D,h-T,st,tt];case 270:return[D,h-W,tt,st];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){rt(this,C,!0)}disableEditMode(){rt(this,C,!1)}isInEditMode(){return t(this,C)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var a,h;(a=this.div)==null||a.addEventListener("focusin",t(this,x)),(h=this.div)==null||h.addEventListener("focusout",t(this,p))}serialize(a=!1,h=null){(0,u.unreachable)("An editor must be serializable")}static deserialize(a,h,f){const T=new this.prototype.constructor({parent:h,id:h.getNextId(),uiManager:f});T.rotation=a.rotation;const[D,W]=T.pageDimensions,[st,tt,ot,ut]=T.getRectInCurrentCoords(a.rect,W);return T.x=st/D,T.y=tt/W,T.width=ot/D,T.height=ut/W,T}remove(){var a;this.div.removeEventListener("focusin",t(this,x)),this.div.removeEventListener("focusout",t(this,p)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(a=t(this,m))==null||a.remove(),rt(this,m,null),rt(this,N,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(X(this,w,En).call(this),t(this,S).classList.remove("hidden"))}select(){var a;this.makeResizable(),(a=this.div)==null||a.classList.add("selectedEditor")}unselect(){var a,h,f;(a=t(this,S))==null||a.classList.add("hidden"),(h=this.div)==null||h.classList.remove("selectedEditor"),(f=this.div)!=null&&f.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(a,h){}disableEditing(){t(this,m)&&(t(this,m).hidden=!0)}enableEditing(){t(this,m)&&(t(this,m).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,R)}set isEditing(a){rt(this,R,a),this.parent&&(a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(a,h){rt(this,k,!0);const f=a/h,{style:T}=this.div;T.aspectRatio=f,T.height="auto"}static get MIN_SIZE(){return 16}};I=new WeakMap,P=new WeakMap,m=new WeakMap,N=new WeakMap,B=new WeakMap,k=new WeakMap,S=new WeakMap,x=new WeakMap,p=new WeakMap,A=new WeakMap,R=new WeakMap,C=new WeakMap,v=new WeakMap,l=new WeakMap,d=new WeakSet,Ue=function([a,h],f,T){[f,T]=this.screenToPageTranslation(f,T),this.x+=f/a,this.y+=T/h,this.fixAndSetPosition()},b=new WeakSet,He=function(){const[a,h]=this.parentDimensions,{_borderLineWidth:f}=i,T=f/a,D=f/h;switch(this.rotation){case 90:return[-T,D];case 180:return[T,D];case 270:return[T,-D];default:return[-T,-D]}},F=new WeakSet,We=function(a,h,f){switch(f){case 90:return[h,-a];case 180:return[-a,-h];case 270:return[-h,a];default:return[a,h]}},$=new WeakSet,Ge=function(a){switch(a){case 90:{const[h,f]=this.pageDimensions;return[0,-h/f,f/h,0]}case 180:return[-1,0,0,-1];case 270:{const[h,f]=this.pageDimensions;return[0,h/f,-f/h,0]}default:return[1,0,0,1]}},w=new WeakSet,En=function(){if(t(this,S))return;rt(this,S,document.createElement("div")),t(this,S).classList.add("resizers");const a=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||a.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const h of a){const f=document.createElement("div");t(this,S).append(f),f.classList.add("resizer",h),f.addEventListener("pointerdown",X(this,it,Sn).bind(this,h)),f.addEventListener("contextmenu",E.noContextMenu)}this.div.prepend(t(this,S))},it=new WeakSet,Sn=function(a,h){h.preventDefault();const{isMac:f}=u.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&f)return;const T=X(this,V,xn).bind(this,a),D=this._isDraggable;this._isDraggable=!1;const W={passive:!0,capture:!0};window.addEventListener("pointermove",T,W);const st=this.x,tt=this.y,ot=this.width,ut=this.height,gt=this.parent.div.style.cursor,ht=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(h.target).cursor;const Ct=()=>{this._isDraggable=D,window.removeEventListener("pointerup",Ct),window.removeEventListener("blur",Ct),window.removeEventListener("pointermove",T,W),this.parent.div.style.cursor=gt,this.div.style.cursor=ht;const Ot=this.x,Et=this.y,It=this.width,mt=this.height;Ot===st&&Et===tt&&It===ot&&mt===ut||this.addCommands({cmd:()=>{this.width=It,this.height=mt,this.x=Ot,this.y=Et;const[et,nt]=this.parentDimensions;this.setDims(et*It,nt*mt),this.fixAndSetPosition()},undo:()=>{this.width=ot,this.height=ut,this.x=st,this.y=tt;const[et,nt]=this.parentDimensions;this.setDims(et*ot,nt*ut),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Ct),window.addEventListener("blur",Ct)},V=new WeakSet,xn=function(a,h){const[f,T]=this.parentDimensions,D=this.x,W=this.y,st=this.width,tt=this.height,ot=i.MIN_SIZE/f,ut=i.MIN_SIZE/T,gt=yt=>Math.round(yt*1e4)/1e4,ht=X(this,$,Ge).call(this,this.rotation),Ct=(yt,vt)=>[ht[0]*yt+ht[2]*vt,ht[1]*yt+ht[3]*vt],Ot=X(this,$,Ge).call(this,360-this.rotation),Et=(yt,vt)=>[Ot[0]*yt+Ot[2]*vt,Ot[1]*yt+Ot[3]*vt];let It,mt,et=!1,nt=!1;switch(a){case"topLeft":et=!0,It=(yt,vt)=>[0,0],mt=(yt,vt)=>[yt,vt];break;case"topMiddle":It=(yt,vt)=>[yt/2,0],mt=(yt,vt)=>[yt/2,vt];break;case"topRight":et=!0,It=(yt,vt)=>[yt,0],mt=(yt,vt)=>[0,vt];break;case"middleRight":nt=!0,It=(yt,vt)=>[yt,vt/2],mt=(yt,vt)=>[0,vt/2];break;case"bottomRight":et=!0,It=(yt,vt)=>[yt,vt],mt=(yt,vt)=>[0,0];break;case"bottomMiddle":It=(yt,vt)=>[yt/2,vt],mt=(yt,vt)=>[yt/2,0];break;case"bottomLeft":et=!0,It=(yt,vt)=>[0,vt],mt=(yt,vt)=>[yt,0];break;case"middleLeft":nt=!0,It=(yt,vt)=>[0,vt/2],mt=(yt,vt)=>[yt,vt/2];break}const pt=It(st,tt),wt=mt(st,tt);let Pt=Ct(...wt);const Ut=gt(D+Pt[0]),Vt=gt(W+Pt[1]);let Ht=1,qt=1,[$t,Wt]=this.screenToPageTranslation(h.movementX,h.movementY);if([$t,Wt]=Et($t/f,Wt/T),et){const yt=Math.hypot(st,tt);Ht=qt=Math.max(Math.min(Math.hypot(wt[0]-pt[0]-$t,wt[1]-pt[1]-Wt)/yt,1/st,1/tt),ot/st,ut/tt)}else nt?Ht=Math.max(ot,Math.min(1,Math.abs(wt[0]-pt[0]-$t)))/st:qt=Math.max(ut,Math.min(1,Math.abs(wt[1]-pt[1]-Wt)))/tt;const zt=gt(st*Ht),ft=gt(tt*qt);Pt=Ct(...mt(zt,ft));const Z=Ut-Pt[0],K=Vt-Pt[1];this.width=zt,this.height=ft,this.x=Z,this.y=K,this.setDims(f*zt,T*ft),this.fixAndSetPosition()},bt=new WeakSet,$e=async function(){var f;const a=t(this,m);if(!a)return;if(!t(this,I)&&!t(this,P)){a.classList.remove("done"),(f=t(this,N))==null||f.remove();return}i._l10nPromise.get("editor_alt_text_edit_button_label").then(T=>{a.setAttribute("aria-label",T)});let h=t(this,N);if(!h){rt(this,N,h=document.createElement("span")),h.className="tooltip",h.setAttribute("role","tooltip");const T=h.id=`alt-text-tooltip-${this.id}`;a.setAttribute("aria-describedby",T);const D=100;a.addEventListener("mouseenter",()=>{rt(this,B,setTimeout(()=>{rt(this,B,null),t(this,N).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},D))}),a.addEventListener("mouseleave",()=>{var W;clearTimeout(t(this,B)),rt(this,B,null),(W=t(this,N))==null||W.classList.remove("show")})}a.classList.add("done"),h.innerText=t(this,P)?await i._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,I),h.parentNode||a.append(h)},Tt=new WeakSet,Tn=function(a){if(!this._isDraggable)return;const h=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let f,T;h&&(f={passive:!0,capture:!0},T=W=>{const[st,tt]=this.screenToPageTranslation(W.movementX,W.movementY);this._uiManager.dragSelectedEditors(st,tt)},window.addEventListener("pointermove",T,f));const D=()=>{if(window.removeEventListener("pointerup",D),window.removeEventListener("blur",D),h&&window.removeEventListener("pointermove",T,f),rt(this,A,!1),!this._uiManager.endDragSession()){const{isMac:W}=u.FeatureTest.platform;a.ctrlKey&&!W||a.shiftKey||a.metaKey&&W?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",D),window.addEventListener("blur",D)},G(i,F),ne(i,"_borderLineWidth",-1),ne(i,"_colorManager",new n.ColorManager),ne(i,"_zIndex",1),ne(i,"SMALL_EDITOR_SIZE",0);let j=i;e.AnnotationEditor=j;class at extends j{constructor(a){super(a),this.annotationElementId=a.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(_,e,M)=>{var k,S,x,p,A,Ve,v,l,d,O,b,wn,g,$,q,w,Y,it,ct,V,dt,bt,St,Tt,L,i,o,a,h,f,T,D,W,st,tt,ot,ut,gt,ht,Ct,Ot,Et,It,mt,et,nt,pt,Pn,Pt,qe,Vt,ze,qt,we,Wt,Xe,ft,Ye,K,ae,vt,be,te,Cn,xt,Rn,Rt,Ke,Bt,_e,At,Je;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=E,e.opacityToHex=j;var n=M(1),u=M(6);function E(U,s,y){for(const H of y)s.addEventListener(H,U[H].bind(U))}function j(U){return Math.round(Math.min(255,Math.max(1,255*U))).toString(16).padStart(2,"0")}class at{constructor(){G(this,k,0)}getId(){return`${n.AnnotationEditorPrefix}${me(this,k)._++}`}}k=new WeakMap;const C=class C{constructor(){G(this,A);G(this,S,(0,n.getUuid)());G(this,x,0);G(this,p,null)}static get _isSVGFittingCanvas(){const s='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',H=new OffscreenCanvas(1,3).getContext("2d"),z=new Image;z.src=s;const J=z.decode().then(()=>(H.drawImage(z,0,0,1,1,0,0,1,3),new Uint32Array(H.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",J)}async getFromFile(s){const{lastModified:y,name:H,size:z,type:J}=s;return X(this,A,Ve).call(this,`${y}_${H}_${z}_${J}`,s)}async getFromUrl(s){return X(this,A,Ve).call(this,s,s)}async getFromId(s){t(this,p)||rt(this,p,new Map);const y=t(this,p).get(s);return y?y.bitmap?(y.refCounter+=1,y):y.file?this.getFromFile(y.file):this.getFromUrl(y.url):null}getSvgUrl(s){const y=t(this,p).get(s);return y!=null&&y.isSvg?y.svgUrl:null}deleteId(s){t(this,p)||rt(this,p,new Map);const y=t(this,p).get(s);y&&(y.refCounter-=1,y.refCounter===0&&(y.bitmap=null))}isValidId(s){return s.startsWith(`image_${t(this,S)}_`)}};S=new WeakMap,x=new WeakMap,p=new WeakMap,A=new WeakSet,Ve=async function(s,y){t(this,p)||rt(this,p,new Map);let H=t(this,p).get(s);if(H===null)return null;if(H!=null&&H.bitmap)return H.refCounter+=1,H;try{H||(H={bitmap:null,id:`image_${t(this,S)}_${me(this,x)._++}`,refCounter:0,isSvg:!1});let z;if(typeof y=="string"){H.url=y;const J=await fetch(y);if(!J.ok)throw new Error(J.statusText);z=await J.blob()}else z=H.file=y;if(z.type==="image/svg+xml"){const J=C._isSVGFittingCanvas,lt=new FileReader,_t=new Image,Ft=new Promise((kt,Xt)=>{_t.onload=()=>{H.bitmap=_t,H.isSvg=!0,kt()},lt.onload=async()=>{const Mt=H.svgUrl=lt.result;_t.src=await J?`${Mt}#svgView(preserveAspectRatio(none))`:Mt},_t.onerror=lt.onerror=Xt});lt.readAsDataURL(z),await Ft}else H.bitmap=await createImageBitmap(z);H.refCounter=1}catch(z){console.error(z),H=null}return t(this,p).set(s,H),H&&t(this,p).set(H.id,H),H};let I=C;class P{constructor(s=128){G(this,v,[]);G(this,l,!1);G(this,d,void 0);G(this,O,-1);rt(this,d,s)}add({cmd:s,undo:y,mustExec:H,type:z=NaN,overwriteIfSameType:J=!1,keepUndo:lt=!1}){if(H&&s(),t(this,l))return;const _t={cmd:s,undo:y,type:z};if(t(this,O)===-1){t(this,v).length>0&&(t(this,v).length=0),rt(this,O,0),t(this,v).push(_t);return}if(J&&t(this,v)[t(this,O)].type===z){lt&&(_t.undo=t(this,v)[t(this,O)].undo),t(this,v)[t(this,O)]=_t;return}const Ft=t(this,O)+1;Ft===t(this,d)?t(this,v).splice(0,1):(rt(this,O,Ft),Ft<t(this,v).length&&t(this,v).splice(Ft)),t(this,v).push(_t)}undo(){t(this,O)!==-1&&(rt(this,l,!0),t(this,v)[t(this,O)].undo(),rt(this,l,!1),rt(this,O,t(this,O)-1))}redo(){t(this,O)<t(this,v).length-1&&(rt(this,O,t(this,O)+1),rt(this,l,!0),t(this,v)[t(this,O)].cmd(),rt(this,l,!1))}hasSomethingToUndo(){return t(this,O)!==-1}hasSomethingToRedo(){return t(this,O)<t(this,v).length-1}destroy(){rt(this,v,null)}}v=new WeakMap,l=new WeakMap,d=new WeakMap,O=new WeakMap,e.CommandManager=P;class m{constructor(s){G(this,b);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:y}=n.FeatureTest.platform;for(const[H,z,J={}]of s)for(const lt of H){const _t=lt.startsWith("mac+");y&&_t?(this.callbacks.set(lt.slice(4),{callback:z,options:J}),this.allKeys.add(lt.split("+").at(-1))):!y&&!_t&&(this.callbacks.set(lt,{callback:z,options:J}),this.allKeys.add(lt.split("+").at(-1)))}}exec(s,y){if(!this.allKeys.has(y.key))return;const H=this.callbacks.get(X(this,b,wn).call(this,y));if(!H)return;const{callback:z,options:{bubbles:J=!1,args:lt=[],checker:_t=null}}=H;_t&&!_t(s,y)||(z.bind(s,...lt)(),J||(y.stopPropagation(),y.preventDefault()))}}b=new WeakSet,wn=function(s){s.altKey&&this.buffer.push("alt"),s.ctrlKey&&this.buffer.push("ctrl"),s.metaKey&&this.buffer.push("meta"),s.shiftKey&&this.buffer.push("shift"),this.buffer.push(s.key);const y=this.buffer.join("+");return this.buffer.length=0,y},e.KeyboardManager=m;const F=class F{get _colors(){const s=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(s),(0,n.shadow)(this,"_colors",s)}convert(s){const y=(0,u.getRGB)(s);if(!window.matchMedia("(forced-colors: active)").matches)return y;for(const[H,z]of this._colors)if(z.every((J,lt)=>J===y[lt]))return F._colorsMapping.get(H);return y}getHexCode(s){const y=this._colors.get(s);return y?n.Util.makeHexColor(...y):s}};ne(F,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let N=F;e.ColorManager=N;const Dt=class Dt{constructor(s,y,H,z,J,lt){G(this,pt);G(this,Pt);G(this,Vt);G(this,qt);G(this,Wt);G(this,ft);G(this,K);G(this,vt);G(this,te);G(this,xt);G(this,Rt);G(this,Bt);G(this,At);G(this,g,null);G(this,$,new Map);G(this,q,new Map);G(this,w,null);G(this,Y,null);G(this,it,new P);G(this,ct,0);G(this,V,new Set);G(this,dt,null);G(this,bt,null);G(this,St,new Set);G(this,Tt,null);G(this,L,new at);G(this,i,!1);G(this,o,!1);G(this,a,null);G(this,h,n.AnnotationEditorType.NONE);G(this,f,new Set);G(this,T,null);G(this,D,this.blur.bind(this));G(this,W,this.focus.bind(this));G(this,st,this.copy.bind(this));G(this,tt,this.cut.bind(this));G(this,ot,this.paste.bind(this));G(this,ut,this.keydown.bind(this));G(this,gt,this.onEditingAction.bind(this));G(this,ht,this.onPageChanging.bind(this));G(this,Ct,this.onScaleChanging.bind(this));G(this,Ot,this.onRotationChanging.bind(this));G(this,Et,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});G(this,It,[0,0]);G(this,mt,null);G(this,et,null);G(this,nt,null);rt(this,et,s),rt(this,nt,y),rt(this,w,H),this._eventBus=z,this._eventBus._on("editingaction",t(this,gt)),this._eventBus._on("pagechanging",t(this,ht)),this._eventBus._on("scalechanging",t(this,Ct)),this._eventBus._on("rotationchanging",t(this,Ot)),rt(this,Y,J.annotationStorage),rt(this,Tt,J.filterFactory),rt(this,T,lt),this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const s=Dt.prototype,y=J=>{const{activeElement:lt}=document;return lt&&t(J,et).contains(lt)&&J.hasSomethingToControl()},H=this.TRANSLATE_SMALL,z=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new m([[["ctrl+a","mac+meta+a"],s.selectAll],[["ctrl+z","mac+meta+z"],s.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],s.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],s.delete],[["Escape","mac+Escape"],s.unselectAll],[["ArrowLeft","mac+ArrowLeft"],s.translateSelectedEditors,{args:[-H,0],checker:y}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],s.translateSelectedEditors,{args:[-z,0],checker:y}],[["ArrowRight","mac+ArrowRight"],s.translateSelectedEditors,{args:[H,0],checker:y}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],s.translateSelectedEditors,{args:[z,0],checker:y}],[["ArrowUp","mac+ArrowUp"],s.translateSelectedEditors,{args:[0,-H],checker:y}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],s.translateSelectedEditors,{args:[0,-z],checker:y}],[["ArrowDown","mac+ArrowDown"],s.translateSelectedEditors,{args:[0,H],checker:y}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],s.translateSelectedEditors,{args:[0,z],checker:y}]]))}destroy(){X(this,qt,we).call(this),X(this,Pt,qe).call(this),this._eventBus._off("editingaction",t(this,gt)),this._eventBus._off("pagechanging",t(this,ht)),this._eventBus._off("scalechanging",t(this,Ct)),this._eventBus._off("rotationchanging",t(this,Ot));for(const s of t(this,q).values())s.destroy();t(this,q).clear(),t(this,$).clear(),t(this,St).clear(),rt(this,g,null),t(this,f).clear(),t(this,it).destroy(),t(this,w).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",t(this,T)?t(this,Tt).addHCMFilter(t(this,T).foreground,t(this,T).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(t(this,et)).direction)}editAltText(s){var y;(y=t(this,w))==null||y.editAltText(this,s)}onPageChanging({pageNumber:s}){rt(this,ct,s-1)}focusMainContainer(){t(this,et).focus()}findParent(s,y){for(const H of t(this,q).values()){const{x:z,y:J,width:lt,height:_t}=H.div.getBoundingClientRect();if(s>=z&&s<=z+lt&&y>=J&&y<=J+_t)return H}return null}disableUserSelect(s=!1){t(this,nt).classList.toggle("noUserSelect",s)}addShouldRescale(s){t(this,St).add(s)}removeShouldRescale(s){t(this,St).delete(s)}onScaleChanging({scale:s}){this.commitOrRemove(),this.viewParameters.realScale=s*u.PixelsPerInch.PDF_TO_CSS_UNITS;for(const y of t(this,St))y.onScaleChanging()}onRotationChanging({pagesRotation:s}){this.commitOrRemove(),this.viewParameters.rotation=s}addToAnnotationStorage(s){!s.isEmpty()&&t(this,Y)&&!t(this,Y).has(s.id)&&t(this,Y).setValue(s.id,s)}blur(){if(!this.hasSelection)return;const{activeElement:s}=document;for(const y of t(this,f))if(y.div.contains(s)){rt(this,a,[y,s]),y._focusEventsAllowed=!1;break}}focus(){if(!t(this,a))return;const[s,y]=t(this,a);rt(this,a,null),y.addEventListener("focusin",()=>{s._focusEventsAllowed=!0},{once:!0}),y.focus()}addEditListeners(){X(this,Vt,ze).call(this),X(this,Wt,Xe).call(this)}removeEditListeners(){X(this,qt,we).call(this),X(this,ft,Ye).call(this)}copy(s){var H;if(s.preventDefault(),(H=t(this,g))==null||H.commitOrRemove(),!this.hasSelection)return;const y=[];for(const z of t(this,f)){const J=z.serialize(!0);J&&y.push(J)}y.length!==0&&s.clipboardData.setData("application/pdfjs",JSON.stringify(y))}cut(s){this.copy(s),this.delete()}paste(s){s.preventDefault();const{clipboardData:y}=s;for(const J of y.items)for(const lt of t(this,bt))if(lt.isHandlingMimeForPasting(J.type)){lt.paste(J,this.currentLayer);return}let H=y.getData("application/pdfjs");if(!H)return;try{H=JSON.parse(H)}catch(J){(0,n.warn)(`paste: "${J.message}".`);return}if(!Array.isArray(H))return;this.unselectAll();const z=this.currentLayer;try{const J=[];for(const Ft of H){const kt=z.deserialize(Ft);if(!kt)return;J.push(kt)}const lt=()=>{for(const Ft of J)X(this,Rt,Ke).call(this,Ft);X(this,At,Je).call(this,J)},_t=()=>{for(const Ft of J)Ft.remove()};this.addCommands({cmd:lt,undo:_t,mustExec:!0})}catch(J){(0,n.warn)(`paste: "${J.message}".`)}}keydown(s){var y;(y=this.getActive())!=null&&y.shouldGetKeyboardEvents()||Dt._keyboardManager.exec(this,s)}onEditingAction(s){["undo","redo","delete","selectAll"].includes(s.name)&&this[s.name]()}setEditingState(s){s?(X(this,pt,Pn).call(this),X(this,Vt,ze).call(this),X(this,Wt,Xe).call(this),X(this,K,ae).call(this,{isEditing:t(this,h)!==n.AnnotationEditorType.NONE,isEmpty:X(this,Bt,_e).call(this),hasSomethingToUndo:t(this,it).hasSomethingToUndo(),hasSomethingToRedo:t(this,it).hasSomethingToRedo(),hasSelectedEditor:!1})):(X(this,Pt,qe).call(this),X(this,qt,we).call(this),X(this,ft,Ye).call(this),X(this,K,ae).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(s){if(!t(this,bt)){rt(this,bt,s);for(const y of t(this,bt))X(this,vt,be).call(this,y.defaultPropertiesToUpdate)}}getId(){return t(this,L).getId()}get currentLayer(){return t(this,q).get(t(this,ct))}getLayer(s){return t(this,q).get(s)}get currentPageIndex(){return t(this,ct)}addLayer(s){t(this,q).set(s.pageIndex,s),t(this,i)?s.enable():s.disable()}removeLayer(s){t(this,q).delete(s.pageIndex)}updateMode(s,y=null){if(t(this,h)!==s){if(rt(this,h,s),s===n.AnnotationEditorType.NONE){this.setEditingState(!1),X(this,xt,Rn).call(this);return}this.setEditingState(!0),X(this,te,Cn).call(this),this.unselectAll();for(const H of t(this,q).values())H.updateMode(s);if(y){for(const H of t(this,$).values())if(H.annotationElementId===y){this.setSelected(H),H.enterInEditMode();break}}}}updateToolbar(s){s!==t(this,h)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:s})}updateParams(s,y){if(t(this,bt)){if(s===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(s);return}for(const H of t(this,f))H.updateParams(s,y);for(const H of t(this,bt))H.updateDefaultParams(s,y)}}enableWaiting(s=!1){if(t(this,o)!==s){rt(this,o,s);for(const y of t(this,q).values())s?y.disableClick():y.enableClick(),y.div.classList.toggle("waiting",s)}}getEditors(s){const y=[];for(const H of t(this,$).values())H.pageIndex===s&&y.push(H);return y}getEditor(s){return t(this,$).get(s)}addEditor(s){t(this,$).set(s.id,s)}removeEditor(s){var y;t(this,$).delete(s.id),this.unselect(s),(!s.annotationElementId||!t(this,V).has(s.annotationElementId))&&((y=t(this,Y))==null||y.remove(s.id))}addDeletedAnnotationElement(s){t(this,V).add(s.annotationElementId),s.deleted=!0}isDeletedAnnotationElement(s){return t(this,V).has(s)}removeDeletedAnnotationElement(s){t(this,V).delete(s.annotationElementId),s.deleted=!1}setActiveEditor(s){t(this,g)!==s&&(rt(this,g,s),s&&X(this,vt,be).call(this,s.propertiesToUpdate))}toggleSelected(s){if(t(this,f).has(s)){t(this,f).delete(s),s.unselect(),X(this,K,ae).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,f).add(s),s.select(),X(this,vt,be).call(this,s.propertiesToUpdate),X(this,K,ae).call(this,{hasSelectedEditor:!0})}setSelected(s){for(const y of t(this,f))y!==s&&y.unselect();t(this,f).clear(),t(this,f).add(s),s.select(),X(this,vt,be).call(this,s.propertiesToUpdate),X(this,K,ae).call(this,{hasSelectedEditor:!0})}isSelected(s){return t(this,f).has(s)}unselect(s){s.unselect(),t(this,f).delete(s),X(this,K,ae).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,f).size!==0}undo(){t(this,it).undo(),X(this,K,ae).call(this,{hasSomethingToUndo:t(this,it).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:X(this,Bt,_e).call(this)})}redo(){t(this,it).redo(),X(this,K,ae).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,it).hasSomethingToRedo(),isEmpty:X(this,Bt,_e).call(this)})}addCommands(s){t(this,it).add(s),X(this,K,ae).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:X(this,Bt,_e).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const s=[...t(this,f)],y=()=>{for(const z of s)z.remove()},H=()=>{for(const z of s)X(this,Rt,Ke).call(this,z)};this.addCommands({cmd:y,undo:H,mustExec:!0})}commitOrRemove(){var s;(s=t(this,g))==null||s.commitOrRemove()}hasSomethingToControl(){return t(this,g)||this.hasSelection}selectAll(){for(const s of t(this,f))s.commit();X(this,At,Je).call(this,t(this,$).values())}unselectAll(){if(t(this,g)){t(this,g).commitOrRemove();return}if(this.hasSelection){for(const s of t(this,f))s.unselect();t(this,f).clear(),X(this,K,ae).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(s,y,H=!1){if(H||this.commitOrRemove(),!this.hasSelection)return;t(this,It)[0]+=s,t(this,It)[1]+=y;const[z,J]=t(this,It),lt=[...t(this,f)],_t=1e3;t(this,mt)&&clearTimeout(t(this,mt)),rt(this,mt,setTimeout(()=>{rt(this,mt,null),t(this,It)[0]=t(this,It)[1]=0,this.addCommands({cmd:()=>{for(const Ft of lt)t(this,$).has(Ft.id)&&Ft.translateInPage(z,J)},undo:()=>{for(const Ft of lt)t(this,$).has(Ft.id)&&Ft.translateInPage(-z,-J)},mustExec:!1})},_t));for(const Ft of lt)Ft.translateInPage(s,y)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),rt(this,dt,new Map);for(const s of t(this,f))t(this,dt).set(s,{savedX:s.x,savedY:s.y,savedPageIndex:s.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,dt))return!1;this.disableUserSelect(!1);const s=t(this,dt);rt(this,dt,null);let y=!1;for(const[{x:z,y:J,pageIndex:lt},_t]of s)_t.newX=z,_t.newY=J,_t.newPageIndex=lt,y||(y=z!==_t.savedX||J!==_t.savedY||lt!==_t.savedPageIndex);if(!y)return!1;const H=(z,J,lt,_t)=>{if(t(this,$).has(z.id)){const Ft=t(this,q).get(_t);Ft?z._setParentAndPosition(Ft,J,lt):(z.pageIndex=_t,z.x=J,z.y=lt)}};return this.addCommands({cmd:()=>{for(const[z,{newX:J,newY:lt,newPageIndex:_t}]of s)H(z,J,lt,_t)},undo:()=>{for(const[z,{savedX:J,savedY:lt,savedPageIndex:_t}]of s)H(z,J,lt,_t)},mustExec:!0}),!0}dragSelectedEditors(s,y){if(t(this,dt))for(const H of t(this,dt).keys())H.drag(s,y)}rebuild(s){if(s.parent===null){const y=this.getLayer(s.pageIndex);y?(y.changeParent(s),y.addOrRebuild(s)):(this.addEditor(s),this.addToAnnotationStorage(s),s.rebuild())}else s.parent.addOrRebuild(s)}isActive(s){return t(this,g)===s}getActive(){return t(this,g)}getMode(){return t(this,h)}get imageManager(){return(0,n.shadow)(this,"imageManager",new I)}};g=new WeakMap,$=new WeakMap,q=new WeakMap,w=new WeakMap,Y=new WeakMap,it=new WeakMap,ct=new WeakMap,V=new WeakMap,dt=new WeakMap,bt=new WeakMap,St=new WeakMap,Tt=new WeakMap,L=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,h=new WeakMap,f=new WeakMap,T=new WeakMap,D=new WeakMap,W=new WeakMap,st=new WeakMap,tt=new WeakMap,ot=new WeakMap,ut=new WeakMap,gt=new WeakMap,ht=new WeakMap,Ct=new WeakMap,Ot=new WeakMap,Et=new WeakMap,It=new WeakMap,mt=new WeakMap,et=new WeakMap,nt=new WeakMap,pt=new WeakSet,Pn=function(){window.addEventListener("focus",t(this,W)),window.addEventListener("blur",t(this,D))},Pt=new WeakSet,qe=function(){window.removeEventListener("focus",t(this,W)),window.removeEventListener("blur",t(this,D))},Vt=new WeakSet,ze=function(){window.addEventListener("keydown",t(this,ut),{capture:!0})},qt=new WeakSet,we=function(){window.removeEventListener("keydown",t(this,ut),{capture:!0})},Wt=new WeakSet,Xe=function(){document.addEventListener("copy",t(this,st)),document.addEventListener("cut",t(this,tt)),document.addEventListener("paste",t(this,ot))},ft=new WeakSet,Ye=function(){document.removeEventListener("copy",t(this,st)),document.removeEventListener("cut",t(this,tt)),document.removeEventListener("paste",t(this,ot))},K=new WeakSet,ae=function(s){Object.entries(s).some(([H,z])=>t(this,Et)[H]!==z)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,Et),s)})},vt=new WeakSet,be=function(s){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:s})},te=new WeakSet,Cn=function(){if(!t(this,i)){rt(this,i,!0);for(const s of t(this,q).values())s.enable()}},xt=new WeakSet,Rn=function(){if(this.unselectAll(),t(this,i)){rt(this,i,!1);for(const s of t(this,q).values())s.disable()}},Rt=new WeakSet,Ke=function(s){const y=t(this,q).get(s.pageIndex);y?y.addOrRebuild(s):this.addEditor(s)},Bt=new WeakSet,_e=function(){if(t(this,$).size===0)return!0;if(t(this,$).size===1)for(const s of t(this,$).values())return s.isEmpty();return!1},At=new WeakSet,Je=function(s){t(this,f).clear();for(const y of s)y.isEmpty()||(t(this,f).add(y),y.select());X(this,K,ae).call(this,{hasSelectedEditor:!0})},ne(Dt,"TRANSLATE_SMALL",1),ne(Dt,"TRANSLATE_BIG",10);let B=Dt;e.AnnotationEditorUIManager=B},(_,e,M)=>{var ct,V,dt,bt,St,Tt,L,i,o,a,h,f,ue,D,fe,st,Qe,ot,Pe,gt,Ce,Ct,ye,Et,Ae;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=O,e.getColorValues=$,e.getCurrentTransform=q,e.getCurrentTransformInverse=w,e.getFilenameFromUrl=A,e.getPdfFilenameFromUrl=R,e.getRGB=g,e.getXfaPageViewport=F,e.isDataScheme=x,e.isPdfFile=p,e.isValidFetchUrl=v,e.loadScript=d,e.noContextMenu=l,e.setLayerDimensions=Y;var n=M(7),u=M(1);const E="http://www.w3.org/2000/svg",it=class it{};ne(it,"CSS",96),ne(it,"PDF",72),ne(it,"PDF_TO_CSS_UNITS",it.CSS/it.PDF);let j=it;e.PixelsPerInch=j;class at extends n.BaseFilterFactory{constructor({docId:nt,ownerDocument:pt=globalThis.document}={}){super();G(this,f);G(this,D);G(this,st);G(this,ot);G(this,gt);G(this,Ct);G(this,Et);G(this,ct,void 0);G(this,V,void 0);G(this,dt,void 0);G(this,bt,void 0);G(this,St,void 0);G(this,Tt,void 0);G(this,L,void 0);G(this,i,void 0);G(this,o,void 0);G(this,a,void 0);G(this,h,0);rt(this,dt,nt),rt(this,bt,pt)}addFilter(nt){if(!nt)return"none";let pt=t(this,f,ue).get(nt);if(pt)return pt;let wt,Pt,Ut,Vt;if(nt.length===1){const Wt=nt[0],zt=new Array(256);for(let ft=0;ft<256;ft++)zt[ft]=Wt[ft]/255;Vt=wt=Pt=Ut=zt.join(",")}else{const[Wt,zt,ft]=nt,Z=new Array(256),K=new Array(256),yt=new Array(256);for(let vt=0;vt<256;vt++)Z[vt]=Wt[vt]/255,K[vt]=zt[vt]/255,yt[vt]=ft[vt]/255;wt=Z.join(","),Pt=K.join(","),Ut=yt.join(","),Vt=`${wt}${Pt}${Ut}`}if(pt=t(this,f,ue).get(Vt),pt)return t(this,f,ue).set(nt,pt),pt;const Ht=`g_${t(this,dt)}_transfer_map_${me(this,h)._++}`,qt=`url(#${Ht})`;t(this,f,ue).set(nt,qt),t(this,f,ue).set(Vt,qt);const $t=X(this,ot,Pe).call(this,Ht);return X(this,Ct,ye).call(this,wt,Pt,Ut,$t),qt}addHCMFilter(nt,pt){var zt;const wt=`${nt}-${pt}`;if(t(this,Tt)===wt)return t(this,L);if(rt(this,Tt,wt),rt(this,L,"none"),(zt=t(this,St))==null||zt.remove(),!nt||!pt)return t(this,L);const Pt=X(this,Et,Ae).call(this,nt);nt=u.Util.makeHexColor(...Pt);const Ut=X(this,Et,Ae).call(this,pt);if(pt=u.Util.makeHexColor(...Ut),t(this,D,fe).style.color="",nt==="#000000"&&pt==="#ffffff"||nt===pt)return t(this,L);const Vt=new Array(256);for(let ft=0;ft<=255;ft++){const Z=ft/255;Vt[ft]=Z<=.03928?Z/12.92:((Z+.055)/1.055)**2.4}const Ht=Vt.join(","),qt=`g_${t(this,dt)}_hcm_filter`,$t=rt(this,i,X(this,ot,Pe).call(this,qt));X(this,Ct,ye).call(this,Ht,Ht,Ht,$t),X(this,st,Qe).call(this,$t);const Wt=(ft,Z)=>{const K=Pt[ft]/255,yt=Ut[ft]/255,vt=new Array(Z+1);for(let ee=0;ee<=Z;ee++)vt[ee]=K+ee/Z*(yt-K);return vt.join(",")};return X(this,Ct,ye).call(this,Wt(0,5),Wt(1,5),Wt(2,5),$t),rt(this,L,`url(#${qt})`),t(this,L)}addHighlightHCMFilter(nt,pt,wt,Pt){var yt;const Ut=`${nt}-${pt}-${wt}-${Pt}`;if(t(this,o)===Ut)return t(this,a);if(rt(this,o,Ut),rt(this,a,"none"),(yt=t(this,i))==null||yt.remove(),!nt||!pt)return t(this,a);const[Vt,Ht]=[nt,pt].map(X(this,Et,Ae).bind(this));let qt=Math.round(.2126*Vt[0]+.7152*Vt[1]+.0722*Vt[2]),$t=Math.round(.2126*Ht[0]+.7152*Ht[1]+.0722*Ht[2]),[Wt,zt]=[wt,Pt].map(X(this,Et,Ae).bind(this));$t<qt&&([qt,$t,Wt,zt]=[$t,qt,zt,Wt]),t(this,D,fe).style.color="";const ft=(vt,ee,te)=>{const Q=new Array(256),xt=($t-qt)/te,Nt=vt/255,Rt=(ee-vt)/(255*te);let jt=0;for(let Bt=0;Bt<=te;Bt++){const Qt=Math.round(qt+Bt*xt),At=Nt+Bt*Rt;for(let Kt=jt;Kt<=Qt;Kt++)Q[Kt]=At;jt=Qt+1}for(let Bt=jt;Bt<256;Bt++)Q[Bt]=Q[jt-1];return Q.join(",")},Z=`g_${t(this,dt)}_hcm_highlight_filter`,K=rt(this,i,X(this,ot,Pe).call(this,Z));return X(this,st,Qe).call(this,K),X(this,Ct,ye).call(this,ft(Wt[0],zt[0],5),ft(Wt[1],zt[1],5),ft(Wt[2],zt[2],5),K),rt(this,a,`url(#${Z})`),t(this,a)}destroy(nt=!1){nt&&(t(this,L)||t(this,a))||(t(this,V)&&(t(this,V).parentNode.parentNode.remove(),rt(this,V,null)),t(this,ct)&&(t(this,ct).clear(),rt(this,ct,null)),rt(this,h,0))}}ct=new WeakMap,V=new WeakMap,dt=new WeakMap,bt=new WeakMap,St=new WeakMap,Tt=new WeakMap,L=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,h=new WeakMap,f=new WeakSet,ue=function(){return t(this,ct)||rt(this,ct,new Map)},D=new WeakSet,fe=function(){if(!t(this,V)){const nt=t(this,bt).createElement("div"),{style:pt}=nt;pt.visibility="hidden",pt.contain="strict",pt.width=pt.height=0,pt.position="absolute",pt.top=pt.left=0,pt.zIndex=-1;const wt=t(this,bt).createElementNS(E,"svg");wt.setAttribute("width",0),wt.setAttribute("height",0),rt(this,V,t(this,bt).createElementNS(E,"defs")),nt.append(wt),wt.append(t(this,V)),t(this,bt).body.append(nt)}return t(this,V)},st=new WeakSet,Qe=function(nt){const pt=t(this,bt).createElementNS(E,"feColorMatrix");pt.setAttribute("type","matrix"),pt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),nt.append(pt)},ot=new WeakSet,Pe=function(nt){const pt=t(this,bt).createElementNS(E,"filter");return pt.setAttribute("color-interpolation-filters","sRGB"),pt.setAttribute("id",nt),t(this,D,fe).append(pt),pt},gt=new WeakSet,Ce=function(nt,pt,wt){const Pt=t(this,bt).createElementNS(E,pt);Pt.setAttribute("type","discrete"),Pt.setAttribute("tableValues",wt),nt.append(Pt)},Ct=new WeakSet,ye=function(nt,pt,wt,Pt){const Ut=t(this,bt).createElementNS(E,"feComponentTransfer");Pt.append(Ut),X(this,gt,Ce).call(this,Ut,"feFuncR",nt),X(this,gt,Ce).call(this,Ut,"feFuncG",pt),X(this,gt,Ce).call(this,Ut,"feFuncB",wt)},Et=new WeakSet,Ae=function(nt){return t(this,D,fe).style.color=nt,g(getComputedStyle(t(this,D,fe)).getPropertyValue("color"))},e.DOMFilterFactory=at;class I extends n.BaseCanvasFactory{constructor({ownerDocument:et=globalThis.document}={}){super(),this._document=et}_createCanvas(et,nt){const pt=this._document.createElement("canvas");return pt.width=et,pt.height=nt,pt}}e.DOMCanvasFactory=I;async function P(mt,et=!1){if(v(mt,document.baseURI)){const nt=await fetch(mt);if(!nt.ok)throw new Error(nt.statusText);return et?new Uint8Array(await nt.arrayBuffer()):(0,u.stringToBytes)(await nt.text())}return new Promise((nt,pt)=>{const wt=new XMLHttpRequest;wt.open("GET",mt,!0),et&&(wt.responseType="arraybuffer"),wt.onreadystatechange=()=>{if(wt.readyState===XMLHttpRequest.DONE){if(wt.status===200||wt.status===0){let Pt;if(et&&wt.response?Pt=new Uint8Array(wt.response):!et&&wt.responseText&&(Pt=(0,u.stringToBytes)(wt.responseText)),Pt){nt(Pt);return}}pt(new Error(wt.statusText))}},wt.send(null)})}class m extends n.BaseCMapReaderFactory{_fetchData(et,nt){return P(et,this.isCompressed).then(pt=>({cMapData:pt,compressionType:nt}))}}e.DOMCMapReaderFactory=m;class N extends n.BaseStandardFontDataFactory{_fetchData(et){return P(et,!0)}}e.DOMStandardFontDataFactory=N;class B extends n.BaseSVGFactory{_createSVG(et){return document.createElementNS(E,et)}}e.DOMSVGFactory=B;class k{constructor({viewBox:et,scale:nt,rotation:pt,offsetX:wt=0,offsetY:Pt=0,dontFlip:Ut=!1}){this.viewBox=et,this.scale=nt,this.rotation=pt,this.offsetX=wt,this.offsetY=Pt;const Vt=(et[2]+et[0])/2,Ht=(et[3]+et[1])/2;let qt,$t,Wt,zt;switch(pt%=360,pt<0&&(pt+=360),pt){case 180:qt=-1,$t=0,Wt=0,zt=1;break;case 90:qt=0,$t=1,Wt=1,zt=0;break;case 270:qt=0,$t=-1,Wt=-1,zt=0;break;case 0:qt=1,$t=0,Wt=0,zt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ut&&(Wt=-Wt,zt=-zt);let ft,Z,K,yt;qt===0?(ft=Math.abs(Ht-et[1])*nt+wt,Z=Math.abs(Vt-et[0])*nt+Pt,K=(et[3]-et[1])*nt,yt=(et[2]-et[0])*nt):(ft=Math.abs(Vt-et[0])*nt+wt,Z=Math.abs(Ht-et[1])*nt+Pt,K=(et[2]-et[0])*nt,yt=(et[3]-et[1])*nt),this.transform=[qt*nt,$t*nt,Wt*nt,zt*nt,ft-qt*nt*Vt-Wt*nt*Ht,Z-$t*nt*Vt-zt*nt*Ht],this.width=K,this.height=yt}get rawDims(){const{viewBox:et}=this;return(0,u.shadow)(this,"rawDims",{pageWidth:et[2]-et[0],pageHeight:et[3]-et[1],pageX:et[0],pageY:et[1]})}clone({scale:et=this.scale,rotation:nt=this.rotation,offsetX:pt=this.offsetX,offsetY:wt=this.offsetY,dontFlip:Pt=!1}={}){return new k({viewBox:this.viewBox.slice(),scale:et,rotation:nt,offsetX:pt,offsetY:wt,dontFlip:Pt})}convertToViewportPoint(et,nt){return u.Util.applyTransform([et,nt],this.transform)}convertToViewportRectangle(et){const nt=u.Util.applyTransform([et[0],et[1]],this.transform),pt=u.Util.applyTransform([et[2],et[3]],this.transform);return[nt[0],nt[1],pt[0],pt[1]]}convertToPdfPoint(et,nt){return u.Util.applyInverseTransform([et,nt],this.transform)}}e.PageViewport=k;class S extends u.BaseException{constructor(et,nt=0){super(et,"RenderingCancelledException"),this.extraDelay=nt}}e.RenderingCancelledException=S;function x(mt){const et=mt.length;let nt=0;for(;nt<et&&mt[nt].trim()==="";)nt++;return mt.substring(nt,nt+5).toLowerCase()==="data:"}function p(mt){return typeof mt=="string"&&/\.pdf$/i.test(mt)}function A(mt,et=!1){return et||([mt]=mt.split(/[#?]/,1)),mt.substring(mt.lastIndexOf("/")+1)}function R(mt,et="document.pdf"){if(typeof mt!="string")return et;if(x(mt))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),et;const nt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,pt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,wt=nt.exec(mt);let Pt=pt.exec(wt[1])||pt.exec(wt[2])||pt.exec(wt[3]);if(Pt&&(Pt=Pt[0],Pt.includes("%")))try{Pt=pt.exec(decodeURIComponent(Pt))[0]}catch{}return Pt||et}class C{constructor(){ne(this,"started",Object.create(null));ne(this,"times",[])}time(et){et in this.started&&(0,u.warn)(`Timer is already running for ${et}`),this.started[et]=Date.now()}timeEnd(et){et in this.started||(0,u.warn)(`Timer has not been started for ${et}`),this.times.push({name:et,start:this.started[et],end:Date.now()}),delete this.started[et]}toString(){const et=[];let nt=0;for(const{name:pt}of this.times)nt=Math.max(pt.length,nt);for(const{name:pt,start:wt,end:Pt}of this.times)et.push(`${pt.padEnd(nt)} ${Pt-wt}ms
`);return et.join("")}}e.StatTimer=C;function v(mt,et){try{const{protocol:nt}=et?new URL(mt,et):new URL(mt);return nt==="http:"||nt==="https:"}catch{return!1}}function l(mt){mt.preventDefault()}function d(mt,et=!1){return new Promise((nt,pt)=>{const wt=document.createElement("script");wt.src=mt,wt.onload=function(Pt){et&&wt.remove(),nt(Pt)},wt.onerror=function(){pt(new Error(`Cannot load script at: ${wt.src}`))},(document.head||document.documentElement).append(wt)})}function O(mt){console.log("Deprecated API usage: "+mt)}let b;class c{static toDateObject(et){if(!et||typeof et!="string")return null;b||(b=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const nt=b.exec(et);if(!nt)return null;const pt=parseInt(nt[1],10);let wt=parseInt(nt[2],10);wt=wt>=1&&wt<=12?wt-1:0;let Pt=parseInt(nt[3],10);Pt=Pt>=1&&Pt<=31?Pt:1;let Ut=parseInt(nt[4],10);Ut=Ut>=0&&Ut<=23?Ut:0;let Vt=parseInt(nt[5],10);Vt=Vt>=0&&Vt<=59?Vt:0;let Ht=parseInt(nt[6],10);Ht=Ht>=0&&Ht<=59?Ht:0;const qt=nt[7]||"Z";let $t=parseInt(nt[8],10);$t=$t>=0&&$t<=23?$t:0;let Wt=parseInt(nt[9],10)||0;return Wt=Wt>=0&&Wt<=59?Wt:0,qt==="-"?(Ut+=$t,Vt+=Wt):qt==="+"&&(Ut-=$t,Vt-=Wt),new Date(Date.UTC(pt,wt,Pt,Ut,Vt,Ht))}}e.PDFDateString=c;function F(mt,{scale:et=1,rotation:nt=0}){const{width:pt,height:wt}=mt.attributes.style,Pt=[0,0,parseInt(pt),parseInt(wt)];return new k({viewBox:Pt,scale:et,rotation:nt})}function g(mt){if(mt.startsWith("#")){const et=parseInt(mt.slice(1),16);return[(et&16711680)>>16,(et&65280)>>8,et&255]}return mt.startsWith("rgb(")?mt.slice(4,-1).split(",").map(et=>parseInt(et)):mt.startsWith("rgba(")?mt.slice(5,-1).split(",").map(et=>parseInt(et)).slice(0,3):((0,u.warn)(`Not a valid color format: "${mt}"`),[0,0,0])}function $(mt){const et=document.createElement("span");et.style.visibility="hidden",document.body.append(et);for(const nt of mt.keys()){et.style.color=nt;const pt=window.getComputedStyle(et).color;mt.set(nt,g(pt))}et.remove()}function q(mt){const{a:et,b:nt,c:pt,d:wt,e:Pt,f:Ut}=mt.getTransform();return[et,nt,pt,wt,Pt,Ut]}function w(mt){const{a:et,b:nt,c:pt,d:wt,e:Pt,f:Ut}=mt.getTransform().invertSelf();return[et,nt,pt,wt,Pt,Ut]}function Y(mt,et,nt=!1,pt=!0){if(et instanceof k){const{pageWidth:wt,pageHeight:Pt}=et.rawDims,{style:Ut}=mt,Vt=u.FeatureTest.isCSSRoundSupported,Ht=`var(--scale-factor) * ${wt}px`,qt=`var(--scale-factor) * ${Pt}px`,$t=Vt?`round(${Ht}, 1px)`:`calc(${Ht})`,Wt=Vt?`round(${qt}, 1px)`:`calc(${qt})`;!nt||et.rotation%180===0?(Ut.width=$t,Ut.height=Wt):(Ut.width=Wt,Ut.height=$t)}pt&&mt.setAttribute("data-main-rotation",et.rotation)}},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=M(1);class u{constructor(){this.constructor===u&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(m){return"none"}addHCMFilter(m,N){return"none"}addHighlightHCMFilter(m,N,B,k){return"none"}destroy(m=!1){}}e.BaseFilterFactory=u;class E{constructor(){this.constructor===E&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(m,N){if(m<=0||N<=0)throw new Error("Invalid canvas size");const B=this._createCanvas(m,N);return{canvas:B,context:B.getContext("2d")}}reset(m,N,B){if(!m.canvas)throw new Error("Canvas is not specified");if(N<=0||B<=0)throw new Error("Invalid canvas size");m.canvas.width=N,m.canvas.height=B}destroy(m){if(!m.canvas)throw new Error("Canvas is not specified");m.canvas.width=0,m.canvas.height=0,m.canvas=null,m.context=null}_createCanvas(m,N){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=E;class j{constructor({baseUrl:m=null,isCompressed:N=!0}){this.constructor===j&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=m,this.isCompressed=N}async fetch({name:m}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!m)throw new Error("CMap name must be specified.");const N=this.baseUrl+m+(this.isCompressed?".bcmap":""),B=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(N,B).catch(k=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${N}`)})}_fetchData(m,N){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=j;class at{constructor({baseUrl:m=null}){this.constructor===at&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=m}async fetch({filename:m}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!m)throw new Error("Font filename must be specified.");const N=`${this.baseUrl}${m}`;return this._fetchData(N).catch(B=>{throw new Error(`Unable to load font data at: ${N}`)})}_fetchData(m){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=at;class I{constructor(){this.constructor===I&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(m,N,B=!1){if(m<=0||N<=0)throw new Error("Invalid SVG dimensions");const k=this._createSVG("svg:svg");return k.setAttribute("version","1.1"),B||(k.setAttribute("width",`${m}px`),k.setAttribute("height",`${N}px`)),k.setAttribute("preserveAspectRatio","none"),k.setAttribute("viewBox",`0 0 ${m} ${N}`),k}createElement(m){if(typeof m!="string")throw new Error("Invalid SVG element type");return this._createSVG(m)}_createSVG(m){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=I},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=M(1);const u=3285377520,E=4294901760,j=65535;class at{constructor(P){this.h1=P?P&4294967295:u,this.h2=P?P&4294967295:u}update(P){let m,N;if(typeof P=="string"){m=new Uint8Array(P.length*2),N=0;for(let O=0,b=P.length;O<b;O++){const c=P.charCodeAt(O);c<=255?m[N++]=c:(m[N++]=c>>>8,m[N++]=c&255)}}else if((0,n.isArrayBuffer)(P))m=P.slice(),N=m.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const B=N>>2,k=N-B*4,S=new Uint32Array(m.buffer,0,B);let x=0,p=0,A=this.h1,R=this.h2;const C=3432918353,v=461845907,l=C&j,d=v&j;for(let O=0;O<B;O++)O&1?(x=S[O],x=x*C&E|x*l&j,x=x<<15|x>>>17,x=x*v&E|x*d&j,A^=x,A=A<<13|A>>>19,A=A*5+3864292196):(p=S[O],p=p*C&E|p*l&j,p=p<<15|p>>>17,p=p*v&E|p*d&j,R^=p,R=R<<13|R>>>19,R=R*5+3864292196);switch(x=0,k){case 3:x^=m[B*4+2]<<16;case 2:x^=m[B*4+1]<<8;case 1:x^=m[B*4],x=x*C&E|x*l&j,x=x<<15|x>>>17,x=x*v&E|x*d&j,B&1?A^=x:R^=x}this.h1=A,this.h2=R}hexdigest(){let P=this.h1,m=this.h2;return P^=m>>>1,P=P*3981806797&E|P*36045&j,m=m*4283543511&E|((m<<16|P>>>16)*2950163797&E)>>>16,P^=m>>>1,P=P*444984403&E|P*60499&j,m=m*3301882366&E|((m<<16|P>>>16)*3120437893&E)>>>16,P^=m>>>1,(P>>>0).toString(16).padStart(8,"0")+(m>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=at},(_,e,M)=>{var j;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=M(1);class u{constructor({ownerDocument:I=globalThis.document,styleElement:P=null}){G(this,j,new Set);this._document=I,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(I){this.nativeFontFaces.add(I),this._document.fonts.add(I)}removeNativeFontFace(I){this.nativeFontFaces.delete(I),this._document.fonts.delete(I)}insertRule(I){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const P=this.styleElement.sheet;P.insertRule(I,P.cssRules.length)}clear(){for(const I of this.nativeFontFaces)this._document.fonts.delete(I);this.nativeFontFaces.clear(),t(this,j).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(I){if(!(!I||t(this,j).has(I.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:P,src:m,style:N}=I,B=new FontFace(P,m,N);this.addNativeFontFace(B);try{await B.load(),t(this,j).add(P)}catch{(0,n.warn)(`Cannot load system font: ${I.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(B)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(I){if(I.attached||I.missingFile&&!I.systemFontInfo)return;if(I.attached=!0,I.systemFontInfo){await this.loadSystemFont(I.systemFontInfo);return}if(this.isFontLoadingAPISupported){const m=I.createNativeFontFace();if(m){this.addNativeFontFace(m);try{await m.loaded}catch(N){throw(0,n.warn)(`Failed to load font '${m.family}': '${N}'.`),I.disableFontFace=!0,N}}return}const P=I.createFontFaceRule();if(P){if(this.insertRule(P),this.isSyncFontLoadingSupported)return;await new Promise(m=>{const N=this._queueLoadingCallback(m);this._prepareFontLoadEvent(I,N)})}}get isFontLoadingAPISupported(){var P;const I=!!((P=this._document)!=null&&P.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",I)}get isSyncFontLoadingSupported(){let I=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(I=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",I)}_queueLoadingCallback(I){function P(){for((0,n.assert)(!N.done,"completeRequest() cannot be called twice."),N.done=!0;m.length>0&&m[0].done;){const B=m.shift();setTimeout(B.callback,0)}}const{loadingRequests:m}=this,N={done:!1,complete:P,callback:I};return m.push(N),N}get _loadTestFont(){const I=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",I)}_prepareFontLoadEvent(I,P){function m(g,$){return g.charCodeAt($)<<24|g.charCodeAt($+1)<<16|g.charCodeAt($+2)<<8|g.charCodeAt($+3)&255}function N(g,$,q,w){const Y=g.substring(0,$),it=g.substring($+q);return Y+w+it}let B,k;const S=this._document.createElement("canvas");S.width=1,S.height=1;const x=S.getContext("2d");let p=0;function A(g,$){if(++p>30){(0,n.warn)("Load test font never loaded."),$();return}if(x.font="30px "+g,x.fillText(".",0,20),x.getImageData(0,0,1,1).data[3]>0){$();return}setTimeout(A.bind(null,g,$))}const R=`lt${Date.now()}${this.loadTestFontId++}`;let C=this._loadTestFont;C=N(C,976,R.length,R);const l=16,d=1482184792;let O=m(C,l);for(B=0,k=R.length-3;B<k;B+=4)O=O-d+m(R,B)|0;B<R.length&&(O=O-d+m(R+"XXX",B)|0),C=N(C,l,4,(0,n.string32)(O));const b=`url(data:font/opentype;base64,${btoa(C)});`,c=`@font-face {font-family:"${R}";src:${b}}`;this.insertRule(c);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const g of[I.loadedName,R]){const $=this._document.createElement("span");$.textContent="Hi",$.style.fontFamily=g,F.append($)}this._document.body.append(F),A(R,()=>{F.remove(),P.complete()})}}j=new WeakMap,e.FontLoader=u;class E{constructor(I,{isEvalSupported:P=!0,disableFontFace:m=!1,ignoreErrors:N=!1,inspectFont:B=null}){this.compiledGlyphs=Object.create(null);for(const k in I)this[k]=I[k];this.isEvalSupported=P!==!1,this.disableFontFace=m===!0,this.ignoreErrors=N===!0,this._inspectFont=B}createNativeFontFace(){var P;if(!this.data||this.disableFontFace)return null;let I;if(!this.cssFontInfo)I=new FontFace(this.loadedName,this.data,{});else{const m={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(m.style=`oblique ${this.cssFontInfo.italicAngle}deg`),I=new FontFace(this.cssFontInfo.fontFamily,this.data,m)}return(P=this._inspectFont)==null||P.call(this,this),I}createFontFaceRule(){var N;if(!this.data||this.disableFontFace)return null;const I=(0,n.bytesToString)(this.data),P=`url(data:${this.mimetype};base64,${btoa(I)});`;let m;if(!this.cssFontInfo)m=`@font-face {font-family:"${this.loadedName}";src:${P}}`;else{let B=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(B+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),m=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${B}src:${P}}`}return(N=this._inspectFont)==null||N.call(this,this,P),m}getPathGenerator(I,P){if(this.compiledGlyphs[P]!==void 0)return this.compiledGlyphs[P];let m;try{m=I.get(this.loadedName+"_path_"+P)}catch(N){if(!this.ignoreErrors)throw N;return(0,n.warn)(`getPathGenerator - ignoring character: "${N}".`),this.compiledGlyphs[P]=function(B,k){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const N=[];for(const B of m){const k=B.args!==void 0?B.args.join(","):"";N.push("c.",B.cmd,"(",k,`);
`)}return this.compiledGlyphs[P]=new Function("c","size",N.join(""))}return this.compiledGlyphs[P]=function(N,B){for(const k of m)k.cmd==="scale"&&(k.args=[B,-B]),N[k.cmd].apply(N,k.args)}}}e.FontFaceObject=E},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=M(7);M(1);const u=function(P){return new Promise((m,N)=>{require$$5.readFile(P,(k,S)=>{if(k||!S){N(new Error(k));return}m(new Uint8Array(S))})})};class E extends n.BaseFilterFactory{}e.NodeFilterFactory=E;class j extends n.BaseCanvasFactory{_createCanvas(m,N){return require$$5.createCanvas(m,N)}}e.NodeCanvasFactory=j;class at extends n.BaseCMapReaderFactory{_fetchData(m,N){return u(m).then(B=>({cMapData:B,compressionType:N}))}}e.NodeCMapReaderFactory=at;class I extends n.BaseStandardFontDataFactory{_fetchData(m){return u(m)}}e.NodeStandardFontDataFactory=I},(_,e,M)=>{var V,Ze,bt,tn;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=M(1),u=M(6),E=M(12),j=M(13);const at=16,I=100,P=4096,m=15,N=10,B=1e3,k=16;function S(L,i){if(L._removeMirroring)throw new Error("Context is already forwarding operations.");L.__originalSave=L.save,L.__originalRestore=L.restore,L.__originalRotate=L.rotate,L.__originalScale=L.scale,L.__originalTranslate=L.translate,L.__originalTransform=L.transform,L.__originalSetTransform=L.setTransform,L.__originalResetTransform=L.resetTransform,L.__originalClip=L.clip,L.__originalMoveTo=L.moveTo,L.__originalLineTo=L.lineTo,L.__originalBezierCurveTo=L.bezierCurveTo,L.__originalRect=L.rect,L.__originalClosePath=L.closePath,L.__originalBeginPath=L.beginPath,L._removeMirroring=()=>{L.save=L.__originalSave,L.restore=L.__originalRestore,L.rotate=L.__originalRotate,L.scale=L.__originalScale,L.translate=L.__originalTranslate,L.transform=L.__originalTransform,L.setTransform=L.__originalSetTransform,L.resetTransform=L.__originalResetTransform,L.clip=L.__originalClip,L.moveTo=L.__originalMoveTo,L.lineTo=L.__originalLineTo,L.bezierCurveTo=L.__originalBezierCurveTo,L.rect=L.__originalRect,L.closePath=L.__originalClosePath,L.beginPath=L.__originalBeginPath,delete L._removeMirroring},L.save=function(){i.save(),this.__originalSave()},L.restore=function(){i.restore(),this.__originalRestore()},L.translate=function(a,h){i.translate(a,h),this.__originalTranslate(a,h)},L.scale=function(a,h){i.scale(a,h),this.__originalScale(a,h)},L.transform=function(a,h,f,T,D,W){i.transform(a,h,f,T,D,W),this.__originalTransform(a,h,f,T,D,W)},L.setTransform=function(a,h,f,T,D,W){i.setTransform(a,h,f,T,D,W),this.__originalSetTransform(a,h,f,T,D,W)},L.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},L.rotate=function(a){i.rotate(a),this.__originalRotate(a)},L.clip=function(a){i.clip(a),this.__originalClip(a)},L.moveTo=function(o,a){i.moveTo(o,a),this.__originalMoveTo(o,a)},L.lineTo=function(o,a){i.lineTo(o,a),this.__originalLineTo(o,a)},L.bezierCurveTo=function(o,a,h,f,T,D){i.bezierCurveTo(o,a,h,f,T,D),this.__originalBezierCurveTo(o,a,h,f,T,D)},L.rect=function(o,a,h,f){i.rect(o,a,h,f),this.__originalRect(o,a,h,f)},L.closePath=function(){i.closePath(),this.__originalClosePath()},L.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}class x{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,o,a){let h;return this.cache[i]!==void 0?(h=this.cache[i],this.canvasFactory.reset(h,o,a)):(h=this.canvasFactory.create(o,a),this.cache[i]=h),h}delete(i){delete this.cache[i]}clear(){for(const i in this.cache){const o=this.cache[i];this.canvasFactory.destroy(o),delete this.cache[i]}}}function p(L,i,o,a,h,f,T,D,W,st){const[tt,ot,ut,gt,ht,Ct]=(0,u.getCurrentTransform)(L);if(ot===0&&ut===0){const It=T*tt+ht,mt=Math.round(It),et=D*gt+Ct,nt=Math.round(et),pt=(T+W)*tt+ht,wt=Math.abs(Math.round(pt)-mt)||1,Pt=(D+st)*gt+Ct,Ut=Math.abs(Math.round(Pt)-nt)||1;return L.setTransform(Math.sign(tt),0,0,Math.sign(gt),mt,nt),L.drawImage(i,o,a,h,f,0,0,wt,Ut),L.setTransform(tt,ot,ut,gt,ht,Ct),[wt,Ut]}if(tt===0&&gt===0){const It=D*ut+ht,mt=Math.round(It),et=T*ot+Ct,nt=Math.round(et),pt=(D+st)*ut+ht,wt=Math.abs(Math.round(pt)-mt)||1,Pt=(T+W)*ot+Ct,Ut=Math.abs(Math.round(Pt)-nt)||1;return L.setTransform(0,Math.sign(ot),Math.sign(ut),0,mt,nt),L.drawImage(i,o,a,h,f,0,0,Ut,wt),L.setTransform(tt,ot,ut,gt,ht,Ct),[Ut,wt]}L.drawImage(i,o,a,h,f,T,D,W,st);const Ot=Math.hypot(tt,ot),Et=Math.hypot(ut,gt);return[Ot*W,Et*st]}function A(L){const{width:i,height:o}=L;if(i>B||o>B)return null;const a=1e3,h=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),f=i+1;let T=new Uint8Array(f*(o+1)),D,W,st;const tt=i+7&-8;let ot=new Uint8Array(tt*o),ut=0;for(const Et of L.data){let It=128;for(;It>0;)ot[ut++]=Et&It?0:255,It>>=1}let gt=0;for(ut=0,ot[ut]!==0&&(T[0]=1,++gt),W=1;W<i;W++)ot[ut]!==ot[ut+1]&&(T[W]=ot[ut]?2:1,++gt),ut++;for(ot[ut]!==0&&(T[W]=2,++gt),D=1;D<o;D++){ut=D*tt,st=D*f,ot[ut-tt]!==ot[ut]&&(T[st]=ot[ut]?1:8,++gt);let Et=(ot[ut]?4:0)+(ot[ut-tt]?8:0);for(W=1;W<i;W++)Et=(Et>>2)+(ot[ut+1]?4:0)+(ot[ut-tt+1]?8:0),h[Et]&&(T[st+W]=h[Et],++gt),ut++;if(ot[ut-tt]!==ot[ut]&&(T[st+W]=ot[ut]?2:4,++gt),gt>a)return null}for(ut=tt*(o-1),st=D*f,ot[ut]!==0&&(T[st]=8,++gt),W=1;W<i;W++)ot[ut]!==ot[ut+1]&&(T[st+W]=ot[ut]?4:8,++gt),ut++;if(ot[ut]!==0&&(T[st+W]=4,++gt),gt>a)return null;const ht=new Int32Array([0,f,-1,0,-f,0,0,0,1]),Ct=new Path2D;for(D=0;gt&&D<=o;D++){let Et=D*f;const It=Et+i;for(;Et<It&&!T[Et];)Et++;if(Et===It)continue;Ct.moveTo(Et%f,D);const mt=Et;let et=T[Et];do{const nt=ht[et];do Et+=nt;while(!T[Et]);const pt=T[Et];pt!==5&&pt!==10?(et=pt,T[Et]=0):(et=pt&51*et>>4,T[Et]&=et>>2|et<<2),Ct.lineTo(Et%f,Et/f|0),T[Et]||--gt}while(mt!==Et);--D}return ot=null,T=null,function(Et){Et.save(),Et.scale(1/i,-1/o),Et.translate(0,-o),Et.fill(Ct),Et.beginPath(),Et.restore()}}class R{constructor(i,o){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,i,o])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,o){this.x=i,this.y=o}updatePathMinMax(i,o,a){[o,a]=n.Util.applyTransform([o,a],i),this.minX=Math.min(this.minX,o),this.minY=Math.min(this.minY,a),this.maxX=Math.max(this.maxX,o),this.maxY=Math.max(this.maxY,a)}updateRectMinMax(i,o){const a=n.Util.applyTransform(o,i),h=n.Util.applyTransform(o.slice(2),i);this.minX=Math.min(this.minX,a[0],h[0]),this.minY=Math.min(this.minY,a[1],h[1]),this.maxX=Math.max(this.maxX,a[0],h[0]),this.maxY=Math.max(this.maxY,a[1],h[1])}updateScalingPathMinMax(i,o){n.Util.scaleMinMax(i,o),this.minX=Math.min(this.minX,o[0]),this.maxX=Math.max(this.maxX,o[1]),this.minY=Math.min(this.minY,o[2]),this.maxY=Math.max(this.maxY,o[3])}updateCurvePathMinMax(i,o,a,h,f,T,D,W,st,tt){const ot=n.Util.bezierBoundingBox(o,a,h,f,T,D,W,st);if(tt){tt[0]=Math.min(tt[0],ot[0],ot[2]),tt[1]=Math.max(tt[1],ot[0],ot[2]),tt[2]=Math.min(tt[2],ot[1],ot[3]),tt[3]=Math.max(tt[3],ot[1],ot[3]);return}this.updateRectMinMax(i,ot)}getPathBoundingBox(i=E.PathType.FILL,o=null){const a=[this.minX,this.minY,this.maxX,this.maxY];if(i===E.PathType.STROKE){o||(0,n.unreachable)("Stroke bounding box must include transform.");const h=n.Util.singularValueDecompose2dScale(o),f=h[0]*this.lineWidth/2,T=h[1]*this.lineWidth/2;a[0]-=f,a[1]-=T,a[2]+=f,a[3]+=T}return a}updateClipFromPath(){const i=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=E.PathType.FILL,o=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(i,o))}}function C(L,i){if(typeof ImageData<"u"&&i instanceof ImageData){L.putImageData(i,0,0);return}const o=i.height,a=i.width,h=o%k,f=(o-h)/k,T=h===0?f:f+1,D=L.createImageData(a,k);let W=0,st;const tt=i.data,ot=D.data;let ut,gt,ht,Ct;if(i.kind===n.ImageKind.GRAYSCALE_1BPP){const Ot=tt.byteLength,Et=new Uint32Array(ot.buffer,0,ot.byteLength>>2),It=Et.length,mt=a+7>>3,et=4294967295,nt=n.FeatureTest.isLittleEndian?4278190080:255;for(ut=0;ut<T;ut++){for(ht=ut<f?k:h,st=0,gt=0;gt<ht;gt++){const pt=Ot-W;let wt=0;const Pt=pt>mt?a:pt*8-7,Ut=Pt&-8;let Vt=0,Ht=0;for(;wt<Ut;wt+=8)Ht=tt[W++],Et[st++]=Ht&128?et:nt,Et[st++]=Ht&64?et:nt,Et[st++]=Ht&32?et:nt,Et[st++]=Ht&16?et:nt,Et[st++]=Ht&8?et:nt,Et[st++]=Ht&4?et:nt,Et[st++]=Ht&2?et:nt,Et[st++]=Ht&1?et:nt;for(;wt<Pt;wt++)Vt===0&&(Ht=tt[W++],Vt=128),Et[st++]=Ht&Vt?et:nt,Vt>>=1}for(;st<It;)Et[st++]=0;L.putImageData(D,0,ut*k)}}else if(i.kind===n.ImageKind.RGBA_32BPP){for(gt=0,Ct=a*k*4,ut=0;ut<f;ut++)ot.set(tt.subarray(W,W+Ct)),W+=Ct,L.putImageData(D,0,gt),gt+=k;ut<T&&(Ct=a*h*4,ot.set(tt.subarray(W,W+Ct)),L.putImageData(D,0,gt))}else if(i.kind===n.ImageKind.RGB_24BPP)for(ht=k,Ct=a*ht,ut=0;ut<T;ut++){for(ut>=f&&(ht=h,Ct=a*ht),st=0,gt=Ct;gt--;)ot[st++]=tt[W++],ot[st++]=tt[W++],ot[st++]=tt[W++],ot[st++]=255;L.putImageData(D,0,ut*k)}else throw new Error(`bad image kind: ${i.kind}`)}function v(L,i){if(i.bitmap){L.drawImage(i.bitmap,0,0);return}const o=i.height,a=i.width,h=o%k,f=(o-h)/k,T=h===0?f:f+1,D=L.createImageData(a,k);let W=0;const st=i.data,tt=D.data;for(let ot=0;ot<T;ot++){const ut=ot<f?k:h;({srcPos:W}=(0,j.convertBlackAndWhiteToRGBA)({src:st,srcPos:W,dest:tt,width:a,height:ut,nonBlackColor:0})),L.putImageData(D,0,ot*k)}}function l(L,i){const o=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const a of o)L[a]!==void 0&&(i[a]=L[a]);L.setLineDash!==void 0&&(i.setLineDash(L.getLineDash()),i.lineDashOffset=L.lineDashOffset)}function d(L){if(L.strokeStyle=L.fillStyle="#000000",L.fillRule="nonzero",L.globalAlpha=1,L.lineWidth=1,L.lineCap="butt",L.lineJoin="miter",L.miterLimit=10,L.globalCompositeOperation="source-over",L.font="10px sans-serif",L.setLineDash!==void 0&&(L.setLineDash([]),L.lineDashOffset=0),!n.isNodeJS){const{filter:i}=L;i!=="none"&&i!==""&&(L.filter="none")}}function O(L,i,o,a){const h=L.length;for(let f=3;f<h;f+=4){const T=L[f];if(T===0)L[f-3]=i,L[f-2]=o,L[f-1]=a;else if(T<255){const D=255-T;L[f-3]=L[f-3]*T+i*D>>8,L[f-2]=L[f-2]*T+o*D>>8,L[f-1]=L[f-1]*T+a*D>>8}}}function b(L,i,o){const a=L.length,h=1/255;for(let f=3;f<a;f+=4){const T=o?o[L[f]]:L[f];i[f]=i[f]*T*h|0}}function c(L,i,o){const a=L.length;for(let h=3;h<a;h+=4){const f=L[h-3]*77+L[h-2]*152+L[h-1]*28;i[h]=o?i[h]*o[f>>8]>>8:i[h]*f>>16}}function F(L,i,o,a,h,f,T,D,W,st,tt){const ot=!!f,ut=ot?f[0]:0,gt=ot?f[1]:0,ht=ot?f[2]:0,Ct=h==="Luminosity"?c:b,Et=Math.min(a,Math.ceil(1048576/o));for(let It=0;It<a;It+=Et){const mt=Math.min(Et,a-It),et=L.getImageData(D-st,It+(W-tt),o,mt),nt=i.getImageData(D,It+W,o,mt);ot&&O(et.data,ut,gt,ht),Ct(et.data,nt.data,T),i.putImageData(nt,D,It+W)}}function g(L,i,o,a){const h=a[0],f=a[1],T=a[2]-h,D=a[3]-f;T===0||D===0||(F(i.context,o,T,D,i.subtype,i.backdrop,i.transferMap,h,f,i.offsetX,i.offsetY),L.save(),L.globalAlpha=1,L.globalCompositeOperation="source-over",L.setTransform(1,0,0,1,0,0),L.drawImage(o.canvas,0,0),L.restore())}function $(L,i){const o=n.Util.singularValueDecompose2dScale(L);o[0]=Math.fround(o[0]),o[1]=Math.fround(o[1]);const a=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return i!==void 0?i:o[0]<=a||o[1]<=a}const q=["butt","round","square"],w=["miter","round","bevel"],Y={},it={},Tt=class Tt{constructor(i,o,a,h,f,{optionalContentConfig:T,markedContentStack:D=null},W,st){G(this,V);G(this,bt);this.ctx=i,this.current=new R(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=o,this.objs=a,this.canvasFactory=h,this.filterFactory=f,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=D||[],this.optionalContentConfig=T,this.cachedCanvases=new x(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=W,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=st,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(i,o=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):o}beginDrawing({transform:i,viewport:o,transparency:a=!1,background:h=null}){const f=this.ctx.canvas.width,T=this.ctx.canvas.height,D=this.ctx.fillStyle;if(this.ctx.fillStyle=h||"#ffffff",this.ctx.fillRect(0,0,f,T),this.ctx.fillStyle=D,a){const W=this.cachedCanvases.getCanvas("transparent",f,T);this.compositeCtx=this.ctx,this.transparentCanvas=W.canvas,this.ctx=W.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),d(this.ctx),i&&(this.ctx.transform(...i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform(...o.transform),this.viewportScale=o.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}executeOperatorList(i,o,a,h){const f=i.argsArray,T=i.fnArray;let D=o||0;const W=f.length;if(W===D)return D;const st=W-D>N&&typeof a=="function",tt=st?Date.now()+m:0;let ot=0;const ut=this.commonObjs,gt=this.objs;let ht;for(;;){if(h!==void 0&&D===h.nextBreakPoint)return h.breakIt(D,a),D;if(ht=T[D],ht!==n.OPS.dependency)this[ht].apply(this,f[D]);else for(const Ct of f[D]){const Ot=Ct.startsWith("g_")?ut:gt;if(!Ot.has(Ct))return Ot.get(Ct,a),D}if(D++,D===W)return D;if(st&&++ot>N){if(Date.now()>tt)return a(),D;ot=0}}}endDrawing(){X(this,V,Ze).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const i of this._cachedBitmapsMap.values()){for(const o of i.values())typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement&&(o.width=o.height=0);i.clear()}this._cachedBitmapsMap.clear(),X(this,bt,tn).call(this)}_scaleImage(i,o){const a=i.width,h=i.height;let f=Math.max(Math.hypot(o[0],o[1]),1),T=Math.max(Math.hypot(o[2],o[3]),1),D=a,W=h,st="prescale1",tt,ot;for(;f>2&&D>1||T>2&&W>1;){let ut=D,gt=W;f>2&&D>1&&(ut=D>=16384?Math.floor(D/2)-1||1:Math.ceil(D/2),f/=D/ut),T>2&&W>1&&(gt=W>=16384?Math.floor(W/2)-1||1:Math.ceil(W)/2,T/=W/gt),tt=this.cachedCanvases.getCanvas(st,ut,gt),ot=tt.context,ot.clearRect(0,0,ut,gt),ot.drawImage(i,0,0,D,W,0,0,ut,gt),i=tt.canvas,D=ut,W=gt,st=st==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:D,paintHeight:W}}_createMaskCanvas(i){const o=this.ctx,{width:a,height:h}=i,f=this.current.fillColor,T=this.current.patternFill,D=(0,u.getCurrentTransform)(o);let W,st,tt,ot;if((i.bitmap||i.data)&&i.count>1){const wt=i.bitmap||i.data.buffer;st=JSON.stringify(T?D:[D.slice(0,4),f]),W=this._cachedBitmapsMap.get(wt),W||(W=new Map,this._cachedBitmapsMap.set(wt,W));const Pt=W.get(st);if(Pt&&!T){const Ut=Math.round(Math.min(D[0],D[2])+D[4]),Vt=Math.round(Math.min(D[1],D[3])+D[5]);return{canvas:Pt,offsetX:Ut,offsetY:Vt}}tt=Pt}tt||(ot=this.cachedCanvases.getCanvas("maskCanvas",a,h),v(ot.context,i));let ut=n.Util.transform(D,[1/a,0,0,-1/h,0,0]);ut=n.Util.transform(ut,[1,0,0,1,0,-h]);const gt=n.Util.applyTransform([0,0],ut),ht=n.Util.applyTransform([a,h],ut),Ct=n.Util.normalizeRect([gt[0],gt[1],ht[0],ht[1]]),Ot=Math.round(Ct[2]-Ct[0])||1,Et=Math.round(Ct[3]-Ct[1])||1,It=this.cachedCanvases.getCanvas("fillCanvas",Ot,Et),mt=It.context,et=Math.min(gt[0],ht[0]),nt=Math.min(gt[1],ht[1]);mt.translate(-et,-nt),mt.transform(...ut),tt||(tt=this._scaleImage(ot.canvas,(0,u.getCurrentTransformInverse)(mt)),tt=tt.img,W&&T&&W.set(st,tt)),mt.imageSmoothingEnabled=$((0,u.getCurrentTransform)(mt),i.interpolate),p(mt,tt,0,0,tt.width,tt.height,0,0,a,h),mt.globalCompositeOperation="source-in";const pt=n.Util.transform((0,u.getCurrentTransformInverse)(mt),[1,0,0,1,-et,-nt]);return mt.fillStyle=T?f.getPattern(o,this,pt,E.PathType.FILL):f,mt.fillRect(0,0,a,h),W&&!T&&(this.cachedCanvases.delete("fillCanvas"),W.set(st,It.canvas)),{canvas:It.canvas,offsetX:Math.round(et),offsetY:Math.round(nt)}}setLineWidth(i){i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=q[i]}setLineJoin(i){this.ctx.lineJoin=w[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,o){const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(i),a.lineDashOffset=o)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[o,a]of i)switch(o){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=a;break;case"ca":this.current.fillAlpha=a,this.ctx.globalAlpha=a;break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,h=this.cachedCanvases.getCanvas(a,i,o);this.suspendedCtx=this.ctx,this.ctx=h.context;const f=this.ctx;f.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),l(this.suspendedCtx,f),S(f,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const o=this.current.activeSMask,a=this.suspendedCtx;g(a,o,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(l(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(i,o,a,h,f,T){this.ctx.transform(i,o,a,h,f,T),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,o,a){const h=this.ctx,f=this.current;let T=f.x,D=f.y,W,st;const tt=(0,u.getCurrentTransform)(h),ot=tt[0]===0&&tt[3]===0||tt[1]===0&&tt[2]===0,ut=ot?a.slice(0):null;for(let gt=0,ht=0,Ct=i.length;gt<Ct;gt++)switch(i[gt]|0){case n.OPS.rectangle:T=o[ht++],D=o[ht++];const Ot=o[ht++],Et=o[ht++],It=T+Ot,mt=D+Et;h.moveTo(T,D),Ot===0||Et===0?h.lineTo(It,mt):(h.lineTo(It,D),h.lineTo(It,mt),h.lineTo(T,mt)),ot||f.updateRectMinMax(tt,[T,D,It,mt]),h.closePath();break;case n.OPS.moveTo:T=o[ht++],D=o[ht++],h.moveTo(T,D),ot||f.updatePathMinMax(tt,T,D);break;case n.OPS.lineTo:T=o[ht++],D=o[ht++],h.lineTo(T,D),ot||f.updatePathMinMax(tt,T,D);break;case n.OPS.curveTo:W=T,st=D,T=o[ht+4],D=o[ht+5],h.bezierCurveTo(o[ht],o[ht+1],o[ht+2],o[ht+3],T,D),f.updateCurvePathMinMax(tt,W,st,o[ht],o[ht+1],o[ht+2],o[ht+3],T,D,ut),ht+=6;break;case n.OPS.curveTo2:W=T,st=D,h.bezierCurveTo(T,D,o[ht],o[ht+1],o[ht+2],o[ht+3]),f.updateCurvePathMinMax(tt,W,st,T,D,o[ht],o[ht+1],o[ht+2],o[ht+3],ut),T=o[ht+2],D=o[ht+3],ht+=4;break;case n.OPS.curveTo3:W=T,st=D,T=o[ht+2],D=o[ht+3],h.bezierCurveTo(o[ht],o[ht+1],T,D,T,D),f.updateCurvePathMinMax(tt,W,st,o[ht],o[ht+1],T,D,T,D,ut),ht+=4;break;case n.OPS.closePath:h.closePath();break}ot&&f.updateScalingPathMinMax(tt,ut),f.setCurrentPoint(T,D)}closePath(){this.ctx.closePath()}stroke(i=!0){const o=this.ctx,a=this.current.strokeColor;o.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof a=="object"&&(a!=null&&a.getPattern)?(o.save(),o.strokeStyle=a.getPattern(o,this,(0,u.getCurrentTransformInverse)(o),E.PathType.STROKE),this.rescaleAndStroke(!1),o.restore()):this.rescaleAndStroke(!0)),i&&this.consumePath(this.current.getClippedPathBoundingBox()),o.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i=!0){const o=this.ctx,a=this.current.fillColor,h=this.current.patternFill;let f=!1;h&&(o.save(),o.fillStyle=a.getPattern(o,this,(0,u.getCurrentTransformInverse)(o),E.PathType.FILL),f=!0);const T=this.current.getClippedPathBoundingBox();this.contentVisible&&T!==null&&(this.pendingEOFill?(o.fill("evenodd"),this.pendingEOFill=!1):o.fill()),f&&o.restore(),i&&this.consumePath(T)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Y}eoClip(){this.pendingClip=it}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,o=this.ctx;if(i===void 0){o.beginPath();return}o.save(),o.beginPath();for(const a of i)o.setTransform(...a.transform),o.translate(a.x,a.y),a.addToPath(o,a.fontSize);o.restore(),o.clip(),o.beginPath(),delete this.pendingTextPaths}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,o){var tt;const a=this.commonObjs.get(i),h=this.current;if(!a)throw new Error(`Can't find font for ${i}`);if(h.fontMatrix=a.fontMatrix||n.FONT_IDENTITY_MATRIX,(h.fontMatrix[0]===0||h.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+i),o<0?(o=-o,h.fontDirection=-1):h.fontDirection=1,this.current.font=a,this.current.fontSize=o,a.isType3Font)return;const f=a.loadedName||"sans-serif",T=((tt=a.systemFontInfo)==null?void 0:tt.css)||`"${f}", ${a.fallbackName}`;let D="normal";a.black?D="900":a.bold&&(D="bold");const W=a.italic?"italic":"normal";let st=o;o<at?st=at:o>I&&(st=I),this.current.fontSizeScale=o/st,this.ctx.font=`${W} ${D} ${st}px ${T}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,o){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=o}setLeadingMoveText(i,o){this.setLeading(-o),this.moveText(i,o)}setTextMatrix(i,o,a,h,f,T){this.current.textMatrix=[i,o,a,h,f,T],this.current.textMatrixScale=Math.hypot(i,o),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,o,a,h){const f=this.ctx,T=this.current,D=T.font,W=T.textRenderingMode,st=T.fontSize/T.fontSizeScale,tt=W&n.TextRenderingMode.FILL_STROKE_MASK,ot=!!(W&n.TextRenderingMode.ADD_TO_PATH_FLAG),ut=T.patternFill&&!D.missingFile;let gt;(D.disableFontFace||ot||ut)&&(gt=D.getPathGenerator(this.commonObjs,i)),D.disableFontFace||ut?(f.save(),f.translate(o,a),f.beginPath(),gt(f,st),h&&f.setTransform(...h),(tt===n.TextRenderingMode.FILL||tt===n.TextRenderingMode.FILL_STROKE)&&f.fill(),(tt===n.TextRenderingMode.STROKE||tt===n.TextRenderingMode.FILL_STROKE)&&f.stroke(),f.restore()):((tt===n.TextRenderingMode.FILL||tt===n.TextRenderingMode.FILL_STROKE)&&f.fillText(i,o,a),(tt===n.TextRenderingMode.STROKE||tt===n.TextRenderingMode.FILL_STROKE)&&f.strokeText(i,o,a)),ot&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,u.getCurrentTransform)(f),x:o,y:a,fontSize:st,addToPath:gt})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const o=i.getImageData(0,0,10,10).data;let a=!1;for(let h=3;h<o.length;h+=4)if(o[h]>0&&o[h]<255){a=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",a)}showText(i){const o=this.current,a=o.font;if(a.isType3Font)return this.showType3Text(i);const h=o.fontSize;if(h===0)return;const f=this.ctx,T=o.fontSizeScale,D=o.charSpacing,W=o.wordSpacing,st=o.fontDirection,tt=o.textHScale*st,ot=i.length,ut=a.vertical,gt=ut?1:-1,ht=a.defaultVMetrics,Ct=h*o.fontMatrix[0],Ot=o.textRenderingMode===n.TextRenderingMode.FILL&&!a.disableFontFace&&!o.patternFill;f.save(),f.transform(...o.textMatrix),f.translate(o.x,o.y+o.textRise),st>0?f.scale(tt,-1):f.scale(tt,1);let Et;if(o.patternFill){f.save();const pt=o.fillColor.getPattern(f,this,(0,u.getCurrentTransformInverse)(f),E.PathType.FILL);Et=(0,u.getCurrentTransform)(f),f.restore(),f.fillStyle=pt}let It=o.lineWidth;const mt=o.textMatrixScale;if(mt===0||It===0){const pt=o.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(pt===n.TextRenderingMode.STROKE||pt===n.TextRenderingMode.FILL_STROKE)&&(It=this.getSinglePixelWidth())}else It/=mt;if(T!==1&&(f.scale(T,T),It/=T),f.lineWidth=It,a.isInvalidPDFjsFont){const pt=[];let wt=0;for(const Pt of i)pt.push(Pt.unicode),wt+=Pt.width;f.fillText(pt.join(""),0,0),o.x+=wt*Ct*tt,f.restore(),this.compose();return}let et=0,nt;for(nt=0;nt<ot;++nt){const pt=i[nt];if(typeof pt=="number"){et+=gt*pt*h/1e3;continue}let wt=!1;const Pt=(pt.isSpace?W:0)+D,Ut=pt.fontChar,Vt=pt.accent;let Ht,qt,$t=pt.width;if(ut){const zt=pt.vmetric||ht,ft=-(pt.vmetric?zt[1]:$t*.5)*Ct,Z=zt[2]*Ct;$t=zt?-zt[0]:$t,Ht=ft/T,qt=(et+Z)/T}else Ht=et/T,qt=0;if(a.remeasure&&$t>0){const zt=f.measureText(Ut).width*1e3/h*T;if($t<zt&&this.isFontSubpixelAAEnabled){const ft=$t/zt;wt=!0,f.save(),f.scale(ft,1),Ht/=ft}else $t!==zt&&(Ht+=($t-zt)/2e3*h/T)}if(this.contentVisible&&(pt.isInFont||a.missingFile)){if(Ot&&!Vt)f.fillText(Ut,Ht,qt);else if(this.paintChar(Ut,Ht,qt,Et),Vt){const zt=Ht+h*Vt.offset.x/T,ft=qt-h*Vt.offset.y/T;this.paintChar(Vt.fontChar,zt,ft,Et)}}const Wt=ut?$t*Ct-Pt*st:$t*Ct+Pt*st;et+=Wt,wt&&f.restore()}ut?o.y-=et:o.x+=et*tt,f.restore(),this.compose()}showType3Text(i){const o=this.ctx,a=this.current,h=a.font,f=a.fontSize,T=a.fontDirection,D=h.vertical?1:-1,W=a.charSpacing,st=a.wordSpacing,tt=a.textHScale*T,ot=a.fontMatrix||n.FONT_IDENTITY_MATRIX,ut=i.length,gt=a.textRenderingMode===n.TextRenderingMode.INVISIBLE;let ht,Ct,Ot,Et;if(!(gt||f===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,o.save(),o.transform(...a.textMatrix),o.translate(a.x,a.y),o.scale(tt,T),ht=0;ht<ut;++ht){if(Ct=i[ht],typeof Ct=="number"){Et=D*Ct*f/1e3,this.ctx.translate(Et,0),a.x+=Et*tt;continue}const It=(Ct.isSpace?st:0)+W,mt=h.charProcOperatorList[Ct.operatorListId];if(!mt){(0,n.warn)(`Type3 character "${Ct.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ct,this.save(),o.scale(f,f),o.transform(...ot),this.executeOperatorList(mt),this.restore()),Ot=n.Util.applyTransform([Ct.width,0],ot)[0]*f+It,o.translate(Ot,0),a.x+=Ot*tt}o.restore(),this.processingType3=null}}setCharWidth(i,o){}setCharWidthAndBounds(i,o,a,h,f,T){this.ctx.rect(a,h,f-a,T-h),this.ctx.clip(),this.endPath()}getColorN_Pattern(i){let o;if(i[0]==="TilingPattern"){const a=i[1],h=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),f={createCanvasGraphics:T=>new Tt(T,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};o=new E.TilingPattern(i,a,this.ctx,f,h)}else o=this._getPattern(i[1],i[2]);return o}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,o,a){const h=n.Util.makeHexColor(i,o,a);this.ctx.strokeStyle=h,this.current.strokeColor=h}setFillRGBColor(i,o,a){const h=n.Util.makeHexColor(i,o,a);this.ctx.fillStyle=h,this.current.fillColor=h,this.current.patternFill=!1}_getPattern(i,o=null){let a;return this.cachedPatterns.has(i)?a=this.cachedPatterns.get(i):(a=(0,E.getShadingPattern)(this.getObject(i)),this.cachedPatterns.set(i,a)),o&&(a.matrix=o),a}shadingFill(i){if(!this.contentVisible)return;const o=this.ctx;this.save();const a=this._getPattern(i);o.fillStyle=a.getPattern(o,this,(0,u.getCurrentTransformInverse)(o),E.PathType.SHADING);const h=(0,u.getCurrentTransformInverse)(o);if(h){const{width:f,height:T}=o.canvas,[D,W,st,tt]=n.Util.getAxialAlignedBoundingBox([0,0,f,T],h);this.ctx.fillRect(D,W,st-D,tt-W)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(i,o){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(i)&&i.length===6&&this.transform(...i),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),o)){const a=o[2]-o[0],h=o[3]-o[1];this.ctx.rect(o[0],o[1],a,h),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),o),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const o=this.ctx;i.isolated||(0,n.info)("TODO: Support non-isolated groups."),i.knockout&&(0,n.warn)("Knockout groups not supported.");const a=(0,u.getCurrentTransform)(o);if(i.matrix&&o.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let h=n.Util.getAxialAlignedBoundingBox(i.bbox,(0,u.getCurrentTransform)(o));const f=[0,0,o.canvas.width,o.canvas.height];h=n.Util.intersect(h,f)||[0,0,0,0];const T=Math.floor(h[0]),D=Math.floor(h[1]);let W=Math.max(Math.ceil(h[2])-T,1),st=Math.max(Math.ceil(h[3])-D,1),tt=1,ot=1;W>P&&(tt=W/P,W=P),st>P&&(ot=st/P,st=P),this.current.startNewPathAndClipBox([0,0,W,st]);let ut="groupAt"+this.groupLevel;i.smask&&(ut+="_smask_"+this.smaskCounter++%2);const gt=this.cachedCanvases.getCanvas(ut,W,st),ht=gt.context;ht.scale(1/tt,1/ot),ht.translate(-T,-D),ht.transform(...a),i.smask?this.smaskStack.push({canvas:gt.canvas,context:ht,offsetX:T,offsetY:D,scaleX:tt,scaleY:ot,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(o.setTransform(1,0,0,1,0,0),o.translate(T,D),o.scale(tt,ot),o.save()),l(o,ht),this.ctx=ht,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(o),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const o=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const h=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...h);const f=n.Util.getAxialAlignedBoundingBox([0,0,o.canvas.width,o.canvas.height],h);this.ctx.drawImage(o.canvas,0,0),this.ctx.restore(),this.compose(f)}}beginAnnotation(i,o,a,h,f){if(X(this,V,Ze).call(this),d(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(o)&&o.length===4){const T=o[2]-o[0],D=o[3]-o[1];if(f&&this.annotationCanvasMap){a=a.slice(),a[4]-=o[0],a[5]-=o[1],o=o.slice(),o[0]=o[1]=0,o[2]=T,o[3]=D;const[W,st]=n.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:tt}=this,ot=Math.ceil(T*this.outputScaleX*tt),ut=Math.ceil(D*this.outputScaleY*tt);this.annotationCanvas=this.canvasFactory.create(ot,ut);const{canvas:gt,context:ht}=this.annotationCanvas;this.annotationCanvasMap.set(i,gt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ht,this.ctx.save(),this.ctx.setTransform(W,0,0,-st,0,D*st),d(this.ctx)}else d(this.ctx),this.ctx.rect(o[0],o[1],T,D),this.ctx.clip(),this.endPath()}this.current=new R(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...a),this.transform(...h)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),X(this,bt,tn).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(i){if(!this.contentVisible)return;const o=i.count;i=this.getObject(i.data,i),i.count=o;const a=this.ctx,h=this.processingType3;if(h&&(h.compiled===void 0&&(h.compiled=A(i)),h.compiled)){h.compiled(a);return}const f=this._createMaskCanvas(i),T=f.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(T,f.offsetX,f.offsetY),a.restore(),this.compose()}paintImageMaskXObjectRepeat(i,o,a=0,h=0,f,T){if(!this.contentVisible)return;i=this.getObject(i.data,i);const D=this.ctx;D.save();const W=(0,u.getCurrentTransform)(D);D.transform(o,a,h,f,0,0);const st=this._createMaskCanvas(i);D.setTransform(1,0,0,1,st.offsetX-W[4],st.offsetY-W[5]);for(let tt=0,ot=T.length;tt<ot;tt+=2){const ut=n.Util.transform(W,[o,a,h,f,T[tt],T[tt+1]]),[gt,ht]=n.Util.applyTransform([0,0],ut);D.drawImage(st.canvas,gt,ht)}D.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const o=this.ctx,a=this.current.fillColor,h=this.current.patternFill;for(const f of i){const{data:T,width:D,height:W,transform:st}=f,tt=this.cachedCanvases.getCanvas("maskCanvas",D,W),ot=tt.context;ot.save();const ut=this.getObject(T,f);v(ot,ut),ot.globalCompositeOperation="source-in",ot.fillStyle=h?a.getPattern(ot,this,(0,u.getCurrentTransformInverse)(o),E.PathType.FILL):a,ot.fillRect(0,0,D,W),ot.restore(),o.save(),o.transform(...st),o.scale(1,-1),p(o,tt.canvas,0,0,D,W,0,-1,1,1),o.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const o=this.getObject(i);if(!o){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(o)}paintImageXObjectRepeat(i,o,a,h){if(!this.contentVisible)return;const f=this.getObject(i);if(!f){(0,n.warn)("Dependent image isn't ready yet");return}const T=f.width,D=f.height,W=[];for(let st=0,tt=h.length;st<tt;st+=2)W.push({transform:[o,0,0,a,h[st],h[st+1]],x:0,y:0,w:T,h:D});this.paintInlineImageXObjectGroup(f,W)}applyTransferMapsToCanvas(i){return this.current.transferMaps!=="none"&&(i.filter=this.current.transferMaps,i.drawImage(i.canvas,0,0),i.filter="none"),i.canvas}applyTransferMapsToBitmap(i){if(this.current.transferMaps==="none")return i.bitmap;const{bitmap:o,width:a,height:h}=i,f=this.cachedCanvases.getCanvas("inlineImage",a,h),T=f.context;return T.filter=this.current.transferMaps,T.drawImage(o,0,0),T.filter="none",f.canvas}paintInlineImageXObject(i){if(!this.contentVisible)return;const o=i.width,a=i.height,h=this.ctx;if(this.save(),!n.isNodeJS){const{filter:D}=h;D!=="none"&&D!==""&&(h.filter="none")}h.scale(1/o,-1/a);let f;if(i.bitmap)f=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)f=i;else{const W=this.cachedCanvases.getCanvas("inlineImage",o,a).context;C(W,i),f=this.applyTransferMapsToCanvas(W)}const T=this._scaleImage(f,(0,u.getCurrentTransformInverse)(h));h.imageSmoothingEnabled=$((0,u.getCurrentTransform)(h),i.interpolate),p(h,T.img,0,0,T.paintWidth,T.paintHeight,0,-a,o,a),this.compose(),this.restore()}paintInlineImageXObjectGroup(i,o){if(!this.contentVisible)return;const a=this.ctx;let h;if(i.bitmap)h=i.bitmap;else{const f=i.width,T=i.height,W=this.cachedCanvases.getCanvas("inlineImage",f,T).context;C(W,i),h=this.applyTransferMapsToCanvas(W)}for(const f of o)a.save(),a.transform(...f.transform),a.scale(1,-1),p(a,h,f.x,f.y,f.w,f.h,0,-1,1,1),a.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,o){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,o){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(o)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){const o=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const a=this.ctx;this.pendingClip&&(o||(this.pendingClip===it?a.clip("evenodd"):a.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),a.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const i=(0,u.getCurrentTransform)(this.ctx);if(i[1]===0&&i[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3]));else{const o=Math.abs(i[0]*i[3]-i[2]*i[1]),a=Math.hypot(i[0],i[2]),h=Math.hypot(i[1],i[3]);this._cachedGetSinglePixelWidth=Math.max(a,h)/o}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:i}=this.current,{a:o,b:a,c:h,d:f}=this.ctx.getTransform();let T,D;if(a===0&&h===0){const W=Math.abs(o),st=Math.abs(f);if(W===st)if(i===0)T=D=1/W;else{const tt=W*i;T=D=tt<1?1/tt:1}else if(i===0)T=1/W,D=1/st;else{const tt=W*i,ot=st*i;T=tt<1?1/tt:1,D=ot<1?1/ot:1}}else{const W=Math.abs(o*f-a*h),st=Math.hypot(o,a),tt=Math.hypot(h,f);if(i===0)T=tt/W,D=st/W;else{const ot=i*W;T=tt>ot?tt/ot:1,D=st>ot?st/ot:1}}this._cachedScaleForStroking[0]=T,this._cachedScaleForStroking[1]=D}return this._cachedScaleForStroking}rescaleAndStroke(i){const{ctx:o}=this,{lineWidth:a}=this.current,[h,f]=this.getScaleForStroking();if(o.lineWidth=a||1,h===1&&f===1){o.stroke();return}const T=o.getLineDash();if(i&&o.save(),o.scale(h,f),T.length>0){const D=Math.max(h,f);o.setLineDash(T.map(W=>W/D)),o.lineDashOffset/=D}o.stroke(),i&&o.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};V=new WeakSet,Ze=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},bt=new WeakSet,tn=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const o=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=o}}};let ct=Tt;e.CanvasGraphics=ct;for(const L in n.OPS)ct.prototype[L]!==void 0&&(ct.prototype[n.OPS[L]]=ct.prototype[L])},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=k;var n=M(1),u=M(6);const E={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=E;function j(A,R){if(!R)return;const C=R[2]-R[0],v=R[3]-R[1],l=new Path2D;l.rect(R[0],R[1],C,v),A.clip(l)}class at{constructor(){this.constructor===at&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class I extends at{constructor(R){super(),this._type=R[1],this._bbox=R[2],this._colorStops=R[3],this._p0=R[4],this._p1=R[5],this._r0=R[6],this._r1=R[7],this.matrix=null}_createGradient(R){let C;this._type==="axial"?C=R.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(C=R.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const v of this._colorStops)C.addColorStop(v[0],v[1]);return C}getPattern(R,C,v,l){let d;if(l===E.STROKE||l===E.FILL){const O=C.current.getClippedPathBoundingBox(l,(0,u.getCurrentTransform)(R))||[0,0,0,0],b=Math.ceil(O[2]-O[0])||1,c=Math.ceil(O[3]-O[1])||1,F=C.cachedCanvases.getCanvas("pattern",b,c,!0),g=F.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-O[0],-O[1]),v=n.Util.transform(v,[1,0,0,1,O[0],O[1]]),g.transform(...C.baseTransform),this.matrix&&g.transform(...this.matrix),j(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),d=R.createPattern(F.canvas,"no-repeat");const $=new DOMMatrix(v);d.setTransform($)}else j(R,this._bbox),d=this._createGradient(R);return d}}function P(A,R,C,v,l,d,O,b){const c=R.coords,F=R.colors,g=A.data,$=A.width*4;let q;c[C+1]>c[v+1]&&(q=C,C=v,v=q,q=d,d=O,O=q),c[v+1]>c[l+1]&&(q=v,v=l,l=q,q=O,O=b,b=q),c[C+1]>c[v+1]&&(q=C,C=v,v=q,q=d,d=O,O=q);const w=(c[C]+R.offsetX)*R.scaleX,Y=(c[C+1]+R.offsetY)*R.scaleY,it=(c[v]+R.offsetX)*R.scaleX,ct=(c[v+1]+R.offsetY)*R.scaleY,V=(c[l]+R.offsetX)*R.scaleX,dt=(c[l+1]+R.offsetY)*R.scaleY;if(Y>=dt)return;const bt=F[d],St=F[d+1],Tt=F[d+2],L=F[O],i=F[O+1],o=F[O+2],a=F[b],h=F[b+1],f=F[b+2],T=Math.round(Y),D=Math.round(dt);let W,st,tt,ot,ut,gt,ht,Ct;for(let Ot=T;Ot<=D;Ot++){if(Ot<ct){const nt=Ot<Y?0:(Y-Ot)/(Y-ct);W=w-(w-it)*nt,st=bt-(bt-L)*nt,tt=St-(St-i)*nt,ot=Tt-(Tt-o)*nt}else{let nt;Ot>dt?nt=1:ct===dt?nt=0:nt=(ct-Ot)/(ct-dt),W=it-(it-V)*nt,st=L-(L-a)*nt,tt=i-(i-h)*nt,ot=o-(o-f)*nt}let Et;Ot<Y?Et=0:Ot>dt?Et=1:Et=(Y-Ot)/(Y-dt),ut=w-(w-V)*Et,gt=bt-(bt-a)*Et,ht=St-(St-h)*Et,Ct=Tt-(Tt-f)*Et;const It=Math.round(Math.min(W,ut)),mt=Math.round(Math.max(W,ut));let et=$*Ot+It*4;for(let nt=It;nt<=mt;nt++)Et=(W-nt)/(W-ut),Et<0?Et=0:Et>1&&(Et=1),g[et++]=st-(st-gt)*Et|0,g[et++]=tt-(tt-ht)*Et|0,g[et++]=ot-(ot-Ct)*Et|0,g[et++]=255}}function m(A,R,C){const v=R.coords,l=R.colors;let d,O;switch(R.type){case"lattice":const b=R.verticesPerRow,c=Math.floor(v.length/b)-1,F=b-1;for(d=0;d<c;d++){let g=d*b;for(let $=0;$<F;$++,g++)P(A,C,v[g],v[g+1],v[g+b],l[g],l[g+1],l[g+b]),P(A,C,v[g+b+1],v[g+1],v[g+b],l[g+b+1],l[g+1],l[g+b])}break;case"triangles":for(d=0,O=v.length;d<O;d+=3)P(A,C,v[d],v[d+1],v[d+2],l[d],l[d+1],l[d+2]);break;default:throw new Error("illegal figure")}}class N extends at{constructor(R){super(),this._coords=R[2],this._colors=R[3],this._figures=R[4],this._bounds=R[5],this._bbox=R[7],this._background=R[8],this.matrix=null}_createMeshCanvas(R,C,v){const b=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),F=Math.ceil(this._bounds[2])-b,g=Math.ceil(this._bounds[3])-c,$=Math.min(Math.ceil(Math.abs(F*R[0]*1.1)),3e3),q=Math.min(Math.ceil(Math.abs(g*R[1]*1.1)),3e3),w=F/$,Y=g/q,it={coords:this._coords,colors:this._colors,offsetX:-b,offsetY:-c,scaleX:1/w,scaleY:1/Y},ct=$+2*2,V=q+2*2,dt=v.getCanvas("mesh",ct,V,!1),bt=dt.context,St=bt.createImageData($,q);if(C){const L=St.data;for(let i=0,o=L.length;i<o;i+=4)L[i]=C[0],L[i+1]=C[1],L[i+2]=C[2],L[i+3]=255}for(const L of this._figures)m(St,L,it);return bt.putImageData(St,2,2),{canvas:dt.canvas,offsetX:b-2*w,offsetY:c-2*Y,scaleX:w,scaleY:Y}}getPattern(R,C,v,l){j(R,this._bbox);let d;if(l===E.SHADING)d=n.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(R));else if(d=n.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){const b=n.Util.singularValueDecompose2dScale(this.matrix);d=[d[0]*b[0],d[1]*b[1]]}const O=this._createMeshCanvas(d,l===E.SHADING?null:this._background,C.cachedCanvases);return l!==E.SHADING&&(R.setTransform(...C.baseTransform),this.matrix&&R.transform(...this.matrix)),R.translate(O.offsetX,O.offsetY),R.scale(O.scaleX,O.scaleY),R.createPattern(O.canvas,"no-repeat")}}class B extends at{getPattern(){return"hotpink"}}function k(A){switch(A[0]){case"RadialAxial":return new I(A);case"Mesh":return new N(A);case"Dummy":return new B}throw new Error(`Unknown IR type: ${A[0]}`)}const S={COLORED:1,UNCOLORED:2},p=class p{constructor(R,C,v,l,d){this.operatorList=R[2],this.matrix=R[3]||[1,0,0,1,0,0],this.bbox=R[4],this.xstep=R[5],this.ystep=R[6],this.paintType=R[7],this.tilingType=R[8],this.color=C,this.ctx=v,this.canvasGraphicsFactory=l,this.baseTransform=d}createPatternCanvas(R){const C=this.operatorList,v=this.bbox,l=this.xstep,d=this.ystep,O=this.paintType,b=this.tilingType,c=this.color,F=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+b);const g=v[0],$=v[1],q=v[2],w=v[3],Y=n.Util.singularValueDecompose2dScale(this.matrix),it=n.Util.singularValueDecompose2dScale(this.baseTransform),ct=[Y[0]*it[0],Y[1]*it[1]],V=this.getSizeAndScale(l,this.ctx.canvas.width,ct[0]),dt=this.getSizeAndScale(d,this.ctx.canvas.height,ct[1]),bt=R.cachedCanvases.getCanvas("pattern",V.size,dt.size,!0),St=bt.context,Tt=F.createCanvasGraphics(St);Tt.groupLevel=R.groupLevel,this.setFillAndStrokeStyleToContext(Tt,O,c);let L=g,i=$,o=q,a=w;return g<0&&(L=0,o+=Math.abs(g)),$<0&&(i=0,a+=Math.abs($)),St.translate(-(V.scale*L),-(dt.scale*i)),Tt.transform(V.scale,0,0,dt.scale,0,0),St.save(),this.clipBbox(Tt,L,i,o,a),Tt.baseTransform=(0,u.getCurrentTransform)(Tt.ctx),Tt.executeOperatorList(C),Tt.endDrawing(),{canvas:bt.canvas,scaleX:V.scale,scaleY:dt.scale,offsetX:L,offsetY:i}}getSizeAndScale(R,C,v){R=Math.abs(R);const l=Math.max(p.MAX_PATTERN_SIZE,C);let d=Math.ceil(R*v);return d>=l?d=l:v=d/R,{scale:v,size:d}}clipBbox(R,C,v,l,d){const O=l-C,b=d-v;R.ctx.rect(C,v,O,b),R.current.updateRectMinMax((0,u.getCurrentTransform)(R.ctx),[C,v,l,d]),R.clip(),R.endPath()}setFillAndStrokeStyleToContext(R,C,v){const l=R.ctx,d=R.current;switch(C){case S.COLORED:const O=this.ctx;l.fillStyle=O.fillStyle,l.strokeStyle=O.strokeStyle,d.fillColor=O.fillStyle,d.strokeColor=O.strokeStyle;break;case S.UNCOLORED:const b=n.Util.makeHexColor(v[0],v[1],v[2]);l.fillStyle=b,l.strokeStyle=b,d.fillColor=b,d.strokeColor=b;break;default:throw new n.FormatError(`Unsupported paint type: ${C}`)}}getPattern(R,C,v,l){let d=v;l!==E.SHADING&&(d=n.Util.transform(d,C.baseTransform),this.matrix&&(d=n.Util.transform(d,this.matrix)));const O=this.createPatternCanvas(C);let b=new DOMMatrix(d);b=b.translate(O.offsetX,O.offsetY),b=b.scale(1/O.scaleX,1/O.scaleY);const c=R.createPattern(O.canvas,"repeat");return c.setTransform(b),c}};ne(p,"MAX_PATTERN_SIZE",3e3);let x=p;e.TilingPattern=x},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=E,e.convertToRGBA=u,e.grayToRGBA=at;var n=M(1);function u(I){switch(I.kind){case n.ImageKind.GRAYSCALE_1BPP:return E(I);case n.ImageKind.RGB_24BPP:return j(I)}return null}function E({src:I,srcPos:P=0,dest:m,width:N,height:B,nonBlackColor:k=4294967295,inverseDecode:S=!1}){const x=n.FeatureTest.isLittleEndian?4278190080:255,[p,A]=S?[k,x]:[x,k],R=N>>3,C=N&7,v=I.length;m=new Uint32Array(m.buffer);let l=0;for(let d=0;d<B;d++){for(const b=P+R;P<b;P++){const c=P<v?I[P]:255;m[l++]=c&128?A:p,m[l++]=c&64?A:p,m[l++]=c&32?A:p,m[l++]=c&16?A:p,m[l++]=c&8?A:p,m[l++]=c&4?A:p,m[l++]=c&2?A:p,m[l++]=c&1?A:p}if(C===0)continue;const O=P<v?I[P++]:255;for(let b=0;b<C;b++)m[l++]=O&1<<7-b?A:p}return{srcPos:P,destPos:l}}function j({src:I,srcPos:P=0,dest:m,destPos:N=0,width:B,height:k}){let S=0;const x=I.length>>2,p=new Uint32Array(I.buffer,P,x);if(n.FeatureTest.isLittleEndian){for(;S<x-2;S+=3,N+=4){const A=p[S],R=p[S+1],C=p[S+2];m[N]=A|4278190080,m[N+1]=A>>>24|R<<8|4278190080,m[N+2]=R>>>16|C<<16|4278190080,m[N+3]=C>>>8|4278190080}for(let A=S*4,R=I.length;A<R;A+=3)m[N++]=I[A]|I[A+1]<<8|I[A+2]<<16|4278190080}else{for(;S<x-2;S+=3,N+=4){const A=p[S],R=p[S+1],C=p[S+2];m[N]=A|255,m[N+1]=A<<24|R>>>8|255,m[N+2]=R<<16|C>>>16|255,m[N+3]=C<<8|255}for(let A=S*4,R=I.length;A<R;A+=3)m[N++]=I[A]<<24|I[A+1]<<16|I[A+2]<<8|255}return{srcPos:P,destPos:N}}function at(I,P){if(n.FeatureTest.isLittleEndian)for(let m=0,N=I.length;m<N;m++)P[m]=I[m]*65793|4278190080;else for(let m=0,N=I.length;m<N;m++)P[m]=I[m]*16843008|255}},(_,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const M=Object.create(null);e.GlobalWorkerOptions=M,M.workerPort=null,M.workerSrc=""},(_,e,M)=>{var I,kn,m,Fn,B,Re;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=M(1);const u={UNKNOWN:0,DATA:1,ERROR:2},E={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function j(S){switch(S instanceof Error||typeof S=="object"&&S!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),S.name){case"AbortException":return new n.AbortException(S.message);case"MissingPDFException":return new n.MissingPDFException(S.message);case"PasswordException":return new n.PasswordException(S.message,S.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(S.message,S.status);case"UnknownErrorException":return new n.UnknownErrorException(S.message,S.details);default:return new n.UnknownErrorException(S.message,S.toString())}}class at{constructor(x,p,A){G(this,I);G(this,m);G(this,B);this.sourceName=x,this.targetName=p,this.comObj=A,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=R=>{const C=R.data;if(C.targetName!==this.sourceName)return;if(C.stream){X(this,m,Fn).call(this,C);return}if(C.callback){const l=C.callbackId,d=this.callbackCapabilities[l];if(!d)throw new Error(`Cannot resolve callback ${l}`);if(delete this.callbackCapabilities[l],C.callback===u.DATA)d.resolve(C.data);else if(C.callback===u.ERROR)d.reject(j(C.reason));else throw new Error("Unexpected callback case");return}const v=this.actionHandler[C.action];if(!v)throw new Error(`Unknown action from worker: ${C.action}`);if(C.callbackId){const l=this.sourceName,d=C.sourceName;new Promise(function(O){O(v(C.data))}).then(function(O){A.postMessage({sourceName:l,targetName:d,callback:u.DATA,callbackId:C.callbackId,data:O})},function(O){A.postMessage({sourceName:l,targetName:d,callback:u.ERROR,callbackId:C.callbackId,reason:j(O)})});return}if(C.streamId){X(this,I,kn).call(this,C);return}v(C.data)},A.addEventListener("message",this._onComObjOnMessage)}on(x,p){const A=this.actionHandler;if(A[x])throw new Error(`There is already an actionName called "${x}"`);A[x]=p}send(x,p,A){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:x,data:p},A)}sendWithPromise(x,p,A){const R=this.callbackId++,C=new n.PromiseCapability;this.callbackCapabilities[R]=C;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:x,callbackId:R,data:p},A)}catch(v){C.reject(v)}return C.promise}sendWithStream(x,p,A,R){const C=this.streamId++,v=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:O=>{const b=new n.PromiseCapability;return this.streamControllers[C]={controller:O,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:v,targetName:l,action:x,streamId:C,data:p,desiredSize:O.desiredSize},R),b.promise},pull:O=>{const b=new n.PromiseCapability;return this.streamControllers[C].pullCall=b,d.postMessage({sourceName:v,targetName:l,stream:E.PULL,streamId:C,desiredSize:O.desiredSize}),b.promise},cancel:O=>{(0,n.assert)(O instanceof Error,"cancel must have a valid reason");const b=new n.PromiseCapability;return this.streamControllers[C].cancelCall=b,this.streamControllers[C].isClosed=!0,d.postMessage({sourceName:v,targetName:l,stream:E.CANCEL,streamId:C,reason:j(O)}),b.promise}},A)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}I=new WeakSet,kn=function(x){const p=x.streamId,A=this.sourceName,R=x.sourceName,C=this.comObj,v=this,l=this.actionHandler[x.action],d={enqueue(O,b=1,c){if(this.isCancelled)return;const F=this.desiredSize;this.desiredSize-=b,F>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),C.postMessage({sourceName:A,targetName:R,stream:E.ENQUEUE,streamId:p,chunk:O},c)},close(){this.isCancelled||(this.isCancelled=!0,C.postMessage({sourceName:A,targetName:R,stream:E.CLOSE,streamId:p}),delete v.streamSinks[p])},error(O){(0,n.assert)(O instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,C.postMessage({sourceName:A,targetName:R,stream:E.ERROR,streamId:p,reason:j(O)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:x.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[p]=d,new Promise(function(O){O(l(x.data,d))}).then(function(){C.postMessage({sourceName:A,targetName:R,stream:E.START_COMPLETE,streamId:p,success:!0})},function(O){C.postMessage({sourceName:A,targetName:R,stream:E.START_COMPLETE,streamId:p,reason:j(O)})})},m=new WeakSet,Fn=function(x){const p=x.streamId,A=this.sourceName,R=x.sourceName,C=this.comObj,v=this.streamControllers[p],l=this.streamSinks[p];switch(x.stream){case E.START_COMPLETE:x.success?v.startCall.resolve():v.startCall.reject(j(x.reason));break;case E.PULL_COMPLETE:x.success?v.pullCall.resolve():v.pullCall.reject(j(x.reason));break;case E.PULL:if(!l){C.postMessage({sourceName:A,targetName:R,stream:E.PULL_COMPLETE,streamId:p,success:!0});break}l.desiredSize<=0&&x.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=x.desiredSize,new Promise(function(d){var O;d((O=l.onPull)==null?void 0:O.call(l))}).then(function(){C.postMessage({sourceName:A,targetName:R,stream:E.PULL_COMPLETE,streamId:p,success:!0})},function(d){C.postMessage({sourceName:A,targetName:R,stream:E.PULL_COMPLETE,streamId:p,reason:j(d)})});break;case E.ENQUEUE:if((0,n.assert)(v,"enqueue should have stream controller"),v.isClosed)break;v.controller.enqueue(x.chunk);break;case E.CLOSE:if((0,n.assert)(v,"close should have stream controller"),v.isClosed)break;v.isClosed=!0,v.controller.close(),X(this,B,Re).call(this,v,p);break;case E.ERROR:(0,n.assert)(v,"error should have stream controller"),v.controller.error(j(x.reason)),X(this,B,Re).call(this,v,p);break;case E.CANCEL_COMPLETE:x.success?v.cancelCall.resolve():v.cancelCall.reject(j(x.reason)),X(this,B,Re).call(this,v,p);break;case E.CANCEL:if(!l)break;new Promise(function(d){var O;d((O=l.onCancel)==null?void 0:O.call(l,j(x.reason)))}).then(function(){C.postMessage({sourceName:A,targetName:R,stream:E.CANCEL_COMPLETE,streamId:p,success:!0})},function(d){C.postMessage({sourceName:A,targetName:R,stream:E.CANCEL_COMPLETE,streamId:p,reason:j(d)})}),l.sinkCapability.reject(j(x.reason)),l.isCancelled=!0,delete this.streamSinks[p];break;default:throw new Error("Unexpected stream case")}},B=new WeakSet,Re=async function(x,p){var A,R,C;await Promise.allSettled([(A=x.startCall)==null?void 0:A.promise,(R=x.pullCall)==null?void 0:R.promise,(C=x.cancelCall)==null?void 0:C.promise]),delete this.streamControllers[p]},e.MessageHandler=at},(_,e,M)=>{var E,j;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=M(1);class u{constructor({parsedData:I,rawData:P}){G(this,E,void 0);G(this,j,void 0);rt(this,E,I),rt(this,j,P)}getRaw(){return t(this,j)}get(I){return t(this,E).get(I)??null}getAll(){return(0,n.objectFromMap)(t(this,E))}has(I){return t(this,E).has(I)}}E=new WeakMap,j=new WeakMap,e.Metadata=u},(_,e,M)=>{var I,P,m,N,B,k,en;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=M(1),u=M(8);const E=Symbol("INTERNAL");class j{constructor(p,A){G(this,I,!0);this.name=p,this.intent=A}get visible(){return t(this,I)}_setVisible(p,A){p!==E&&(0,n.unreachable)("Internal method `_setVisible` called."),rt(this,I,A)}}I=new WeakMap;class at{constructor(p){G(this,k);G(this,P,null);G(this,m,new Map);G(this,N,null);G(this,B,null);if(this.name=null,this.creator=null,p!==null){this.name=p.name,this.creator=p.creator,rt(this,B,p.order);for(const A of p.groups)t(this,m).set(A.id,new j(A.name,A.intent));if(p.baseState==="OFF")for(const A of t(this,m).values())A._setVisible(E,!1);for(const A of p.on)t(this,m).get(A)._setVisible(E,!0);for(const A of p.off)t(this,m).get(A)._setVisible(E,!1);rt(this,N,this.getHash())}}isVisible(p){if(t(this,m).size===0)return!0;if(!p)return(0,n.warn)("Optional content group not defined."),!0;if(p.type==="OCG")return t(this,m).has(p.id)?t(this,m).get(p.id).visible:((0,n.warn)(`Optional content group not found: ${p.id}`),!0);if(p.type==="OCMD"){if(p.expression)return X(this,k,en).call(this,p.expression);if(!p.policy||p.policy==="AnyOn"){for(const A of p.ids){if(!t(this,m).has(A))return(0,n.warn)(`Optional content group not found: ${A}`),!0;if(t(this,m).get(A).visible)return!0}return!1}else if(p.policy==="AllOn"){for(const A of p.ids){if(!t(this,m).has(A))return(0,n.warn)(`Optional content group not found: ${A}`),!0;if(!t(this,m).get(A).visible)return!1}return!0}else if(p.policy==="AnyOff"){for(const A of p.ids){if(!t(this,m).has(A))return(0,n.warn)(`Optional content group not found: ${A}`),!0;if(!t(this,m).get(A).visible)return!0}return!1}else if(p.policy==="AllOff"){for(const A of p.ids){if(!t(this,m).has(A))return(0,n.warn)(`Optional content group not found: ${A}`),!0;if(t(this,m).get(A).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${p.policy}.`),!0}return(0,n.warn)(`Unknown group type ${p.type}.`),!0}setVisibility(p,A=!0){if(!t(this,m).has(p)){(0,n.warn)(`Optional content group not found: ${p}`);return}t(this,m).get(p)._setVisible(E,!!A),rt(this,P,null)}get hasInitialVisibility(){return t(this,N)===null||this.getHash()===t(this,N)}getOrder(){return t(this,m).size?t(this,B)?t(this,B).slice():[...t(this,m).keys()]:null}getGroups(){return t(this,m).size>0?(0,n.objectFromMap)(t(this,m)):null}getGroup(p){return t(this,m).get(p)||null}getHash(){if(t(this,P)!==null)return t(this,P);const p=new u.MurmurHash3_64;for(const[A,R]of t(this,m))p.update(`${A}:${R.visible}`);return rt(this,P,p.hexdigest())}}P=new WeakMap,m=new WeakMap,N=new WeakMap,B=new WeakMap,k=new WeakSet,en=function(p){const A=p.length;if(A<2)return!0;const R=p[0];for(let C=1;C<A;C++){const v=p[C];let l;if(Array.isArray(v))l=X(this,k,en).call(this,v);else if(t(this,m).has(v))l=t(this,m).get(v).visible;else return(0,n.warn)(`Optional content group not found: ${v}`),!0;switch(R){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return R==="And"},e.OptionalContentConfig=at},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=M(1),u=M(6);class E{constructor({length:P,initialData:m,progressiveDone:N=!1,contentDispositionFilename:B=null,disableRange:k=!1,disableStream:S=!1},x){if((0,n.assert)(x,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=N,this._contentDispositionFilename=B,(m==null?void 0:m.length)>0){const p=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=x,this._isStreamingSupported=!S,this._isRangeSupported=!k,this._contentLength=P,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((p,A)=>{this._onReceiveData({begin:p,chunk:A})}),this._pdfDataRangeTransport.addProgressListener((p,A)=>{this._onProgress({loaded:p,total:A})}),this._pdfDataRangeTransport.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:P,chunk:m}){const N=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;if(P===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(N):this._queuedChunks.push(N);else{const B=this._rangeReaders.some(function(k){return k._begin!==P?!1:(k._enqueue(N),!0)});(0,n.assert)(B,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}_onProgress(P){var m,N,B,k;P.total===void 0?(N=(m=this._rangeReaders[0])==null?void 0:m.onProgress)==null||N.call(m,{loaded:P.loaded}):(k=(B=this._fullRequestReader)==null?void 0:B.onProgress)==null||k.call(B,{loaded:P.loaded,total:P.total})}_onProgressiveDone(){var P;(P=this._fullRequestReader)==null||P.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(P){const m=this._rangeReaders.indexOf(P);m>=0&&this._rangeReaders.splice(m,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const P=this._queuedChunks;return this._queuedChunks=null,new j(this,P,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(P,m){if(m<=this._progressiveDataLength)return null;const N=new at(this,P,m);return this._pdfDataRangeTransport.requestDataRange(P,m),this._rangeReaders.push(N),N}cancelAllRequests(P){var m;(m=this._fullRequestReader)==null||m.cancel(P);for(const N of this._rangeReaders.slice(0))N.cancel(P);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=E;class j{constructor(P,m,N=!1,B=null){this._stream=P,this._done=N||!1,this._filename=(0,u.isPdfFile)(B)?B:null,this._queuedChunks=m||[],this._loaded=0;for(const k of this._queuedChunks)this._loaded+=k.byteLength;this._requests=[],this._headersReady=Promise.resolve(),P._fullRequestReader=this,this.onProgress=null}_enqueue(P){this._done||(this._requests.length>0?this._requests.shift().resolve({value:P,done:!1}):this._queuedChunks.push(P),this._loaded+=P.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=new n.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class at{constructor(P,m,N){this._stream=P,this._begin=m,this._end=N,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(P){if(!this._done){if(this._requests.length===0)this._queuedChunk=P;else{this._requests.shift().resolve({value:P,done:!1});for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const P=new n.PromiseCapability;return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=M(1),u=M(20);function E(N,B,k){return{method:"GET",headers:N,signal:k.signal,mode:"cors",credentials:B?"include":"same-origin",redirect:"follow"}}function j(N){const B=new Headers;for(const k in N){const S=N[k];S!==void 0&&B.append(k,S)}return B}function at(N){return N instanceof Uint8Array?N.buffer:N instanceof ArrayBuffer?N:((0,n.warn)(`getArrayBuffer - unexpected data format: ${N}`),new Uint8Array(N).buffer)}class I{constructor(B){this.source=B,this.isHttp=/^https?:/i.test(B.url),this.httpHeaders=this.isHttp&&B.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var B;return((B=this._fullRequestReader)==null?void 0:B._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new P(this),this._fullRequestReader}getRangeReader(B,k){if(k<=this._progressiveDataLength)return null;const S=new m(this,B,k);return this._rangeRequestReaders.push(S),S}cancelAllRequests(B){var k;(k=this._fullRequestReader)==null||k.cancel(B);for(const S of this._rangeRequestReaders.slice(0))S.cancel(B)}}e.PDFFetchStream=I;class P{constructor(B){this._stream=B,this._reader=null,this._loaded=0,this._filename=null;const k=B.source;this._withCredentials=k.withCredentials||!1,this._contentLength=k.length,this._headersCapability=new n.PromiseCapability,this._disableRange=k.disableRange||!1,this._rangeChunkSize=k.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!k.disableStream,this._isRangeSupported=!k.disableRange,this._headers=j(this._stream.httpHeaders);const S=k.url;fetch(S,E(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,u.validateResponseStatus)(x.status))throw(0,u.createResponseStatusError)(x.status,S);this._reader=x.body.getReader(),this._headersCapability.resolve();const p=C=>x.headers.get(C),{allowRangeRequests:A,suggestedLength:R}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=R||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var S;await this._headersCapability.promise;const{value:B,done:k}=await this._reader.read();return k?{value:B,done:k}:(this._loaded+=B.byteLength,(S=this.onProgress)==null||S.call(this,{loaded:this._loaded,total:this._contentLength}),{value:at(B),done:!1})}cancel(B){var k;(k=this._reader)==null||k.cancel(B),this._abortController.abort()}}class m{constructor(B,k,S){this._stream=B,this._reader=null,this._loaded=0;const x=B.source;this._withCredentials=x.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!x.disableStream,this._abortController=new AbortController,this._headers=j(this._stream.httpHeaders),this._headers.append("Range",`bytes=${k}-${S-1}`);const p=x.url;fetch(p,E(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,u.validateResponseStatus)(A.status))throw(0,u.createResponseStatusError)(A.status,p);this._readCapability.resolve(),this._reader=A.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var S;await this._readCapability.promise;const{value:B,done:k}=await this._reader.read();return k?{value:B,done:k}:(this._loaded+=B.byteLength,(S=this.onProgress)==null||S.call(this,{loaded:this._loaded}),{value:at(B),done:!1})}cancel(B){var k;(k=this._reader)==null||k.cancel(B),this._abortController.abort()}}},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=I,e.extractFilenameFromHeader=at,e.validateRangeRequestCapabilities=j,e.validateResponseStatus=P;var n=M(1),u=M(21),E=M(6);function j({getResponseHeader:m,isHttp:N,rangeChunkSize:B,disableRange:k}){const S={allowRangeRequests:!1,suggestedLength:void 0},x=parseInt(m("Content-Length"),10);return!Number.isInteger(x)||(S.suggestedLength=x,x<=2*B)||k||!N||m("Accept-Ranges")!=="bytes"||(m("Content-Encoding")||"identity")!=="identity"||(S.allowRangeRequests=!0),S}function at(m){const N=m("Content-Disposition");if(N){let B=(0,u.getFilenameFromContentDispositionHeader)(N);if(B.includes("%"))try{B=decodeURIComponent(B)}catch{}if((0,E.isPdfFile)(B))return B}return null}function I(m,N){return m===404||m===0&&N.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+N+'".'):new n.UnexpectedResponseException(`Unexpected server response (${m}) while retrieving PDF "${N}".`,m)}function P(m){return m===200||m===206}},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=u;var n=M(1);function u(E){let j=!0,at=I("filename\\*","i").exec(E);if(at){at=at[1];let x=B(at);return x=unescape(x),x=k(x),x=S(x),m(x)}if(at=N(E),at){const x=S(at);return m(x)}if(at=I("filename","i").exec(E),at){at=at[1];let x=B(at);return x=S(x),m(x)}function I(x,p){return new RegExp("(?:^|;)\\s*"+x+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function P(x,p){if(x){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const A=new TextDecoder(x,{fatal:!0}),R=(0,n.stringToBytes)(p);p=A.decode(R),j=!1}catch{}}return p}function m(x){return j&&/[\x80-\xff]/.test(x)&&(x=P("utf-8",x),j&&(x=P("iso-8859-1",x))),x}function N(x){const p=[];let A;const R=I("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(A=R.exec(x))!==null;){let[,v,l,d]=A;if(v=parseInt(v,10),v in p){if(v===0)break;continue}p[v]=[l,d]}const C=[];for(let v=0;v<p.length&&v in p;++v){let[l,d]=p[v];d=B(d),l&&(d=unescape(d),v===0&&(d=k(d))),C.push(d)}return C.join("")}function B(x){if(x.startsWith('"')){const p=x.slice(1).split('\\"');for(let A=0;A<p.length;++A){const R=p[A].indexOf('"');R!==-1&&(p[A]=p[A].slice(0,R),p.length=A+1),p[A]=p[A].replaceAll(/\\(.)/g,"$1")}x=p.join('"')}return x}function k(x){const p=x.indexOf("'");if(p===-1)return x;const A=x.slice(0,p),C=x.slice(p+1).replace(/^[^']*'/,"");return P(A,C)}function S(x){return!x.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(x)?x:x.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,A,R,C){if(R==="q"||R==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,l){return String.fromCharCode(parseInt(l,16))}),P(A,C);try{C=atob(C)}catch{}return P(A,C)})}return""}},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=M(1),u=M(20);const E=200,j=206;function at(B){const k=B.response;return typeof k!="string"?k:(0,n.stringToBytes)(k).buffer}class I{constructor(k,S={}){this.url=k,this.isHttp=/^https?:/i.test(k),this.httpHeaders=this.isHttp&&S.httpHeaders||Object.create(null),this.withCredentials=S.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(k,S,x){const p={begin:k,end:S};for(const A in x)p[A]=x[A];return this.request(p)}requestFull(k){return this.request(k)}request(k){const S=new XMLHttpRequest,x=this.currXhrId++,p=this.pendingRequests[x]={xhr:S};S.open("GET",this.url),S.withCredentials=this.withCredentials;for(const A in this.httpHeaders){const R=this.httpHeaders[A];R!==void 0&&S.setRequestHeader(A,R)}return this.isHttp&&"begin"in k&&"end"in k?(S.setRequestHeader("Range",`bytes=${k.begin}-${k.end-1}`),p.expectedStatus=j):p.expectedStatus=E,S.responseType="arraybuffer",k.onError&&(S.onerror=function(A){k.onError(S.status)}),S.onreadystatechange=this.onStateChange.bind(this,x),S.onprogress=this.onProgress.bind(this,x),p.onHeadersReceived=k.onHeadersReceived,p.onDone=k.onDone,p.onError=k.onError,p.onProgress=k.onProgress,S.send(null),x}onProgress(k,S){var p;const x=this.pendingRequests[k];x&&((p=x.onProgress)==null||p.call(x,S))}onStateChange(k,S){var v,l,d;const x=this.pendingRequests[k];if(!x)return;const p=x.xhr;if(p.readyState>=2&&x.onHeadersReceived&&(x.onHeadersReceived(),delete x.onHeadersReceived),p.readyState!==4||!(k in this.pendingRequests))return;if(delete this.pendingRequests[k],p.status===0&&this.isHttp){(v=x.onError)==null||v.call(x,p.status);return}const A=p.status||E;if(!(A===E&&x.expectedStatus===j)&&A!==x.expectedStatus){(l=x.onError)==null||l.call(x,p.status);return}const C=at(p);if(A===j){const O=p.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(O);x.onDone({begin:parseInt(b[1],10),chunk:C})}else C?x.onDone({begin:0,chunk:C}):(d=x.onError)==null||d.call(x,p.status)}getRequestXhr(k){return this.pendingRequests[k].xhr}isPendingRequest(k){return k in this.pendingRequests}abortRequest(k){const S=this.pendingRequests[k].xhr;delete this.pendingRequests[k],S.abort()}}class P{constructor(k){this._source=k,this._manager=new I(k.url,{httpHeaders:k.httpHeaders,withCredentials:k.withCredentials}),this._rangeChunkSize=k.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(k){const S=this._rangeRequestReaders.indexOf(k);S>=0&&this._rangeRequestReaders.splice(S,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader}getRangeReader(k,S){const x=new N(this._manager,k,S);return x.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(x),x}cancelAllRequests(k){var S;(S=this._fullRequestReader)==null||S.cancel(k);for(const x of this._rangeRequestReaders.slice(0))x.cancel(k)}}e.PDFNetworkStream=P;class m{constructor(k,S){this._manager=k;const x={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=S.url,this._fullRequestId=k.requestFull(x),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=S.disableRange||!1,this._contentLength=S.length,this._rangeChunkSize=S.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const k=this._fullRequestId,S=this._manager.getRequestXhr(k),x=R=>S.getResponseHeader(R),{allowRangeRequests:p,suggestedLength:A}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});p&&(this._isRangeSupported=!0),this._contentLength=A||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(x),this._isRangeSupported&&this._manager.abortRequest(k),this._headersReceivedCapability.resolve()}_onDone(k){if(k&&(this._requests.length>0?this._requests.shift().resolve({value:k.chunk,done:!1}):this._cachedChunks.push(k.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(k){this._storedError=(0,u.createResponseStatusError)(k,this._url),this._headersReceivedCapability.reject(this._storedError);for(const S of this._requests)S.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(k){var S;(S=this.onProgress)==null||S.call(this,{loaded:k.loaded,total:k.lengthComputable?k.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const k=new n.PromiseCapability;return this._requests.push(k),k.promise}cancel(k){this._done=!0,this._headersReceivedCapability.reject(k);for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class N{constructor(k,S,x){this._manager=k;const p={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=k.url,this._requestId=k.requestRange(S,x,p),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var k;(k=this.onClosed)==null||k.call(this,this)}_onDone(k){const S=k.chunk;this._requests.length>0?this._requests.shift().resolve({value:S,done:!1}):this._queuedChunk=S,this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(k){this._storedError=(0,u.createResponseStatusError)(k,this._url);for(const S of this._requests)S.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(k){var S;this.isStreamingSupported||(S=this.onProgress)==null||S.call(this,{loaded:k.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const S=this._queuedChunk;return this._queuedChunk=null,{value:S,done:!1}}if(this._done)return{value:void 0,done:!0};const k=new n.PromiseCapability;return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=M(1),u=M(20);const E=/^file:\/\/\/[a-zA-Z]:\//;function j(x){const p=require$$5,A=p.parse(x);return A.protocol==="file:"||A.host?A:/^[a-z]:[/\\]/i.test(x)?p.parse(`file:///${x}`):(A.host||(A.protocol="file:"),A)}class at{constructor(p){this.source=p,this.url=j(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new k(this):new N(this),this._fullRequestReader}getRangeReader(p,A){if(A<=this._progressiveDataLength)return null;const R=this.isFsUrl?new S(this,p,A):new B(this,p,A);return this._rangeRequestReaders.push(R),R}cancelAllRequests(p){var A;(A=this._fullRequestReader)==null||A.cancel(p);for(const R of this._rangeRequestReaders.slice(0))R.cancel(p)}}e.PDFNodeStream=at;class I{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const A=p.source;this._contentLength=A.length,this._loaded=0,this._filename=null,this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var R;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=p.length,(R=this.onProgress)==null||R.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",A=>{this._error(A)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class P{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const A=p.source;this._isStreamingSupported=!A.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var R;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=p.length,(R=this.onProgress)==null||R.call(this,{loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",A=>{this._error(A)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function m(x,p){return{protocol:x.protocol,auth:x.auth,host:x.hostname,port:x.port,path:x.path,method:"GET",headers:p}}class N extends I{constructor(p){super(p);const A=R=>{if(R.statusCode===404){const d=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(R);const C=d=>this._readableStream.headers[d.toLowerCase()],{allowRangeRequests:v,suggestedLength:l}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=v,this._contentLength=l||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(C)};if(this._request=null,this._url.protocol==="http:"){const R=require$$5;this._request=R.request(m(this._url,p.httpHeaders),A)}else{const R=require$$5;this._request=R.request(m(this._url,p.httpHeaders),A)}this._request.on("error",R=>{this._storedError=R,this._headersCapability.reject(R)}),this._request.end()}}class B extends P{constructor(p,A,R){super(p),this._httpHeaders={};for(const v in p.httpHeaders){const l=p.httpHeaders[v];l!==void 0&&(this._httpHeaders[v]=l)}this._httpHeaders.Range=`bytes=${A}-${R-1}`;const C=v=>{if(v.statusCode===404){const l=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(v)};if(this._request=null,this._url.protocol==="http:"){const v=require$$5;this._request=v.request(m(this._url,this._httpHeaders),C)}else{const v=require$$5;this._request=v.request(m(this._url,this._httpHeaders),C)}this._request.on("error",v=>{this._storedError=v}),this._request.end()}}class k extends I{constructor(p){super(p);let A=decodeURIComponent(this._url.path);E.test(this._url.href)&&(A=A.replace(/^\//,""));const R=require$$5;R.lstat(A,(C,v)=>{if(C){C.code==="ENOENT"&&(C=new n.MissingPDFException(`Missing PDF "${A}".`)),this._storedError=C,this._headersCapability.reject(C);return}this._contentLength=v.size,this._setReadableStream(R.createReadStream(A)),this._headersCapability.resolve()})}}class S extends P{constructor(p,A,R){super(p);let C=decodeURIComponent(this._url.path);E.test(this._url.href)&&(C=C.replace(/^\//,""));const v=require$$5;this._setReadableStream(v.createReadStream(C,{start:A,end:R-1}))}}},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=M(6),u=M(1);const E={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},j="http://www.w3.org/XML/1998/namespace",at="http://www.w3.org/1999/xlink",I=["butt","round","square"],P=["miter","round","bevel"],m=function(v,l="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([v],{type:l}));const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let b=`data:${l};base64,`;for(let c=0,F=v.length;c<F;c+=3){const g=v[c]&255,$=v[c+1]&255,q=v[c+2]&255,w=g>>2,Y=(g&3)<<4|$>>4,it=c+1<F?($&15)<<2|q>>6:64,ct=c+2<F?q&63:64;b+=O[w]+O[Y]+O[it]+O[ct]}return b},N=function(){const v=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,d=new Int32Array(256);for(let q=0;q<256;q++){let w=q;for(let Y=0;Y<8;Y++)w=w&1?3988292384^w>>1&2147483647:w>>1&2147483647;d[q]=w}function O(q,w,Y){let it=-1;for(let ct=w;ct<Y;ct++){const V=(it^q[ct])&255,dt=d[V];it=it>>>8^dt}return it^-1}function b(q,w,Y,it){let ct=it;const V=w.length;Y[ct]=V>>24&255,Y[ct+1]=V>>16&255,Y[ct+2]=V>>8&255,Y[ct+3]=V&255,ct+=4,Y[ct]=q.charCodeAt(0)&255,Y[ct+1]=q.charCodeAt(1)&255,Y[ct+2]=q.charCodeAt(2)&255,Y[ct+3]=q.charCodeAt(3)&255,ct+=4,Y.set(w,ct),ct+=w.length;const dt=O(Y,it+4,ct);Y[ct]=dt>>24&255,Y[ct+1]=dt>>16&255,Y[ct+2]=dt>>8&255,Y[ct+3]=dt&255}function c(q,w,Y){let it=1,ct=0;for(let V=w;V<Y;++V)it=(it+(q[V]&255))%65521,ct=(ct+it)%65521;return ct<<16|it}function F(q){if(!u.isNodeJS)return g(q);try{const w=parseInt(process.versions.node)>=8?q:Buffer.from(q),Y=require$$5.deflateSync(w,{level:9});return Y instanceof Uint8Array?Y:new Uint8Array(Y)}catch(w){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+w)}return g(q)}function g(q){let w=q.length;const Y=65535,it=Math.ceil(w/Y),ct=new Uint8Array(2+w+it*5+4);let V=0;ct[V++]=120,ct[V++]=156;let dt=0;for(;w>Y;)ct[V++]=0,ct[V++]=255,ct[V++]=255,ct[V++]=0,ct[V++]=0,ct.set(q.subarray(dt,dt+Y),V),V+=Y,dt+=Y,w-=Y;ct[V++]=1,ct[V++]=w&255,ct[V++]=w>>8&255,ct[V++]=~w&65535&255,ct[V++]=(~w&65535)>>8&255,ct.set(q.subarray(dt),V),V+=q.length-dt;const bt=c(q,0,q.length);return ct[V++]=bt>>24&255,ct[V++]=bt>>16&255,ct[V++]=bt>>8&255,ct[V++]=bt&255,ct}function $(q,w,Y,it){const ct=q.width,V=q.height;let dt,bt,St;const Tt=q.data;switch(w){case u.ImageKind.GRAYSCALE_1BPP:bt=0,dt=1,St=ct+7>>3;break;case u.ImageKind.RGB_24BPP:bt=2,dt=8,St=ct*3;break;case u.ImageKind.RGBA_32BPP:bt=6,dt=8,St=ct*4;break;default:throw new Error("invalid format")}const L=new Uint8Array((1+St)*V);let i=0,o=0;for(let W=0;W<V;++W)L[i++]=0,L.set(Tt.subarray(o,o+St),i),o+=St,i+=St;if(w===u.ImageKind.GRAYSCALE_1BPP&&it){i=0;for(let W=0;W<V;W++){i++;for(let st=0;st<St;st++)L[i++]^=255}}const a=new Uint8Array([ct>>24&255,ct>>16&255,ct>>8&255,ct&255,V>>24&255,V>>16&255,V>>8&255,V&255,dt,bt,0,0,0]),h=F(L),f=v.length+l*3+a.length+h.length,T=new Uint8Array(f);let D=0;return T.set(v,D),D+=v.length,b("IHDR",a,T,D),D+=l+a.length,b("IDATA",h,T,D),D+=l+h.length,b("IEND",new Uint8Array(0),T,D),m(T,"image/png",Y)}return function(w,Y,it){const ct=w.kind===void 0?u.ImageKind.GRAYSCALE_1BPP:w.kind;return $(w,ct,Y,it)}}();class B{constructor(){this.fontSizeScale=1,this.fontWeight=E.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=E.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(l,d){this.x=l,this.y=d}}function k(v){let l=[];const d=[];for(const O of v){if(O.fn==="save"){l.push({fnId:92,fn:"group",items:[]}),d.push(l),l=l.at(-1).items;continue}O.fn==="restore"?l=d.pop():l.push(O)}return l}function S(v){if(Number.isInteger(v))return v.toString();const l=v.toFixed(10);let d=l.length-1;if(l[d]!=="0")return l;do d--;while(l[d]==="0");return l.substring(0,l[d]==="."?d:d+1)}function x(v){if(v[4]===0&&v[5]===0){if(v[1]===0&&v[2]===0)return v[0]===1&&v[3]===1?"":`scale(${S(v[0])} ${S(v[3])})`;if(v[0]===v[3]&&v[1]===-v[2]){const l=Math.acos(v[0])*180/Math.PI;return`rotate(${S(l)})`}}else if(v[0]===1&&v[1]===0&&v[2]===0&&v[3]===1)return`translate(${S(v[4])} ${S(v[5])})`;return`matrix(${S(v[0])} ${S(v[1])} ${S(v[2])} ${S(v[3])} ${S(v[4])} ${S(v[5])})`}let p=0,A=0,R=0;class C{constructor(l,d,O=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new B,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=l,this.objs=d,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!O,this._operatorIdMapping=[];for(const b in u.OPS)this._operatorIdMapping[u.OPS[b]]=b}getObject(l,d=null){return typeof l=="string"?l.startsWith("g_")?this.commonObjs.get(l):this.objs.get(l):d}save(){this.transformStack.push(this.transformMatrix);const l=this.current;this.extraStack.push(l),this.current=l.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(l){this.save(),this.executeOpTree(l),this.restore()}loadDependencies(l){const d=l.fnArray,O=l.argsArray;for(let b=0,c=d.length;b<c;b++)if(d[b]===u.OPS.dependency)for(const F of O[b]){const g=F.startsWith("g_")?this.commonObjs:this.objs,$=new Promise(q=>{g.get(F,q)});this.current.dependencies.push($)}return Promise.all(this.current.dependencies)}transform(l,d,O,b,c,F){const g=[l,d,O,b,c,F];this.transformMatrix=u.Util.transform(this.transformMatrix,g),this.tgrp=null}getSVG(l,d){this.viewport=d;const O=this._initialize(d);return this.loadDependencies(l).then(()=>(this.transformMatrix=u.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(l)),O))}convertOpList(l){const d=this._operatorIdMapping,O=l.argsArray,b=l.fnArray,c=[];for(let F=0,g=b.length;F<g;F++){const $=b[F];c.push({fnId:$,fn:d[$],args:O[F]})}return k(c)}executeOpTree(l){for(const d of l){const O=d.fn,b=d.fnId,c=d.args;switch(b|0){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(c);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case u.OPS.setFont:this.setFont(c);break;case u.OPS.showText:this.showText(c[0]);break;case u.OPS.showSpacedText:this.showText(c[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(c[0],c[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case u.OPS.setHScale:this.setHScale(c[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case u.OPS.setTextRise:this.setTextRise(c[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case u.OPS.setLineWidth:this.setLineWidth(c[0]);break;case u.OPS.setLineJoin:this.setLineJoin(c[0]);break;case u.OPS.setLineCap:this.setLineCap(c[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case u.OPS.setFillColorN:this.setFillColorN(c);break;case u.OPS.shadingFill:this.shadingFill(c[0]);break;case u.OPS.setDash:this.setDash(c[0],c[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case u.OPS.setFlatness:this.setFlatness(c[0]);break;case u.OPS.setGState:this.setGState(c[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case u.OPS.constructPath:this.constructPath(c[0],c[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group(d.items);break;default:(0,u.warn)(`Unimplemented operator ${O}`);break}}}setWordSpacing(l){this.current.wordSpacing=l}setCharSpacing(l){this.current.charSpacing=l}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(l,d,O,b,c,F){const g=this.current;g.textMatrix=g.lineMatrix=[l,d,O,b,c,F],g.textMatrixScale=Math.hypot(l,d),g.x=g.lineX=0,g.y=g.lineY=0,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${S(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",S(-g.y)),g.txtElement=this.svgFactory.createElement("svg:text"),g.txtElement.append(g.tspan)}beginText(){const l=this.current;l.x=l.lineX=0,l.y=l.lineY=0,l.textMatrix=u.IDENTITY_MATRIX,l.lineMatrix=u.IDENTITY_MATRIX,l.textMatrixScale=1,l.tspan=this.svgFactory.createElement("svg:tspan"),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtgrp=this.svgFactory.createElement("svg:g"),l.xcoords=[],l.ycoords=[]}moveText(l,d){const O=this.current;O.x=O.lineX+=l,O.y=O.lineY+=d,O.xcoords=[],O.ycoords=[],O.tspan=this.svgFactory.createElement("svg:tspan"),O.tspan.setAttributeNS(null,"font-family",O.fontFamily),O.tspan.setAttributeNS(null,"font-size",`${S(O.fontSize)}px`),O.tspan.setAttributeNS(null,"y",S(-O.y))}showText(l){const d=this.current,O=d.font,b=d.fontSize;if(b===0)return;const c=d.fontSizeScale,F=d.charSpacing,g=d.wordSpacing,$=d.fontDirection,q=d.textHScale*$,w=O.vertical,Y=w?1:-1,it=O.defaultVMetrics,ct=b*d.fontMatrix[0];let V=0;for(const St of l){if(St===null){V+=$*g;continue}else if(typeof St=="number"){V+=Y*St*b/1e3;continue}const Tt=(St.isSpace?g:0)+F,L=St.fontChar;let i,o,a=St.width;if(w){let f;const T=St.vmetric||it;f=St.vmetric?T[1]:a*.5,f=-f*ct;const D=T[2]*ct;a=T?-T[0]:a,i=f/c,o=(V+D)/c}else i=V/c,o=0;(St.isInFont||O.missingFile)&&(d.xcoords.push(d.x+i),w&&d.ycoords.push(-d.y+o),d.tspan.textContent+=L);const h=w?a*ct-Tt*$:a*ct+Tt*$;V+=h}d.tspan.setAttributeNS(null,"x",d.xcoords.map(S).join(" ")),w?d.tspan.setAttributeNS(null,"y",d.ycoords.map(S).join(" ")):d.tspan.setAttributeNS(null,"y",S(-d.y)),w?d.y-=V:d.x+=V*q,d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${S(d.fontSize)}px`),d.fontStyle!==E.fontStyle&&d.tspan.setAttributeNS(null,"font-style",d.fontStyle),d.fontWeight!==E.fontWeight&&d.tspan.setAttributeNS(null,"font-weight",d.fontWeight);const dt=d.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(dt===u.TextRenderingMode.FILL||dt===u.TextRenderingMode.FILL_STROKE?(d.fillColor!==E.fillColor&&d.tspan.setAttributeNS(null,"fill",d.fillColor),d.fillAlpha<1&&d.tspan.setAttributeNS(null,"fill-opacity",d.fillAlpha)):d.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?d.tspan.setAttributeNS(null,"fill","transparent"):d.tspan.setAttributeNS(null,"fill","none"),dt===u.TextRenderingMode.STROKE||dt===u.TextRenderingMode.FILL_STROKE){const St=1/(d.textMatrixScale||1);this._setStrokeAttributes(d.tspan,St)}let bt=d.textMatrix;d.textRise!==0&&(bt=bt.slice(),bt[5]+=d.textRise),d.txtElement.setAttributeNS(null,"transform",`${x(bt)} scale(${S(q)}, -1)`),d.txtElement.setAttributeNS(j,"xml:space","preserve"),d.txtElement.append(d.tspan),d.txtgrp.append(d.txtElement),this._ensureTransformGroup().append(d.txtElement)}setLeadingMoveText(l,d){this.setLeading(-d),this.moveText(l,d)}addFontStyle(l){if(!l.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const d=m(l.data,l.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${l.loadedName}"; src: url(${d}); }
`}setFont(l){const d=this.current,O=this.commonObjs.get(l[0]);let b=l[1];d.font=O,this.embedFonts&&!O.missingFile&&!this.embeddedFonts[O.loadedName]&&(this.addFontStyle(O),this.embeddedFonts[O.loadedName]=O),d.fontMatrix=O.fontMatrix||u.FONT_IDENTITY_MATRIX;let c="normal";O.black?c="900":O.bold&&(c="bold");const F=O.italic?"italic":"normal";b<0?(b=-b,d.fontDirection=-1):d.fontDirection=1,d.fontSize=b,d.fontFamily=O.loadedName,d.fontWeight=c,d.fontStyle=F,d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"y",S(-d.y)),d.xcoords=[],d.ycoords=[]}endText(){var d;const l=this.current;l.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&((d=l.txtElement)!=null&&d.hasChildNodes())&&(l.element=l.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(l){l>0&&(this.current.lineWidth=l)}setLineCap(l){this.current.lineCap=I[l]}setLineJoin(l){this.current.lineJoin=P[l]}setMiterLimit(l){this.current.miterLimit=l}setStrokeAlpha(l){this.current.strokeAlpha=l}setStrokeRGBColor(l,d,O){this.current.strokeColor=u.Util.makeHexColor(l,d,O)}setFillAlpha(l){this.current.fillAlpha=l}setFillRGBColor(l,d,O){this.current.fillColor=u.Util.makeHexColor(l,d,O),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(l){this.current.strokeColor=this._makeColorN_Pattern(l)}setFillColorN(l){this.current.fillColor=this._makeColorN_Pattern(l)}shadingFill(l){const{width:d,height:O}=this.viewport,b=u.Util.inverseTransform(this.transformMatrix),[c,F,g,$]=u.Util.getAxialAlignedBoundingBox([0,0,d,O],b),q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x",c),q.setAttributeNS(null,"y",F),q.setAttributeNS(null,"width",g-c),q.setAttributeNS(null,"height",$-F),q.setAttributeNS(null,"fill",this._makeShadingPattern(l)),this.current.fillAlpha<1&&q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(q)}_makeColorN_Pattern(l){return l[0]==="TilingPattern"?this._makeTilingPattern(l):this._makeShadingPattern(l)}_makeTilingPattern(l){const d=l[1],O=l[2],b=l[3]||u.IDENTITY_MATRIX,[c,F,g,$]=l[4],q=l[5],w=l[6],Y=l[7],it=`shading${R++}`,[ct,V,dt,bt]=u.Util.normalizeRect([...u.Util.applyTransform([c,F],b),...u.Util.applyTransform([g,$],b)]),[St,Tt]=u.Util.singularValueDecompose2dScale(b),L=q*St,i=w*Tt,o=this.svgFactory.createElement("svg:pattern");o.setAttributeNS(null,"id",it),o.setAttributeNS(null,"patternUnits","userSpaceOnUse"),o.setAttributeNS(null,"width",L),o.setAttributeNS(null,"height",i),o.setAttributeNS(null,"x",`${ct}`),o.setAttributeNS(null,"y",`${V}`);const a=this.svg,h=this.transformMatrix,f=this.current.fillColor,T=this.current.strokeColor,D=this.svgFactory.create(dt-ct,bt-V);if(this.svg=D,this.transformMatrix=b,Y===2){const W=u.Util.makeHexColor(...d);this.current.fillColor=W,this.current.strokeColor=W}return this.executeOpTree(this.convertOpList(O)),this.svg=a,this.transformMatrix=h,this.current.fillColor=f,this.current.strokeColor=T,o.append(D.childNodes[0]),this.defs.append(o),`url(#${it})`}_makeShadingPattern(l){switch(typeof l=="string"&&(l=this.objs.get(l)),l[0]){case"RadialAxial":const d=`shading${R++}`,O=l[3];let b;switch(l[1]){case"axial":const c=l[4],F=l[5];b=this.svgFactory.createElement("svg:linearGradient"),b.setAttributeNS(null,"id",d),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"x1",c[0]),b.setAttributeNS(null,"y1",c[1]),b.setAttributeNS(null,"x2",F[0]),b.setAttributeNS(null,"y2",F[1]);break;case"radial":const g=l[4],$=l[5],q=l[6],w=l[7];b=this.svgFactory.createElement("svg:radialGradient"),b.setAttributeNS(null,"id",d),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"cx",$[0]),b.setAttributeNS(null,"cy",$[1]),b.setAttributeNS(null,"r",w),b.setAttributeNS(null,"fx",g[0]),b.setAttributeNS(null,"fy",g[1]),b.setAttributeNS(null,"fr",q);break;default:throw new Error(`Unknown RadialAxial type: ${l[1]}`)}for(const c of O){const F=this.svgFactory.createElement("svg:stop");F.setAttributeNS(null,"offset",c[0]),F.setAttributeNS(null,"stop-color",c[1]),b.append(F)}return this.defs.append(b),`url(#${d})`;case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${l[0]}`)}}setDash(l,d){this.current.dashArray=l,this.current.dashPhase=d}constructPath(l,d){const O=this.current;let b=O.x,c=O.y,F=[],g=0;for(const $ of l)switch($|0){case u.OPS.rectangle:b=d[g++],c=d[g++];const q=d[g++],w=d[g++],Y=b+q,it=c+w;F.push("M",S(b),S(c),"L",S(Y),S(c),"L",S(Y),S(it),"L",S(b),S(it),"Z");break;case u.OPS.moveTo:b=d[g++],c=d[g++],F.push("M",S(b),S(c));break;case u.OPS.lineTo:b=d[g++],c=d[g++],F.push("L",S(b),S(c));break;case u.OPS.curveTo:b=d[g+4],c=d[g+5],F.push("C",S(d[g]),S(d[g+1]),S(d[g+2]),S(d[g+3]),S(b),S(c)),g+=6;break;case u.OPS.curveTo2:F.push("C",S(b),S(c),S(d[g]),S(d[g+1]),S(d[g+2]),S(d[g+3])),b=d[g+2],c=d[g+3],g+=4;break;case u.OPS.curveTo3:b=d[g+2],c=d[g+3],F.push("C",S(d[g]),S(d[g+1]),S(b),S(c),S(b),S(c)),g+=4;break;case u.OPS.closePath:F.push("Z");break}F=F.join(" "),O.path&&l.length>0&&l[0]!==u.OPS.rectangle&&l[0]!==u.OPS.moveTo?F=O.path.getAttributeNS(null,"d")+F:(O.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(O.path)),O.path.setAttributeNS(null,"d",F),O.path.setAttributeNS(null,"fill","none"),O.element=O.path,O.setCurrentPoint(b,c)}endPath(){const l=this.current;if(l.path=null,!this.pendingClip)return;if(!l.element){this.pendingClip=null;return}const d=`clippath${p++}`,O=this.svgFactory.createElement("svg:clipPath");O.setAttributeNS(null,"id",d),O.setAttributeNS(null,"transform",x(this.transformMatrix));const b=l.element.cloneNode(!0);if(this.pendingClip==="evenodd"?b.setAttributeNS(null,"clip-rule","evenodd"):b.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,O.append(b),this.defs.append(O),l.activeClipUrl){l.clipGroup=null;for(const c of this.extraStack)c.clipGroup=null;O.setAttributeNS(null,"clip-path",l.activeClipUrl)}l.activeClipUrl=`url(#${d})`,this.tgrp=null}clip(l){this.pendingClip=l}closePath(){const l=this.current;if(l.path){const d=`${l.path.getAttributeNS(null,"d")}Z`;l.path.setAttributeNS(null,"d",d)}}setLeading(l){this.current.leading=-l}setTextRise(l){this.current.textRise=l}setTextRenderingMode(l){this.current.textRenderingMode=l}setHScale(l){this.current.textHScale=l/100}setRenderingIntent(l){}setFlatness(l){}setGState(l){for(const[d,O]of l)switch(d){case"LW":this.setLineWidth(O);break;case"LC":this.setLineCap(O);break;case"LJ":this.setLineJoin(O);break;case"ML":this.setMiterLimit(O);break;case"D":this.setDash(O[0],O[1]);break;case"RI":this.setRenderingIntent(O);break;case"FL":this.setFlatness(O);break;case"Font":this.setFont(O);break;case"CA":this.setStrokeAlpha(O);break;case"ca":this.setFillAlpha(O);break;default:(0,u.warn)(`Unimplemented graphic state operator ${d}`);break}}fill(){const l=this.current;l.element&&(l.element.setAttributeNS(null,"fill",l.fillColor),l.element.setAttributeNS(null,"fill-opacity",l.fillAlpha),this.endPath())}stroke(){const l=this.current;l.element&&(this._setStrokeAttributes(l.element),l.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(l,d=1){const O=this.current;let b=O.dashArray;d!==1&&b.length>0&&(b=b.map(function(c){return d*c})),l.setAttributeNS(null,"stroke",O.strokeColor),l.setAttributeNS(null,"stroke-opacity",O.strokeAlpha),l.setAttributeNS(null,"stroke-miterlimit",S(O.miterLimit)),l.setAttributeNS(null,"stroke-linecap",O.lineCap),l.setAttributeNS(null,"stroke-linejoin",O.lineJoin),l.setAttributeNS(null,"stroke-width",S(d*O.lineWidth)+"px"),l.setAttributeNS(null,"stroke-dasharray",b.map(S).join(" ")),l.setAttributeNS(null,"stroke-dashoffset",S(d*O.dashPhase)+"px")}eoFill(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width","1px"),l.setAttributeNS(null,"height","1px"),l.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(l)}paintImageXObject(l){const d=this.getObject(l);if(!d){(0,u.warn)(`Dependent image with object ID ${l} is not ready yet`);return}this.paintInlineImageXObject(d)}paintInlineImageXObject(l,d){const O=l.width,b=l.height,c=N(l,this.forceDataSchema,!!d),F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y","0"),F.setAttributeNS(null,"width",S(O)),F.setAttributeNS(null,"height",S(b)),this.current.element=F,this.clip("nonzero");const g=this.svgFactory.createElement("svg:image");g.setAttributeNS(at,"xlink:href",c),g.setAttributeNS(null,"x","0"),g.setAttributeNS(null,"y",S(-b)),g.setAttributeNS(null,"width",S(O)+"px"),g.setAttributeNS(null,"height",S(b)+"px"),g.setAttributeNS(null,"transform",`scale(${S(1/O)} ${S(-1/b)})`),d?d.append(g):this._ensureTransformGroup().append(g)}paintImageMaskXObject(l){const d=this.getObject(l.data,l);if(d.bitmap){(0,u.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const O=this.current,b=d.width,c=d.height,F=O.fillColor;O.maskId=`mask${A++}`;const g=this.svgFactory.createElement("svg:mask");g.setAttributeNS(null,"id",O.maskId);const $=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",S(b)),$.setAttributeNS(null,"height",S(c)),$.setAttributeNS(null,"fill",F),$.setAttributeNS(null,"mask",`url(#${O.maskId})`),this.defs.append(g),this._ensureTransformGroup().append($),this.paintInlineImageXObject(d,g)}paintFormXObjectBegin(l,d){if(Array.isArray(l)&&l.length===6&&this.transform(l[0],l[1],l[2],l[3],l[4],l[5]),d){const O=d[2]-d[0],b=d[3]-d[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",d[0]),c.setAttributeNS(null,"y",d[1]),c.setAttributeNS(null,"width",S(O)),c.setAttributeNS(null,"height",S(b)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(l){const d=this.svgFactory.create(l.width,l.height),O=this.svgFactory.createElement("svg:defs");d.append(O),this.defs=O;const b=this.svgFactory.createElement("svg:g");return b.setAttributeNS(null,"transform",x(l.transform)),d.append(b),this.svg=b,d}_ensureClipGroup(){if(!this.current.clipGroup){const l=this.svgFactory.createElement("svg:g");l.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(l),this.current.clipGroup=l}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",x(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=C},(_,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class M{static textContent(u){const E=[],j={items:E,styles:Object.create(null)};function at(I){var N;if(!I)return;let P=null;const m=I.name;if(m==="#text")P=I.value;else if(M.shouldBuildText(m))(N=I==null?void 0:I.attributes)!=null&&N.textContent?P=I.attributes.textContent:I.value&&(P=I.value);else return;if(P!==null&&E.push({str:P}),!!I.children)for(const B of I.children)at(B)}return at(u),j}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}e.XfaText=M},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=x,e.updateTextLayer=p;var n=M(1),u=M(6);const E=1e5,j=30,at=.8,I=new Map;function P(A,R){let C;if(R&&n.FeatureTest.isOffscreenCanvasSupported)C=new OffscreenCanvas(A,A).getContext("2d",{alpha:!1});else{const v=document.createElement("canvas");v.width=v.height=A,C=v.getContext("2d",{alpha:!1})}return C}function m(A,R){const C=I.get(A);if(C)return C;const v=P(j,R);v.font=`${j}px ${A}`;const l=v.measureText("");let d=l.fontBoundingBoxAscent,O=Math.abs(l.fontBoundingBoxDescent);if(d){const c=d/(d+O);return I.set(A,c),v.canvas.width=v.canvas.height=0,c}v.strokeStyle="red",v.clearRect(0,0,j,j),v.strokeText("g",0,0);let b=v.getImageData(0,0,j,j).data;O=0;for(let c=b.length-1-3;c>=0;c-=4)if(b[c]>0){O=Math.ceil(c/4/j);break}v.clearRect(0,0,j,j),v.strokeText("A",0,j),b=v.getImageData(0,0,j,j).data,d=0;for(let c=0,F=b.length;c<F;c+=4)if(b[c]>0){d=j-Math.floor(c/4/j);break}if(v.canvas.width=v.canvas.height=0,d){const c=d/(d+O);return I.set(A,c),c}return I.set(A,at),at}function N(A,R,C){const v=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:R.str!=="",hasEOL:R.hasEOL,fontSize:0};A._textDivs.push(v);const d=n.Util.transform(A._transform,R.transform);let O=Math.atan2(d[1],d[0]);const b=C[R.fontName];b.vertical&&(O+=Math.PI/2);const c=Math.hypot(d[2],d[3]),F=c*m(b.fontFamily,A._isOffscreenCanvasSupported);let g,$;O===0?(g=d[4],$=d[5]-F):(g=d[4]+F*Math.sin(O),$=d[5]-F*Math.cos(O));const q="calc(var(--scale-factor)*",w=v.style;A._container===A._rootContainer?(w.left=`${(100*g/A._pageWidth).toFixed(2)}%`,w.top=`${(100*$/A._pageHeight).toFixed(2)}%`):(w.left=`${q}${g.toFixed(2)}px)`,w.top=`${q}${$.toFixed(2)}px)`),w.fontSize=`${q}${c.toFixed(2)}px)`,w.fontFamily=b.fontFamily,l.fontSize=c,v.setAttribute("role","presentation"),v.textContent=R.str,v.dir=R.dir,A._fontInspectorEnabled&&(v.dataset.fontName=R.fontName),O!==0&&(l.angle=O*(180/Math.PI));let Y=!1;if(R.str.length>1)Y=!0;else if(R.str!==" "&&R.transform[0]!==R.transform[3]){const it=Math.abs(R.transform[0]),ct=Math.abs(R.transform[3]);it!==ct&&Math.max(it,ct)/Math.min(it,ct)>1.5&&(Y=!0)}Y&&(l.canvasWidth=b.vertical?R.height:R.width),A._textDivProperties.set(v,l),A._isReadableStream&&A._layoutText(v)}function B(A){const{div:R,scale:C,properties:v,ctx:l,prevFontSize:d,prevFontFamily:O}=A,{style:b}=R;let c="";if(v.canvasWidth!==0&&v.hasText){const{fontFamily:F}=b,{canvasWidth:g,fontSize:$}=v;(d!==$||O!==F)&&(l.font=`${$*C}px ${F}`,A.prevFontSize=$,A.prevFontFamily=F);const{width:q}=l.measureText(R.textContent);q>0&&(c=`scaleX(${g*C/q})`)}v.angle!==0&&(c=`rotate(${v.angle}deg) ${c}`),c.length>0&&(b.transform=c)}function k(A){if(A._canceled)return;const R=A._textDivs,C=A._capability;if(R.length>E){C.resolve();return}if(!A._isReadableStream)for(const l of R)A._layoutText(l);C.resolve()}class S{constructor({textContentSource:R,container:C,viewport:v,textDivs:l,textDivProperties:d,textContentItemsStr:O,isOffscreenCanvasSupported:b}){var q;this._textContentSource=R,this._isReadableStream=R instanceof ReadableStream,this._container=this._rootContainer=C,this._textDivs=l||[],this._textContentItemsStr=O||[],this._isOffscreenCanvasSupported=b,this._fontInspectorEnabled=!!((q=globalThis.FontInspector)!=null&&q.enabled),this._reader=null,this._textDivProperties=d||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:v.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:P(0,b)};const{pageWidth:c,pageHeight:F,pageX:g,pageY:$}=v.rawDims;this._transform=[1,0,0,-1,-g,$+F],this._pageWidth=c,this._pageHeight=F,(0,u.setLayerDimensions)(C,v),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(R,C){for(const v of R){if(v.str===void 0){if(v.type==="beginMarkedContentProps"||v.type==="beginMarkedContent"){const l=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),v.id!==null&&this._container.setAttribute("id",`${v.id}`),l.append(this._container)}else v.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(v.str),N(this,v,C)}}_layoutText(R){const C=this._layoutTextParams.properties=this._textDivProperties.get(R);if(this._layoutTextParams.div=R,B(this._layoutTextParams),C.hasText&&this._container.append(R),C.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),this._container.append(v)}}_render(){const R=new n.PromiseCapability;let C=Object.create(null);if(this._isReadableStream){const v=()=>{this._reader.read().then(({value:l,done:d})=>{if(d){R.resolve();return}Object.assign(C,l.styles),this._processItems(l.items,C),v()},R.reject)};this._reader=this._textContentSource.getReader(),v()}else if(this._textContentSource){const{items:v,styles:l}=this._textContentSource;this._processItems(v,l),R.resolve()}else throw new Error('No "textContentSource" parameter specified.');R.promise.then(()=>{C=null,k(this)},this._capability.reject)}}e.TextLayerRenderTask=S;function x(A){!A.textContentSource&&(A.textContent||A.textContentStream)&&((0,u.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),A.textContentSource=A.textContent||A.textContentStream);const{container:R,viewport:C}=A,v=getComputedStyle(R),l=v.getPropertyValue("visibility"),d=parseFloat(v.getPropertyValue("--scale-factor"));l==="visible"&&(!d||Math.abs(d-C.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const O=new S(A);return O._render(),O}function p({container:A,viewport:R,textDivs:C,textDivProperties:v,isOffscreenCanvasSupported:l,mustRotate:d=!0,mustRescale:O=!0}){if(d&&(0,u.setLayerDimensions)(A,{rotation:R.rotation}),O){const b=P(0,l),F={prevFontSize:null,prevFontFamily:null,div:null,scale:R.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b};for(const g of C)F.properties=v.get(g),F.div=g,B(F)}}},(_,e,M)=>{var m,N,B,k,S,x,p,A,R,C,v,nn,d,ke,b,sn,F,rn;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=M(1),u=M(4),E=M(28),j=M(33),at=M(6),I=M(34);const $=class ${constructor({uiManager:w,pageIndex:Y,div:it,accessibilityManager:ct,annotationLayer:V,viewport:dt,l10n:bt}){G(this,v);G(this,d);G(this,b);G(this,F);G(this,m,void 0);G(this,N,!1);G(this,B,null);G(this,k,this.pointerup.bind(this));G(this,S,this.pointerdown.bind(this));G(this,x,new Map);G(this,p,!1);G(this,A,!1);G(this,R,!1);G(this,C,void 0);const St=[E.FreeTextEditor,j.InkEditor,I.StampEditor];if(!$._initialized){$._initialized=!0;for(const Tt of St)Tt.initialize(bt)}w.registerEditorTypes(St),rt(this,C,w),this.pageIndex=Y,this.div=it,rt(this,m,ct),rt(this,B,V),this.viewport=dt,t(this,C).addLayer(this)}get isEmpty(){return t(this,x).size===0}updateToolbar(w){t(this,C).updateToolbar(w)}updateMode(w=t(this,C).getMode()){X(this,F,rn).call(this),w===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),w!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",w===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",w===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",w===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(w){if(!w&&t(this,C).getMode()!==n.AnnotationEditorType.INK)return;if(!w){for(const it of t(this,x).values())if(it.isEmpty()){it.setInBackground();return}}X(this,d,ke).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(w){t(this,C).setEditingState(w)}addCommands(w){t(this,C).addCommands(w)}enable(){this.div.style.pointerEvents="auto";const w=new Set;for(const it of t(this,x).values())it.enableEditing(),it.annotationElementId&&w.add(it.annotationElementId);if(!t(this,B))return;const Y=t(this,B).getEditableAnnotations();for(const it of Y){if(it.hide(),t(this,C).isDeletedAnnotationElement(it.data.id)||w.has(it.data.id))continue;const ct=this.deserialize(it);ct&&(this.addOrRebuild(ct),ct.enableEditing())}}disable(){var Y;rt(this,R,!0),this.div.style.pointerEvents="none";const w=new Set;for(const it of t(this,x).values()){if(it.disableEditing(),!it.annotationElementId||it.serialize()!==null){w.add(it.annotationElementId);continue}(Y=this.getEditableAnnotation(it.annotationElementId))==null||Y.show(),it.remove()}if(t(this,B)){const it=t(this,B).getEditableAnnotations();for(const ct of it){const{id:V}=ct.data;w.has(V)||t(this,C).isDeletedAnnotationElement(V)||ct.show()}}X(this,F,rn).call(this),this.isEmpty&&(this.div.hidden=!0),rt(this,R,!1)}getEditableAnnotation(w){var Y;return((Y=t(this,B))==null?void 0:Y.getEditableAnnotation(w))||null}setActiveEditor(w){t(this,C).getActive()!==w&&t(this,C).setActiveEditor(w)}enableClick(){this.div.addEventListener("pointerdown",t(this,S)),this.div.addEventListener("pointerup",t(this,k))}disableClick(){this.div.removeEventListener("pointerdown",t(this,S)),this.div.removeEventListener("pointerup",t(this,k))}attach(w){t(this,x).set(w.id,w);const{annotationElementId:Y}=w;Y&&t(this,C).isDeletedAnnotationElement(Y)&&t(this,C).removeDeletedAnnotationElement(w)}detach(w){var Y;t(this,x).delete(w.id),(Y=t(this,m))==null||Y.removePointerInTextLayer(w.contentDiv),!t(this,R)&&w.annotationElementId&&t(this,C).addDeletedAnnotationElement(w)}remove(w){this.detach(w),t(this,C).removeEditor(w),w.div.contains(document.activeElement)&&setTimeout(()=>{t(this,C).focusMainContainer()},0),w.div.remove(),w.isAttachedToDOM=!1,t(this,A)||this.addInkEditorIfNeeded(!1)}changeParent(w){var Y;w.parent!==this&&(w.annotationElementId&&(t(this,C).addDeletedAnnotationElement(w.annotationElementId),u.AnnotationEditor.deleteAnnotationElement(w),w.annotationElementId=null),this.attach(w),(Y=w.parent)==null||Y.detach(w),w.setParent(this),w.div&&w.isAttachedToDOM&&(w.div.remove(),this.div.append(w.div)))}add(w){if(this.changeParent(w),t(this,C).addEditor(w),this.attach(w),!w.isAttachedToDOM){const Y=w.render();this.div.append(Y),w.isAttachedToDOM=!0}w.fixAndSetPosition(),w.onceAdded(),t(this,C).addToAnnotationStorage(w)}moveEditorInDOM(w){var it;if(!w.isAttachedToDOM)return;const{activeElement:Y}=document;w.div.contains(Y)&&(w._focusEventsAllowed=!1,setTimeout(()=>{w.div.contains(document.activeElement)?w._focusEventsAllowed=!0:(w.div.addEventListener("focusin",()=>{w._focusEventsAllowed=!0},{once:!0}),Y.focus())},0)),w._structTreeParentId=(it=t(this,m))==null?void 0:it.moveElementInDOM(this.div,w.div,w.contentDiv,!0)}addOrRebuild(w){w.needsToBeRebuilt()?w.rebuild():this.add(w)}addUndoableEditor(w){const Y=()=>w._uiManager.rebuild(w),it=()=>{w.remove()};this.addCommands({cmd:Y,undo:it,mustExec:!1})}getNextId(){return t(this,C).getId()}pasteEditor(w,Y){t(this,C).updateToolbar(w),t(this,C).updateMode(w);const{offsetX:it,offsetY:ct}=X(this,b,sn).call(this),V=this.getNextId(),dt=X(this,v,nn).call(this,{parent:this,id:V,x:it,y:ct,uiManager:t(this,C),isCentered:!0,...Y});dt&&this.add(dt)}deserialize(w){switch(w.annotationType??w.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return E.FreeTextEditor.deserialize(w,this,t(this,C));case n.AnnotationEditorType.INK:return j.InkEditor.deserialize(w,this,t(this,C));case n.AnnotationEditorType.STAMP:return I.StampEditor.deserialize(w,this,t(this,C))}return null}addNewEditor(){X(this,d,ke).call(this,X(this,b,sn).call(this),!0)}setSelected(w){t(this,C).setSelected(w)}toggleSelected(w){t(this,C).toggleSelected(w)}isSelected(w){return t(this,C).isSelected(w)}unselect(w){t(this,C).unselect(w)}pointerup(w){const{isMac:Y}=n.FeatureTest.platform;if(!(w.button!==0||w.ctrlKey&&Y)&&w.target===this.div&&t(this,p)){if(rt(this,p,!1),!t(this,N)){rt(this,N,!0);return}if(t(this,C).getMode()===n.AnnotationEditorType.STAMP){t(this,C).unselectAll();return}X(this,d,ke).call(this,w,!1)}}pointerdown(w){if(t(this,p)){rt(this,p,!1);return}const{isMac:Y}=n.FeatureTest.platform;if(w.button!==0||w.ctrlKey&&Y||w.target!==this.div)return;rt(this,p,!0);const it=t(this,C).getActive();rt(this,N,!it||it.isEmpty())}findNewParent(w,Y,it){const ct=t(this,C).findParent(Y,it);return ct===null||ct===this?!1:(ct.changeParent(w),!0)}destroy(){var w,Y;((w=t(this,C).getActive())==null?void 0:w.parent)===this&&(t(this,C).commitOrRemove(),t(this,C).setActiveEditor(null));for(const it of t(this,x).values())(Y=t(this,m))==null||Y.removePointerInTextLayer(it.contentDiv),it.setParent(null),it.isAttachedToDOM=!1,it.div.remove();this.div=null,t(this,x).clear(),t(this,C).removeLayer(this)}render({viewport:w}){this.viewport=w,(0,at.setLayerDimensions)(this.div,w);for(const Y of t(this,C).getEditors(this.pageIndex))this.add(Y);this.updateMode()}update({viewport:w}){t(this,C).commitOrRemove(),this.viewport=w,(0,at.setLayerDimensions)(this.div,{rotation:w.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:w,pageHeight:Y}=this.viewport.rawDims;return[w,Y]}};m=new WeakMap,N=new WeakMap,B=new WeakMap,k=new WeakMap,S=new WeakMap,x=new WeakMap,p=new WeakMap,A=new WeakMap,R=new WeakMap,C=new WeakMap,v=new WeakSet,nn=function(w){switch(t(this,C).getMode()){case n.AnnotationEditorType.FREETEXT:return new E.FreeTextEditor(w);case n.AnnotationEditorType.INK:return new j.InkEditor(w);case n.AnnotationEditorType.STAMP:return new I.StampEditor(w)}return null},d=new WeakSet,ke=function(w,Y){const it=this.getNextId(),ct=X(this,v,nn).call(this,{parent:this,id:it,x:w.offsetX,y:w.offsetY,uiManager:t(this,C),isCentered:Y});return ct&&this.add(ct),ct},b=new WeakSet,sn=function(){const{x:w,y:Y,width:it,height:ct}=this.div.getBoundingClientRect(),V=Math.max(0,w),dt=Math.max(0,Y),bt=Math.min(window.innerWidth,w+it),St=Math.min(window.innerHeight,Y+ct),Tt=(V+bt)/2-w,L=(dt+St)/2-Y,[i,o]=this.viewport.rotation%180===0?[Tt,L]:[L,Tt];return{offsetX:i,offsetY:o}},F=new WeakSet,rn=function(){rt(this,A,!0);for(const w of t(this,x).values())w.isEmpty()&&w.remove();rt(this,A,!1)},ne($,"_initialized",!1);let P=$;e.AnnotationEditorLayer=P},(_,e,M)=>{var I,P,m,N,B,k,S,x,p,A,Mn,C,Ln,l,In,O,ve,c,an,g,On,q,on;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=M(1),u=M(5),E=M(4),j=M(29);const Y=class Y extends E.AnnotationEditor{constructor(V){super({...V,name:"freeTextEditor"});G(this,A);G(this,C);G(this,l);G(this,O);G(this,c);G(this,g);G(this,q);G(this,I,this.editorDivBlur.bind(this));G(this,P,this.editorDivFocus.bind(this));G(this,m,this.editorDivInput.bind(this));G(this,N,this.editorDivKeydown.bind(this));G(this,B,void 0);G(this,k,"");G(this,S,`${this.id}-editor`);G(this,x,void 0);G(this,p,null);rt(this,B,V.color||Y._defaultColor||E.AnnotationEditor._defaultLineColor),rt(this,x,V.fontSize||Y._defaultFontSize)}static get _keyboardManager(){const V=Y.prototype,dt=Tt=>Tt.isEmpty(),bt=u.AnnotationEditorUIManager.TRANSLATE_SMALL,St=u.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],V.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],V.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],V._translateEmpty,{args:[-bt,0],checker:dt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],V._translateEmpty,{args:[-St,0],checker:dt}],[["ArrowRight","mac+ArrowRight"],V._translateEmpty,{args:[bt,0],checker:dt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],V._translateEmpty,{args:[St,0],checker:dt}],[["ArrowUp","mac+ArrowUp"],V._translateEmpty,{args:[0,-bt],checker:dt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],V._translateEmpty,{args:[0,-St],checker:dt}],[["ArrowDown","mac+ArrowDown"],V._translateEmpty,{args:[0,bt],checker:dt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],V._translateEmpty,{args:[0,St],checker:dt}]]))}static initialize(V){E.AnnotationEditor.initialize(V,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const dt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(dt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(V,dt){switch(V){case n.AnnotationEditorParamsType.FREETEXT_SIZE:Y._defaultFontSize=dt;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:Y._defaultColor=dt;break}}updateParams(V,dt){switch(V){case n.AnnotationEditorParamsType.FREETEXT_SIZE:X(this,A,Mn).call(this,dt);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:X(this,C,Ln).call(this,dt);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,Y._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,Y._defaultColor||E.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,x)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,B)]]}_translateEmpty(V,dt){this._uiManager.translateSelectedEditors(V,dt,!0)}getInitialTranslation(){const V=this.parentScale;return[-Y._internalPadding*V,-(Y._internalPadding+t(this,x))*V]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,N)),this.editorDiv.addEventListener("focus",t(this,P)),this.editorDiv.addEventListener("blur",t(this,I)),this.editorDiv.addEventListener("input",t(this,m)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,S)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,N)),this.editorDiv.removeEventListener("focus",t(this,P)),this.editorDiv.removeEventListener("blur",t(this,I)),this.editorDiv.removeEventListener("input",t(this,m)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(V){this._focusEventsAllowed&&(super.focusin(V),V.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var V;if(this.width){X(this,q,on).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(V=this._initialOptions)!=null&&V.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const V=t(this,k),dt=rt(this,k,X(this,l,In).call(this).trimEnd());if(V===dt)return;const bt=St=>{if(rt(this,k,St),!St){this.remove();return}X(this,c,an).call(this),this._uiManager.rebuild(this),X(this,O,ve).call(this)};this.addCommands({cmd:()=>{bt(dt)},undo:()=>{bt(V)},mustExec:!1}),X(this,O,ve).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(V){this.enterInEditMode()}keydown(V){V.target===this.div&&V.key==="Enter"&&(this.enterInEditMode(),V.preventDefault())}editorDivKeydown(V){Y._keyboardManager.exec(this,V)}editorDivFocus(V){this.isEditing=!0}editorDivBlur(V){this.isEditing=!1}editorDivInput(V){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let V,dt;this.width&&(V=this.x,dt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,S)),this.enableEditing(),E.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(St=>{var Tt;return(Tt=this.editorDiv)==null?void 0:Tt.setAttribute("aria-label",St)}),E.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(St=>{var Tt;return(Tt=this.editorDiv)==null?void 0:Tt.setAttribute("default-content",St)}),this.editorDiv.contentEditable=!0;const{style:bt}=this.editorDiv;if(bt.fontSize=`calc(${t(this,x)}px * var(--scale-factor))`,bt.color=t(this,B),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[St,Tt]=this.parentDimensions;if(this.annotationElementId){const{position:L}=t(this,p);let[i,o]=this.getInitialTranslation();[i,o]=this.pageTranslationToScreen(i,o);const[a,h]=this.pageDimensions,[f,T]=this.pageTranslation;let D,W;switch(this.rotation){case 0:D=V+(L[0]-f)/a,W=dt+this.height-(L[1]-T)/h;break;case 90:D=V+(L[0]-f)/a,W=dt-(L[1]-T)/h,[i,o]=[o,-i];break;case 180:D=V-this.width+(L[0]-f)/a,W=dt-(L[1]-T)/h,[i,o]=[-i,-o];break;case 270:D=V+(L[0]-f-this.height*h)/a,W=dt+(L[1]-T-this.width*a)/h,[i,o]=[-o,i];break}this.setAt(D*St,W*Tt,i,o)}else this.setAt(V*St,dt*Tt,this.width*St,this.height*Tt);X(this,c,an).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(V,dt,bt){let St=null;if(V instanceof j.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:L,fontColor:i},rect:o,rotation:a,id:h},textContent:f,textPosition:T,parent:{page:{pageNumber:D}}}=V;if(!f||f.length===0)return null;St=V={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(i),fontSize:L,value:f.join(`
`),position:T,pageIndex:D-1,rect:o,rotation:a,id:h,deleted:!1}}const Tt=super.deserialize(V,dt,bt);return rt(Tt,x,V.fontSize),rt(Tt,B,n.Util.makeHexColor(...V.color)),rt(Tt,k,V.value),Tt.annotationElementId=V.id||null,rt(Tt,p,St),Tt}serialize(V=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const dt=Y._internalPadding*this.parentScale,bt=this.getRect(dt,dt),St=E.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,B)),Tt={annotationType:n.AnnotationEditorType.FREETEXT,color:St,fontSize:t(this,x),value:t(this,k),pageIndex:this.pageIndex,rect:bt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return V?Tt:this.annotationElementId&&!X(this,g,On).call(this,Tt)?null:(Tt.id=this.annotationElementId,Tt)}};I=new WeakMap,P=new WeakMap,m=new WeakMap,N=new WeakMap,B=new WeakMap,k=new WeakMap,S=new WeakMap,x=new WeakMap,p=new WeakMap,A=new WeakSet,Mn=function(V){const dt=St=>{this.editorDiv.style.fontSize=`calc(${St}px * var(--scale-factor))`,this.translate(0,-(St-t(this,x))*this.parentScale),rt(this,x,St),X(this,O,ve).call(this)},bt=t(this,x);this.addCommands({cmd:()=>{dt(V)},undo:()=>{dt(bt)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},C=new WeakSet,Ln=function(V){const dt=t(this,B);this.addCommands({cmd:()=>{rt(this,B,this.editorDiv.style.color=V)},undo:()=>{rt(this,B,this.editorDiv.style.color=dt)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,In=function(){const V=this.editorDiv.getElementsByTagName("div");if(V.length===0)return this.editorDiv.innerText;const dt=[];for(const bt of V)dt.push(bt.innerText.replace(/\r\n?|\n/,""));return dt.join(`
`)},O=new WeakSet,ve=function(){const[V,dt]=this.parentDimensions;let bt;if(this.isAttachedToDOM)bt=this.div.getBoundingClientRect();else{const{currentLayer:St,div:Tt}=this,L=Tt.style.display;Tt.style.display="hidden",St.div.append(this.div),bt=Tt.getBoundingClientRect(),Tt.remove(),Tt.style.display=L}this.rotation%180===this.parentRotation%180?(this.width=bt.width/V,this.height=bt.height/dt):(this.width=bt.height/V,this.height=bt.width/dt),this.fixAndSetPosition()},c=new WeakSet,an=function(){if(this.editorDiv.replaceChildren(),!!t(this,k))for(const V of t(this,k).split(`
`)){const dt=document.createElement("div");dt.append(V?document.createTextNode(V):document.createElement("br")),this.editorDiv.append(dt)}},g=new WeakSet,On=function(V){const{value:dt,fontSize:bt,color:St,rect:Tt,pageIndex:L}=t(this,p);return V.value!==dt||V.fontSize!==bt||V.rect.some((i,o)=>Math.abs(i-Tt[o])>=1)||V.color.some((i,o)=>i!==St[o])||V.pageIndex!==L},q=new WeakSet,on=function(V=!1){if(!this.annotationElementId)return;if(X(this,O,ve).call(this),!V&&(this.width===0||this.height===0)){setTimeout(()=>X(this,q,on).call(this,!0),0);return}const dt=Y._internalPadding*this.parentScale;t(this,p).rect=this.getRect(dt,dt)},ne(Y,"_freeTextDefaultContent",""),ne(Y,"_internalPadding",0),ne(Y,"_defaultColor",null),ne(Y,"_defaultFontSize",10),ne(Y,"_type","freetext");let at=Y;e.FreeTextEditor=at},(_,e,M)=>{var o,h,he,T,Dn,W,st,tt,ot,ut,gt,ht,Ct,Ot,Et,It,mt,et,nt,pt,wt,Pt,Ut,Nn,Ht,Fe,$t,ln,zt,cn,Z,K,yt,vt,ee,te,Q,hn,Nt,Rt,jt,Bt,jn,At,dn;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var n=M(1),u=M(6),E=M(3),j=M(30),at=M(31),I=M(32);const P=1e3,m=9,N=new WeakSet;function B(Dt){return{width:Dt[2]-Dt[0],height:Dt[3]-Dt[1]}}class k{static create(U){switch(U.data.annotationType){case n.AnnotationType.LINK:return new x(U);case n.AnnotationType.TEXT:return new p(U);case n.AnnotationType.WIDGET:switch(U.data.fieldType){case"Tx":return new R(U);case"Btn":return U.data.radioButton?new l(U):U.data.checkBox?new v(U):new d(U);case"Ch":return new O(U);case"Sig":return new C(U)}return new A(U);case n.AnnotationType.POPUP:return new b(U);case n.AnnotationType.FREETEXT:return new F(U);case n.AnnotationType.LINE:return new g(U);case n.AnnotationType.SQUARE:return new $(U);case n.AnnotationType.CIRCLE:return new q(U);case n.AnnotationType.POLYLINE:return new w(U);case n.AnnotationType.CARET:return new it(U);case n.AnnotationType.INK:return new ct(U);case n.AnnotationType.POLYGON:return new Y(U);case n.AnnotationType.HIGHLIGHT:return new V(U);case n.AnnotationType.UNDERLINE:return new dt(U);case n.AnnotationType.SQUIGGLY:return new bt(U);case n.AnnotationType.STRIKEOUT:return new St(U);case n.AnnotationType.STAMP:return new Tt(U);case n.AnnotationType.FILEATTACHMENT:return new L(U);default:return new S(U)}}}const a=class a{constructor(U,{isRenderable:s=!1,ignoreBorder:y=!1,createQuadrilaterals:H=!1}={}){G(this,o,!1);this.isRenderable=s,this.data=U.data,this.layer=U.layer,this.linkService=U.linkService,this.downloadManager=U.downloadManager,this.imageResourcesPath=U.imageResourcesPath,this.renderForms=U.renderForms,this.svgFactory=U.svgFactory,this.annotationStorage=U.annotationStorage,this.enableScripting=U.enableScripting,this.hasJSActions=U.hasJSActions,this._fieldObjects=U.fieldObjects,this.parent=U.parent,s&&(this.container=this._createContainer(y)),H&&this._createQuadrilaterals()}static _hasPopupData({titleObj:U,contentsObj:s,richText:y}){return!!(U!=null&&U.str||s!=null&&s.str||y!=null&&y.str)}get hasPopupData(){return a._hasPopupData(this.data)}_createContainer(U){const{data:s,parent:{page:y,viewport:H}}=this,z=document.createElement("section");z.setAttribute("data-annotation-id",s.id),this instanceof A||(z.tabIndex=P),z.style.zIndex=this.parent.zIndex++,this.data.popupRef&&z.setAttribute("aria-haspopup","dialog"),s.noRotate&&z.classList.add("norotate");const{pageWidth:J,pageHeight:lt,pageX:_t,pageY:Ft}=H.rawDims;if(!s.rect||this instanceof b){const{rotation:Gt}=s;return!s.hasOwnCanvas&&Gt!==0&&this.setRotation(Gt,z),z}const{width:kt,height:Xt}=B(s.rect),Mt=n.Util.normalizeRect([s.rect[0],y.view[3]-s.rect[1]+y.view[1],s.rect[2],y.view[3]-s.rect[3]+y.view[1]]);if(!U&&s.borderStyle.width>0){z.style.borderWidth=`${s.borderStyle.width}px`;const Gt=s.borderStyle.horizontalCornerRadius,Yt=s.borderStyle.verticalCornerRadius;if(Gt>0||Yt>0){const Zt=`calc(${Gt}px * var(--scale-factor)) / calc(${Yt}px * var(--scale-factor))`;z.style.borderRadius=Zt}else if(this instanceof l){const Zt=`calc(${kt}px * var(--scale-factor)) / calc(${Xt}px * var(--scale-factor))`;z.style.borderRadius=Zt}switch(s.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:z.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:z.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:z.style.borderBottomStyle="solid";break}const Jt=s.borderColor||null;Jt?(rt(this,o,!0),z.style.borderColor=n.Util.makeHexColor(Jt[0]|0,Jt[1]|0,Jt[2]|0)):z.style.borderWidth=0}z.style.left=`${100*(Mt[0]-_t)/J}%`,z.style.top=`${100*(Mt[1]-Ft)/lt}%`;const{rotation:Lt}=s;return s.hasOwnCanvas||Lt===0?(z.style.width=`${100*kt/J}%`,z.style.height=`${100*Xt/lt}%`):this.setRotation(Lt,z),z}setRotation(U,s=this.container){if(!this.data.rect)return;const{pageWidth:y,pageHeight:H}=this.parent.viewport.rawDims,{width:z,height:J}=B(this.data.rect);let lt,_t;U%180===0?(lt=100*z/y,_t=100*J/H):(lt=100*J/y,_t=100*z/H),s.style.width=`${lt}%`,s.style.height=`${_t}%`,s.setAttribute("data-main-rotation",(360-U)%360)}get _commonActions(){const U=(s,y,H)=>{const z=H.detail[s],J=z[0],lt=z.slice(1);H.target.style[y]=j.ColorConverters[`${J}_HTML`](lt),this.annotationStorage.setValue(this.data.id,{[y]:j.ColorConverters[`${J}_rgb`](lt)})};return(0,n.shadow)(this,"_commonActions",{display:s=>{const{display:y}=s.detail,H=y%2===1;this.container.style.visibility=H?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:H,noPrint:y===1||y===2})},print:s=>{this.annotationStorage.setValue(this.data.id,{noPrint:!s.detail.print})},hidden:s=>{const{hidden:y}=s.detail;this.container.style.visibility=y?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:y,noView:y})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.target.disabled=s.detail.readonly},required:s=>{this._setRequired(s.target,s.detail.required)},bgColor:s=>{U("bgColor","backgroundColor",s)},fillColor:s=>{U("fillColor","backgroundColor",s)},fgColor:s=>{U("fgColor","color",s)},textColor:s=>{U("textColor","color",s)},borderColor:s=>{U("borderColor","borderColor",s)},strokeColor:s=>{U("strokeColor","borderColor",s)},rotation:s=>{const y=s.detail.rotation;this.setRotation(y),this.annotationStorage.setValue(this.data.id,{rotation:y})}})}_dispatchEventFromSandbox(U,s){const y=this._commonActions;for(const H of Object.keys(s.detail)){const z=U[H]||y[H];z==null||z(s)}}_setDefaultPropertiesFromJS(U){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const y=this._commonActions;for(const[H,z]of Object.entries(s)){const J=y[H];if(J){const lt={detail:{[H]:z},target:U};J(lt),delete s[H]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:U}=this.data;if(!U)return;const[s,y,H,z]=this.data.rect;if(U.length===1){const[,{x:Yt,y:Jt},{x:Zt,y:ie}]=U[0];if(H===Yt&&z===Jt&&s===Zt&&y===ie)return}const{style:J}=this.container;let lt;if(t(this,o)){const{borderColor:Yt,borderWidth:Jt}=J;J.borderWidth=0,lt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Yt}" stroke-width="${Jt}">`],this.container.classList.add("hasBorder")}const _t=H-s,Ft=z-y,{svgFactory:kt}=this,Xt=kt.createElement("svg");Xt.classList.add("quadrilateralsContainer"),Xt.setAttribute("width",0),Xt.setAttribute("height",0);const Mt=kt.createElement("defs");Xt.append(Mt);const Lt=kt.createElement("clipPath"),Gt=`clippath_${this.data.id}`;Lt.setAttribute("id",Gt),Lt.setAttribute("clipPathUnits","objectBoundingBox"),Mt.append(Lt);for(const[,{x:Yt,y:Jt},{x:Zt,y:ie}]of U){const se=kt.createElement("rect"),re=(Zt-s)/_t,le=(z-Jt)/Ft,ce=(Yt-Zt)/_t,An=(Jt-ie)/Ft;se.setAttribute("x",re),se.setAttribute("y",le),se.setAttribute("width",ce),se.setAttribute("height",An),Lt.append(se),lt==null||lt.push(`<rect vector-effect="non-scaling-stroke" x="${re}" y="${le}" width="${ce}" height="${An}"/>`)}t(this,o)&&(lt.push("</g></svg>')"),J.backgroundImage=lt.join("")),this.container.append(Xt),this.container.style.clipPath=`url(#${Gt})`}_createPopup(){const{container:U,data:s}=this;U.setAttribute("aria-haspopup","dialog");const y=new b({data:{color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,richText:s.richText,parentRect:s.rect,borderStyle:0,id:`popup_${s.id}`,rotation:s.rotation},parent:this.parent,elements:[this]});this.parent.div.append(y.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(U,s=null){const y=[];if(this._fieldObjects){const H=this._fieldObjects[U];if(H)for(const{page:z,id:J,exportValues:lt}of H){if(z===-1||J===s)continue;const _t=typeof lt=="string"?lt:null,Ft=document.querySelector(`[data-element-id="${J}"]`);if(Ft&&!N.has(Ft)){(0,n.warn)(`_getElementsByName - element not allowed: ${J}`);continue}y.push({id:J,exportValue:_t,domElement:Ft})}return y}for(const H of document.getElementsByName(U)){const{exportValue:z}=H,J=H.getAttribute("data-element-id");J!==s&&N.has(H)&&y.push({id:J,exportValue:z,domElement:H})}return y}show(){var U;this.container&&(this.container.hidden=!1),(U=this.popup)==null||U.maybeShow()}hide(){var U;this.container&&(this.container.hidden=!0),(U=this.popup)==null||U.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const U=this.getElementsToTriggerPopup();if(Array.isArray(U))for(const s of U)s.classList.add("highlightArea");else U.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:U,data:{id:s}}=this;this.container.addEventListener("dblclick",()=>{var y;(y=this.linkService.eventBus)==null||y.dispatch("switchannotationeditormode",{source:this,mode:U,editId:s})})}};o=new WeakMap;let S=a;class x extends S{constructor(s,y=null){super(s,{isRenderable:!0,ignoreBorder:!!(y!=null&&y.ignoreBorder),createQuadrilaterals:!0});G(this,h);G(this,T);this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:y}=this,H=document.createElement("a");H.setAttribute("data-element-id",s.id);let z=!1;return s.url?(y.addLinkAttributes(H,s.url,s.newWindow),z=!0):s.action?(this._bindNamedAction(H,s.action),z=!0):s.attachment?(this._bindAttachment(H,s.attachment),z=!0):s.setOCGState?(X(this,T,Dn).call(this,H,s.setOCGState),z=!0):s.dest?(this._bindLink(H,s.dest),z=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(H,s),z=!0),s.resetForm?(this._bindResetFormAction(H,s.resetForm),z=!0):this.isTooltipOnly&&!z&&(this._bindLink(H,""),z=!0)),this.container.classList.add("linkAnnotation"),z&&this.container.append(H),this.container}_bindLink(s,y){s.href=this.linkService.getDestinationHash(y),s.onclick=()=>(y&&this.linkService.goToDestination(y),!1),(y||y==="")&&X(this,h,he).call(this)}_bindNamedAction(s,y){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(y),!1),X(this,h,he).call(this)}_bindAttachment(s,y){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>{var H;return(H=this.downloadManager)==null||H.openOrDownloadData(this.container,y.content,y.filename),!1},X(this,h,he).call(this)}_bindJSAction(s,y){s.href=this.linkService.getAnchorUrl("");const H=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const z of Object.keys(y.actions)){const J=H.get(z);J&&(s[J]=()=>{var lt;return(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y.id,name:z}}),!1})}s.onclick||(s.onclick=()=>!1),X(this,h,he).call(this)}_bindResetFormAction(s,y){const H=s.onclick;if(H||(s.href=this.linkService.getAnchorUrl("")),X(this,h,he).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),H||(s.onclick=()=>!1);return}s.onclick=()=>{var Xt;H==null||H();const{fields:z,refs:J,include:lt}=y,_t=[];if(z.length!==0||J.length!==0){const Mt=new Set(J);for(const Lt of z){const Gt=this._fieldObjects[Lt]||[];for(const{id:Yt}of Gt)Mt.add(Yt)}for(const Lt of Object.values(this._fieldObjects))for(const Gt of Lt)Mt.has(Gt.id)===lt&&_t.push(Gt)}else for(const Mt of Object.values(this._fieldObjects))_t.push(...Mt);const Ft=this.annotationStorage,kt=[];for(const Mt of _t){const{id:Lt}=Mt;switch(kt.push(Lt),Mt.type){case"text":{const Yt=Mt.defaultValue||"";Ft.setValue(Lt,{value:Yt});break}case"checkbox":case"radiobutton":{const Yt=Mt.defaultValue===Mt.exportValues;Ft.setValue(Lt,{value:Yt});break}case"combobox":case"listbox":{const Yt=Mt.defaultValue||"";Ft.setValue(Lt,{value:Yt});break}default:continue}const Gt=document.querySelector(`[data-element-id="${Lt}"]`);if(Gt){if(!N.has(Gt)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Lt}`);continue}}else continue;Gt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Xt=this.linkService.eventBus)==null||Xt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:kt,name:"ResetForm"}})),!1}}}h=new WeakSet,he=function(){this.container.setAttribute("data-internal-link","")},T=new WeakSet,Dn=function(s,y){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(y),!1),X(this,h,he).call(this)};class p extends S{constructor(U){super(U,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const U=document.createElement("img");return U.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",U.alt="[{{type}} Annotation]",U.dataset.l10nId="text_annotation_type",U.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(U),this.container}}class A extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(U){var s;this.data.hasOwnCanvas&&(((s=U.previousSibling)==null?void 0:s.nodeName)==="CANVAS"&&(U.previousSibling.hidden=!0),U.hidden=!1)}_getKeyModifier(U){const{isWin:s,isMac:y}=n.FeatureTest.platform;return s&&U.ctrlKey||y&&U.metaKey}_setEventListener(U,s,y,H,z){y.includes("mouse")?U.addEventListener(y,J=>{var lt;(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:H,value:z(J),shift:J.shiftKey,modifier:this._getKeyModifier(J)}})}):U.addEventListener(y,J=>{var lt;if(y==="blur"){if(!s.focused||!J.relatedTarget)return;s.focused=!1}else if(y==="focus"){if(s.focused)return;s.focused=!0}z&&((lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:H,value:z(J)}}))})}_setEventListeners(U,s,y,H){var z,J,lt;for(const[_t,Ft]of y)(Ft==="Action"||(z=this.data.actions)!=null&&z[Ft])&&((Ft==="Focus"||Ft==="Blur")&&(s||(s={focused:!1})),this._setEventListener(U,s,_t,Ft,H),Ft==="Focus"&&!((J=this.data.actions)!=null&&J.Blur)?this._setEventListener(U,s,"blur","Blur",null):Ft==="Blur"&&!((lt=this.data.actions)!=null&&lt.Focus)&&this._setEventListener(U,s,"focus","Focus",null))}_setBackgroundColor(U){const s=this.data.backgroundColor||null;U.style.backgroundColor=s===null?"transparent":n.Util.makeHexColor(s[0],s[1],s[2])}_setTextStyle(U){const s=["left","center","right"],{fontColor:y}=this.data.defaultAppearanceData,H=this.data.defaultAppearanceData.fontSize||m,z=U.style;let J;const lt=2,_t=Ft=>Math.round(10*Ft)/10;if(this.data.multiLine){const Ft=Math.abs(this.data.rect[3]-this.data.rect[1]-lt),kt=Math.round(Ft/(n.LINE_FACTOR*H))||1,Xt=Ft/kt;J=Math.min(H,_t(Xt/n.LINE_FACTOR))}else{const Ft=Math.abs(this.data.rect[3]-this.data.rect[1]-lt);J=Math.min(H,_t(Ft/n.LINE_FACTOR))}z.fontSize=`calc(${J}px * var(--scale-factor))`,z.color=n.Util.makeHexColor(y[0],y[1],y[2]),this.data.textAlignment!==null&&(z.textAlign=s[this.data.textAlignment])}_setRequired(U,s){s?U.setAttribute("required",!0):U.removeAttribute("required"),U.setAttribute("aria-required",s)}}class R extends A{constructor(U){const s=U.renderForms||!U.data.hasAppearance&&!!U.data.fieldValue;super(U,{isRenderable:s})}setPropertyOnSiblings(U,s,y,H){const z=this.annotationStorage;for(const J of this._getElementsByName(U.name,U.id))J.domElement&&(J.domElement[s]=y),z.setValue(J.id,{[H]:y})}render(){var H,z;const U=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let y=null;if(this.renderForms){const J=U.getValue(s,{value:this.data.fieldValue});let lt=J.value||"";const _t=U.getValue(s,{charLimit:this.data.maxLen}).charLimit;_t&&lt.length>_t&&(lt=lt.slice(0,_t));let Ft=J.formattedValue||((H=this.data.textContent)==null?void 0:H.join(`
`))||null;Ft&&this.data.comb&&(Ft=Ft.replaceAll(/\s+/g,""));const kt={userValue:lt,formattedValue:Ft,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(y=document.createElement("textarea"),y.textContent=Ft??lt,this.data.doNotScroll&&(y.style.overflowY="hidden")):(y=document.createElement("input"),y.type="text",y.setAttribute("value",Ft??lt),this.data.doNotScroll&&(y.style.overflowX="hidden")),this.data.hasOwnCanvas&&(y.hidden=!0),N.add(y),y.setAttribute("data-element-id",s),y.disabled=this.data.readOnly,y.name=this.data.fieldName,y.tabIndex=P,this._setRequired(y,this.data.required),_t&&(y.maxLength=_t),y.addEventListener("input",Mt=>{U.setValue(s,{value:Mt.target.value}),this.setPropertyOnSiblings(y,"value",Mt.target.value,"value"),kt.formattedValue=null}),y.addEventListener("resetform",Mt=>{const Lt=this.data.defaultFieldValue??"";y.value=kt.userValue=Lt,kt.formattedValue=null});let Xt=Mt=>{const{formattedValue:Lt}=kt;Lt!=null&&(Mt.target.value=Lt),Mt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){y.addEventListener("focus",Lt=>{if(kt.focused)return;const{target:Gt}=Lt;kt.userValue&&(Gt.value=kt.userValue),kt.lastCommittedValue=Gt.value,kt.commitKey=1,kt.focused=!0}),y.addEventListener("updatefromsandbox",Lt=>{this.showElementAndHideCanvas(Lt.target);const Gt={value(Yt){kt.userValue=Yt.detail.value??"",U.setValue(s,{value:kt.userValue.toString()}),Yt.target.value=kt.userValue},formattedValue(Yt){const{formattedValue:Jt}=Yt.detail;kt.formattedValue=Jt,Jt!=null&&Yt.target!==document.activeElement&&(Yt.target.value=Jt),U.setValue(s,{formattedValue:Jt})},selRange(Yt){Yt.target.setSelectionRange(...Yt.detail.selRange)},charLimit:Yt=>{var se;const{charLimit:Jt}=Yt.detail,{target:Zt}=Yt;if(Jt===0){Zt.removeAttribute("maxLength");return}Zt.setAttribute("maxLength",Jt);let ie=kt.userValue;!ie||ie.length<=Jt||(ie=ie.slice(0,Jt),Zt.value=kt.userValue=ie,U.setValue(s,{value:ie}),(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:ie,willCommit:!0,commitKey:1,selStart:Zt.selectionStart,selEnd:Zt.selectionEnd}}))}};this._dispatchEventFromSandbox(Gt,Lt)}),y.addEventListener("keydown",Lt=>{var Jt;kt.commitKey=1;let Gt=-1;if(Lt.key==="Escape"?Gt=0:Lt.key==="Enter"&&!this.data.multiLine?Gt=2:Lt.key==="Tab"&&(kt.commitKey=3),Gt===-1)return;const{value:Yt}=Lt.target;kt.lastCommittedValue!==Yt&&(kt.lastCommittedValue=Yt,kt.userValue=Yt,(Jt=this.linkService.eventBus)==null||Jt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Yt,willCommit:!0,commitKey:Gt,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}}))});const Mt=Xt;Xt=null,y.addEventListener("blur",Lt=>{var Yt;if(!kt.focused||!Lt.relatedTarget)return;kt.focused=!1;const{value:Gt}=Lt.target;kt.userValue=Gt,kt.lastCommittedValue!==Gt&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Gt,willCommit:!0,commitKey:kt.commitKey,selStart:Lt.target.selectionStart,selEnd:Lt.target.selectionEnd}})),Mt(Lt)}),(z=this.data.actions)!=null&&z.Keystroke&&y.addEventListener("beforeinput",Lt=>{var le;kt.lastCommittedValue=null;const{data:Gt,target:Yt}=Lt,{value:Jt,selectionStart:Zt,selectionEnd:ie}=Yt;let se=Zt,re=ie;switch(Lt.inputType){case"deleteWordBackward":{const ce=Jt.substring(0,Zt).match(/\w*[^\w]*$/);ce&&(se-=ce[0].length);break}case"deleteWordForward":{const ce=Jt.substring(Zt).match(/^[^\w]*\w*/);ce&&(re+=ce[0].length);break}case"deleteContentBackward":Zt===ie&&(se-=1);break;case"deleteContentForward":Zt===ie&&(re+=1);break}Lt.preventDefault(),(le=this.linkService.eventBus)==null||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:Jt,change:Gt||"",willCommit:!1,selStart:se,selEnd:re}})}),this._setEventListeners(y,kt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Lt=>Lt.target.value)}if(Xt&&y.addEventListener("blur",Xt),this.data.comb){const Lt=(this.data.rect[2]-this.data.rect[0])/_t;y.classList.add("comb"),y.style.letterSpacing=`calc(${Lt}px * var(--scale-factor) - 1ch)`}}else y=document.createElement("div"),y.textContent=this.data.fieldValue,y.style.verticalAlign="middle",y.style.display="table-cell";return this._setTextStyle(y),this._setBackgroundColor(y),this._setDefaultPropertiesFromJS(y),this.container.append(y),this.container}}class C extends A{constructor(U){super(U,{isRenderable:!!U.data.hasOwnCanvas})}}class v extends A{constructor(U){super(U,{isRenderable:U.renderForms})}render(){const U=this.annotationStorage,s=this.data,y=s.id;let H=U.getValue(y,{value:s.exportValue===s.fieldValue}).value;typeof H=="string"&&(H=H!=="Off",U.setValue(y,{value:H})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const z=document.createElement("input");return N.add(z),z.setAttribute("data-element-id",y),z.disabled=s.readOnly,this._setRequired(z,this.data.required),z.type="checkbox",z.name=s.fieldName,H&&z.setAttribute("checked",!0),z.setAttribute("exportValue",s.exportValue),z.tabIndex=P,z.addEventListener("change",J=>{const{name:lt,checked:_t}=J.target;for(const Ft of this._getElementsByName(lt,y)){const kt=_t&&Ft.exportValue===s.exportValue;Ft.domElement&&(Ft.domElement.checked=kt),U.setValue(Ft.id,{value:kt})}U.setValue(y,{value:_t})}),z.addEventListener("resetform",J=>{const lt=s.defaultFieldValue||"Off";J.target.checked=lt===s.exportValue}),this.enableScripting&&this.hasJSActions&&(z.addEventListener("updatefromsandbox",J=>{const lt={value(_t){_t.target.checked=_t.detail.value!=="Off",U.setValue(y,{value:_t.target.checked})}};this._dispatchEventFromSandbox(lt,J)}),this._setEventListeners(z,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.checked)),this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class l extends A{constructor(U){super(U,{isRenderable:U.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const U=this.annotationStorage,s=this.data,y=s.id;let H=U.getValue(y,{value:s.fieldValue===s.buttonValue}).value;typeof H=="string"&&(H=H!==s.buttonValue,U.setValue(y,{value:H}));const z=document.createElement("input");if(N.add(z),z.setAttribute("data-element-id",y),z.disabled=s.readOnly,this._setRequired(z,this.data.required),z.type="radio",z.name=s.fieldName,H&&z.setAttribute("checked",!0),z.tabIndex=P,z.addEventListener("change",J=>{const{name:lt,checked:_t}=J.target;for(const Ft of this._getElementsByName(lt,y))U.setValue(Ft.id,{value:!1});U.setValue(y,{value:_t})}),z.addEventListener("resetform",J=>{const lt=s.defaultFieldValue;J.target.checked=lt!=null&&lt===s.buttonValue}),this.enableScripting&&this.hasJSActions){const J=s.buttonValue;z.addEventListener("updatefromsandbox",lt=>{const _t={value:Ft=>{const kt=J===Ft.detail.value;for(const Xt of this._getElementsByName(Ft.target.name)){const Mt=kt&&Xt.id===y;Xt.domElement&&(Xt.domElement.checked=Mt),U.setValue(Xt.id,{value:Mt})}}};this._dispatchEventFromSandbox(_t,lt)}),this._setEventListeners(z,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],lt=>lt.target.checked)}return this._setBackgroundColor(z),this._setDefaultPropertiesFromJS(z),this.container.append(z),this.container}}class d extends x{constructor(U){super(U,{ignoreBorder:U.data.hasAppearance})}render(){const U=super.render();U.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(U.title=this.data.alternativeText);const s=U.lastChild;return this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",y=>{this._dispatchEventFromSandbox({},y)})),U}}class O extends A{constructor(U){super(U,{isRenderable:U.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const U=this.annotationStorage,s=this.data.id,y=U.getValue(s,{value:this.data.fieldValue}),H=document.createElement("select");N.add(H),H.setAttribute("data-element-id",s),H.disabled=this.data.readOnly,this._setRequired(H,this.data.required),H.name=this.data.fieldName,H.tabIndex=P;let z=this.data.combo&&this.data.options.length>0;this.data.combo||(H.size=this.data.options.length,this.data.multiSelect&&(H.multiple=!0)),H.addEventListener("resetform",kt=>{const Xt=this.data.defaultFieldValue;for(const Mt of H.options)Mt.selected=Mt.value===Xt});for(const kt of this.data.options){const Xt=document.createElement("option");Xt.textContent=kt.displayValue,Xt.value=kt.exportValue,y.value.includes(kt.exportValue)&&(Xt.setAttribute("selected",!0),z=!1),H.append(Xt)}let J=null;if(z){const kt=document.createElement("option");kt.value=" ",kt.setAttribute("hidden",!0),kt.setAttribute("selected",!0),H.prepend(kt),J=()=>{kt.remove(),H.removeEventListener("input",J),J=null},H.addEventListener("input",J)}const lt=kt=>{const Xt=kt?"value":"textContent",{options:Mt,multiple:Lt}=H;return Lt?Array.prototype.filter.call(Mt,Gt=>Gt.selected).map(Gt=>Gt[Xt]):Mt.selectedIndex===-1?null:Mt[Mt.selectedIndex][Xt]};let _t=lt(!1);const Ft=kt=>{const Xt=kt.target.options;return Array.prototype.map.call(Xt,Mt=>({displayValue:Mt.textContent,exportValue:Mt.value}))};return this.enableScripting&&this.hasJSActions?(H.addEventListener("updatefromsandbox",kt=>{const Xt={value(Mt){J==null||J();const Lt=Mt.detail.value,Gt=new Set(Array.isArray(Lt)?Lt:[Lt]);for(const Yt of H.options)Yt.selected=Gt.has(Yt.value);U.setValue(s,{value:lt(!0)}),_t=lt(!1)},multipleSelection(Mt){H.multiple=!0},remove(Mt){const Lt=H.options,Gt=Mt.detail.remove;Lt[Gt].selected=!1,H.remove(Gt),Lt.length>0&&Array.prototype.findIndex.call(Lt,Jt=>Jt.selected)===-1&&(Lt[0].selected=!0),U.setValue(s,{value:lt(!0),items:Ft(Mt)}),_t=lt(!1)},clear(Mt){for(;H.length!==0;)H.remove(0);U.setValue(s,{value:null,items:[]}),_t=lt(!1)},insert(Mt){const{index:Lt,displayValue:Gt,exportValue:Yt}=Mt.detail.insert,Jt=H.children[Lt],Zt=document.createElement("option");Zt.textContent=Gt,Zt.value=Yt,Jt?Jt.before(Zt):H.append(Zt),U.setValue(s,{value:lt(!0),items:Ft(Mt)}),_t=lt(!1)},items(Mt){const{items:Lt}=Mt.detail;for(;H.length!==0;)H.remove(0);for(const Gt of Lt){const{displayValue:Yt,exportValue:Jt}=Gt,Zt=document.createElement("option");Zt.textContent=Yt,Zt.value=Jt,H.append(Zt)}H.options.length>0&&(H.options[0].selected=!0),U.setValue(s,{value:lt(!0),items:Ft(Mt)}),_t=lt(!1)},indices(Mt){const Lt=new Set(Mt.detail.indices);for(const Gt of Mt.target.options)Gt.selected=Lt.has(Gt.index);U.setValue(s,{value:lt(!0)}),_t=lt(!1)},editable(Mt){Mt.target.disabled=!Mt.detail.editable}};this._dispatchEventFromSandbox(Xt,kt)}),H.addEventListener("input",kt=>{var Mt;const Xt=lt(!0);U.setValue(s,{value:Xt}),kt.preventDefault(),(Mt=this.linkService.eventBus)==null||Mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:_t,changeEx:Xt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(H,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],kt=>kt.target.value)):H.addEventListener("input",function(kt){U.setValue(s,{value:lt(!0)})}),this.data.combo&&this._setTextStyle(H),this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class b extends S{constructor(U){const{data:s,elements:y}=U;super(U,{isRenderable:S._hasPopupData(s)}),this.elements=y}render(){this.container.classList.add("popupAnnotation");const U=new c({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const y of this.elements)y.popup=U,s.push(y.data.id),y.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(y=>`${n.AnnotationPrefix}${y}`).join(",")),this.container}}class c{constructor({container:U,color:s,elements:y,titleObj:H,modificationDate:z,contentsObj:J,richText:lt,parent:_t,rect:Ft,parentRect:kt,open:Xt}){G(this,Ut);G(this,Ht);G(this,$t);G(this,zt);G(this,W,null);G(this,st,X(this,Ut,Nn).bind(this));G(this,tt,X(this,zt,cn).bind(this));G(this,ot,X(this,$t,ln).bind(this));G(this,ut,X(this,Ht,Fe).bind(this));G(this,gt,null);G(this,ht,null);G(this,Ct,null);G(this,Ot,null);G(this,Et,null);G(this,It,null);G(this,mt,!1);G(this,et,null);G(this,nt,null);G(this,pt,null);G(this,wt,null);G(this,Pt,!1);var Lt;rt(this,ht,U),rt(this,wt,H),rt(this,Ct,J),rt(this,pt,lt),rt(this,Et,_t),rt(this,gt,s),rt(this,nt,Ft),rt(this,It,kt),rt(this,Ot,y);const Mt=u.PDFDateString.toDateObject(z);Mt&&rt(this,W,_t.l10n.get("annotation_date_string",{date:Mt.toLocaleDateString(),time:Mt.toLocaleTimeString()})),this.trigger=y.flatMap(Gt=>Gt.getElementsToTriggerPopup());for(const Gt of this.trigger)Gt.addEventListener("click",t(this,ut)),Gt.addEventListener("mouseenter",t(this,ot)),Gt.addEventListener("mouseleave",t(this,tt)),Gt.classList.add("popupTriggerArea");for(const Gt of y)(Lt=Gt.container)==null||Lt.addEventListener("keydown",t(this,st));t(this,ht).hidden=!0,Xt&&X(this,Ht,Fe).call(this)}render(){if(t(this,et))return;const{page:{view:U},viewport:{rawDims:{pageWidth:s,pageHeight:y,pageX:H,pageY:z}}}=t(this,Et),J=rt(this,et,document.createElement("div"));if(J.className="popup",t(this,gt)){const se=J.style.outlineColor=n.Util.makeHexColor(...t(this,gt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?J.style.backgroundColor=`color-mix(in srgb, ${se} 30%, white)`:J.style.backgroundColor=n.Util.makeHexColor(...t(this,gt).map(le=>Math.floor(.7*(255-le)+le)))}const lt=document.createElement("span");lt.className="header";const _t=document.createElement("h1");if(lt.append(_t),{dir:_t.dir,str:_t.textContent}=t(this,wt),J.append(lt),t(this,W)){const se=document.createElement("span");se.classList.add("popupDate"),t(this,W).then(re=>{se.textContent=re}),lt.append(se)}const Ft=t(this,Ct),kt=t(this,pt);if(kt!=null&&kt.str&&(!(Ft!=null&&Ft.str)||Ft.str===kt.str))I.XfaLayer.render({xfaHtml:kt.html,intent:"richText",div:J}),J.lastChild.classList.add("richText","popupContent");else{const se=this._formatContents(Ft);J.append(se)}let Xt=!!t(this,It),Mt=Xt?t(this,It):t(this,nt);for(const se of t(this,Ot))if(!Mt||n.Util.intersect(se.data.rect,Mt)!==null){Mt=se.data.rect,Xt=!0;break}const Lt=n.Util.normalizeRect([Mt[0],U[3]-Mt[1]+U[1],Mt[2],U[3]-Mt[3]+U[1]]),Yt=Xt?Mt[2]-Mt[0]+5:0,Jt=Lt[0]+Yt,Zt=Lt[1],{style:ie}=t(this,ht);ie.left=`${100*(Jt-H)/s}%`,ie.top=`${100*(Zt-z)/y}%`,t(this,ht).append(J)}_formatContents({str:U,dir:s}){const y=document.createElement("p");y.classList.add("popupContent"),y.dir=s;const H=U.split(/(?:\r\n?|\n)/);for(let z=0,J=H.length;z<J;++z){const lt=H[z];y.append(document.createTextNode(lt)),z<J-1&&y.append(document.createElement("br"))}return y}forceHide(){rt(this,Pt,this.isVisible),t(this,Pt)&&(t(this,ht).hidden=!0)}maybeShow(){t(this,Pt)&&(rt(this,Pt,!1),t(this,ht).hidden=!1)}get isVisible(){return t(this,ht).hidden===!1}}W=new WeakMap,st=new WeakMap,tt=new WeakMap,ot=new WeakMap,ut=new WeakMap,gt=new WeakMap,ht=new WeakMap,Ct=new WeakMap,Ot=new WeakMap,Et=new WeakMap,It=new WeakMap,mt=new WeakMap,et=new WeakMap,nt=new WeakMap,pt=new WeakMap,wt=new WeakMap,Pt=new WeakMap,Ut=new WeakSet,Nn=function(U){U.altKey||U.shiftKey||U.ctrlKey||U.metaKey||(U.key==="Enter"||U.key==="Escape"&&t(this,mt))&&X(this,Ht,Fe).call(this)},Ht=new WeakSet,Fe=function(){rt(this,mt,!t(this,mt)),t(this,mt)?(X(this,$t,ln).call(this),t(this,ht).addEventListener("click",t(this,ut)),t(this,ht).addEventListener("keydown",t(this,st))):(X(this,zt,cn).call(this),t(this,ht).removeEventListener("click",t(this,ut)),t(this,ht).removeEventListener("keydown",t(this,st)))},$t=new WeakSet,ln=function(){t(this,et)||this.render(),this.isVisible?t(this,mt)&&t(this,ht).classList.add("focused"):(t(this,ht).hidden=!1,t(this,ht).style.zIndex=parseInt(t(this,ht).style.zIndex)+1e3)},zt=new WeakSet,cn=function(){t(this,ht).classList.remove("focused"),!(t(this,mt)||!this.isVisible)&&(t(this,ht).hidden=!0,t(this,ht).style.zIndex=parseInt(t(this,ht).style.zIndex)-1e3)};class F extends S{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0}),this.textContent=U.data.textContent,this.textPosition=U.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const U=document.createElement("div");U.classList.add("annotationTextContent"),U.setAttribute("role","comment");for(const s of this.textContent){const y=document.createElement("span");y.textContent=s,U.append(y)}this.container.append(U)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=F;class g extends S{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});G(this,Z,null)}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:y,height:H}=B(s.rect),z=this.svgFactory.create(y,H,!0),J=rt(this,Z,this.svgFactory.createElement("svg:line"));return J.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),J.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),J.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),J.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),J.setAttribute("stroke-width",s.borderStyle.width||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),z.append(J),this.container.append(z),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Z)}addHighlightArea(){this.container.classList.add("highlightArea")}}Z=new WeakMap;class $ extends S{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});G(this,K,null)}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:y,height:H}=B(s.rect),z=this.svgFactory.create(y,H,!0),J=s.borderStyle.width,lt=rt(this,K,this.svgFactory.createElement("svg:rect"));return lt.setAttribute("x",J/2),lt.setAttribute("y",J/2),lt.setAttribute("width",y-J),lt.setAttribute("height",H-J),lt.setAttribute("stroke-width",J||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),z.append(lt),this.container.append(z),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,K)}addHighlightArea(){this.container.classList.add("highlightArea")}}K=new WeakMap;class q extends S{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});G(this,yt,null)}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:y,height:H}=B(s.rect),z=this.svgFactory.create(y,H,!0),J=s.borderStyle.width,lt=rt(this,yt,this.svgFactory.createElement("svg:ellipse"));return lt.setAttribute("cx",y/2),lt.setAttribute("cy",H/2),lt.setAttribute("rx",y/2-J/2),lt.setAttribute("ry",H/2-J/2),lt.setAttribute("stroke-width",J||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),z.append(lt),this.container.append(z),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,yt)}addHighlightArea(){this.container.classList.add("highlightArea")}}yt=new WeakMap;class w extends S{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});G(this,vt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:y,height:H}=B(s.rect),z=this.svgFactory.create(y,H,!0);let J=[];for(const _t of s.vertices){const Ft=_t.x-s.rect[0],kt=s.rect[3]-_t.y;J.push(Ft+","+kt)}J=J.join(" ");const lt=rt(this,vt,this.svgFactory.createElement(this.svgElementName));return lt.setAttribute("points",J),lt.setAttribute("stroke-width",s.borderStyle.width||1),lt.setAttribute("stroke","transparent"),lt.setAttribute("fill","transparent"),z.append(lt),this.container.append(z),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,vt)}addHighlightArea(){this.container.classList.add("highlightArea")}}vt=new WeakMap;class Y extends w{constructor(U){super(U),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class it extends S{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ct extends S{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});G(this,ee,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:y,height:H}=B(s.rect),z=this.svgFactory.create(y,H,!0);for(const J of s.inkLists){let lt=[];for(const Ft of J){const kt=Ft.x-s.rect[0],Xt=s.rect[3]-Ft.y;lt.push(`${kt},${Xt}`)}lt=lt.join(" ");const _t=this.svgFactory.createElement(this.svgElementName);t(this,ee).push(_t),_t.setAttribute("points",lt),_t.setAttribute("stroke-width",s.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),!s.popupRef&&this.hasPopupData&&this._createPopup(),z.append(_t)}return this.container.append(z),this.container}getElementsToTriggerPopup(){return t(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap,e.InkAnnotationElement=ct;class V extends S{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class dt extends S{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class bt extends S{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class St extends S{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Tt extends S{constructor(U){super(U,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=Tt;class L extends S{constructor(s){var z;super(s,{isRenderable:!0});G(this,Q);G(this,te,null);const{filename:y,content:H}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(y,!0),this.content=H,(z=this.linkService.eventBus)==null||z.dispatch("fileattachmentannotation",{source:this,filename:y,content:H})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:s,data:y}=this;let H;y.hasAppearance||y.fillAlpha===0?H=document.createElement("div"):(H=document.createElement("img"),H.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(y.name)?"paperclip":"pushpin"}.svg`,y.fillAlpha&&y.fillAlpha<1&&(H.style=`filter: opacity(${Math.round(y.fillAlpha*100)}%);`)),H.addEventListener("dblclick",X(this,Q,hn).bind(this)),rt(this,te,H);const{isMac:z}=n.FeatureTest.platform;return s.addEventListener("keydown",J=>{J.key==="Enter"&&(z?J.metaKey:J.ctrlKey)&&X(this,Q,hn).call(this)}),!y.popupRef&&this.hasPopupData?this._createPopup():H.classList.add("popupTriggerArea"),s.append(H),s}getElementsToTriggerPopup(){return t(this,te)}addHighlightArea(){this.container.classList.add("highlightArea")}}te=new WeakMap,Q=new WeakSet,hn=function(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.container,this.content,this.filename)};class i{constructor({div:U,accessibilityManager:s,annotationCanvasMap:y,l10n:H,page:z,viewport:J}){G(this,Bt);G(this,At);G(this,Nt,null);G(this,Rt,null);G(this,jt,new Map);this.div=U,rt(this,Nt,s),rt(this,Rt,y),this.l10n=H,this.page=z,this.viewport=J,this.zIndex=0,this.l10n||(this.l10n=at.NullL10n)}async render(U){const{annotations:s}=U,y=this.div;(0,u.setLayerDimensions)(y,this.viewport);const H=new Map,z={data:null,layer:y,linkService:U.linkService,downloadManager:U.downloadManager,imageResourcesPath:U.imageResourcesPath||"",renderForms:U.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:U.annotationStorage||new E.AnnotationStorage,enableScripting:U.enableScripting===!0,hasJSActions:U.hasJSActions,fieldObjects:U.fieldObjects,parent:this,elements:null};for(const J of s){if(J.noHTML)continue;const lt=J.annotationType===n.AnnotationType.POPUP;if(lt){const kt=H.get(J.id);if(!kt)continue;z.elements=kt}else{const{width:kt,height:Xt}=B(J.rect);if(kt<=0||Xt<=0)continue}z.data=J;const _t=k.create(z);if(!_t.isRenderable)continue;if(!lt&&J.popupRef){const kt=H.get(J.popupRef);kt?kt.push(_t):H.set(J.popupRef,[_t])}_t.annotationEditorType>0&&t(this,jt).set(_t.data.id,_t);const Ft=_t.render();J.hidden&&(Ft.style.visibility="hidden"),X(this,Bt,jn).call(this,Ft,J.id)}X(this,At,dn).call(this),await this.l10n.translate(y)}update({viewport:U}){const s=this.div;this.viewport=U,(0,u.setLayerDimensions)(s,{rotation:U.rotation}),X(this,At,dn).call(this),s.hidden=!1}getEditableAnnotations(){return Array.from(t(this,jt).values())}getEditableAnnotation(U){return t(this,jt).get(U)}}Nt=new WeakMap,Rt=new WeakMap,jt=new WeakMap,Bt=new WeakSet,jn=function(U,s){var H;const y=U.firstChild||U;y.id=`${n.AnnotationPrefix}${s}`,this.div.append(U),(H=t(this,Nt))==null||H.moveElementInDOM(this.div,U,y,!1)},At=new WeakSet,dn=function(){if(!t(this,Rt))return;const U=this.div;for(const[s,y]of t(this,Rt)){const H=U.querySelector(`[data-annotation-id="${s}"]`);if(!H)continue;const{firstChild:z}=H;z?z.nodeName==="CANVAS"?z.replaceWith(y):z.before(y):H.append(y)}t(this,Rt).clear()},e.AnnotationLayer=i},(_,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function M(E){return Math.floor(Math.max(0,Math.min(1,E))*255).toString(16).padStart(2,"0")}function n(E){return Math.max(0,Math.min(255,255*E))}class u{static CMYK_G([j,at,I,P]){return["G",1-Math.min(1,.3*j+.59*I+.11*at+P)]}static G_CMYK([j]){return["CMYK",0,0,0,1-j]}static G_RGB([j]){return["RGB",j,j,j]}static G_rgb([j]){return j=n(j),[j,j,j]}static G_HTML([j]){const at=M(j);return`#${at}${at}${at}`}static RGB_G([j,at,I]){return["G",.3*j+.59*at+.11*I]}static RGB_rgb(j){return j.map(n)}static RGB_HTML(j){return`#${j.map(M).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([j,at,I,P]){return["RGB",1-Math.min(1,j+P),1-Math.min(1,I+P),1-Math.min(1,at+P)]}static CMYK_rgb([j,at,I,P]){return[n(1-Math.min(1,j+P)),n(1-Math.min(1,I+P)),n(1-Math.min(1,at+P))]}static CMYK_HTML(j){const at=this.CMYK_RGB(j).slice(1);return this.RGB_HTML(at)}static RGB_CMYK([j,at,I]){const P=1-j,m=1-at,N=1-I,B=Math.min(P,m,N);return["CMYK",P,m,N,B]}}e.ColorConverters=u},(_,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=n;const M={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};M.print_progress_percent="{{progress}}%";function n(j,at){switch(j){case"find_match_count":j=`find_match_count[${at.total===1?"one":"other"}]`;break;case"find_match_count_limit":j=`find_match_count_limit[${at.limit===1?"one":"other"}]`;break}return M[j]||""}function u(j,at){return at?j.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(I,P)=>P in at?at[P]:"{{"+P+"}}"):j}const E={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(j,at=null,I=n(j,at)){return u(I,at)},async translate(j){}};e.NullL10n=E},(_,e,M)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=M(25);class u{static setupStorage(j,at,I,P,m){const N=P.getValue(at,{value:null});switch(I.name){case"textarea":if(N.value!==null&&(j.textContent=N.value),m==="print")break;j.addEventListener("input",B=>{P.setValue(at,{value:B.target.value})});break;case"input":if(I.attributes.type==="radio"||I.attributes.type==="checkbox"){if(N.value===I.attributes.xfaOn?j.setAttribute("checked",!0):N.value===I.attributes.xfaOff&&j.removeAttribute("checked"),m==="print")break;j.addEventListener("change",B=>{P.setValue(at,{value:B.target.checked?B.target.getAttribute("xfaOn"):B.target.getAttribute("xfaOff")})})}else{if(N.value!==null&&j.setAttribute("value",N.value),m==="print")break;j.addEventListener("input",B=>{P.setValue(at,{value:B.target.value})})}break;case"select":if(N.value!==null){j.setAttribute("value",N.value);for(const B of I.children)B.attributes.value===N.value?B.attributes.selected=!0:B.attributes.hasOwnProperty("selected")&&delete B.attributes.selected}j.addEventListener("input",B=>{const k=B.target.options,S=k.selectedIndex===-1?"":k[k.selectedIndex].value;P.setValue(at,{value:S})});break}}static setAttributes({html:j,element:at,storage:I=null,intent:P,linkService:m}){const{attributes:N}=at,B=j instanceof HTMLAnchorElement;N.type==="radio"&&(N.name=`${N.name}-${P}`);for(const[k,S]of Object.entries(N))if(S!=null)switch(k){case"class":S.length&&j.setAttribute(k,S.join(" "));break;case"dataId":break;case"id":j.setAttribute("data-element-id",S);break;case"style":Object.assign(j.style,S);break;case"textContent":j.textContent=S;break;default:(!B||k!=="href"&&k!=="newWindow")&&j.setAttribute(k,S)}B&&m.addLinkAttributes(j,N.href,N.newWindow),I&&N.dataId&&this.setupStorage(j,N.dataId,at,I)}static render(j){var x;const at=j.annotationStorage,I=j.linkService,P=j.xfaHtml,m=j.intent||"display",N=document.createElement(P.name);P.attributes&&this.setAttributes({html:N,element:P,intent:m,linkService:I});const B=[[P,-1,N]],k=j.div;if(k.append(N),j.viewport){const p=`matrix(${j.viewport.transform.join(",")})`;k.style.transform=p}m!=="richText"&&k.setAttribute("class","xfaLayer xfaFont");const S=[];for(;B.length>0;){const[p,A,R]=B.at(-1);if(A+1===p.children.length){B.pop();continue}const C=p.children[++B.at(-1)[1]];if(C===null)continue;const{name:v}=C;if(v==="#text"){const d=document.createTextNode(C.value);S.push(d),R.append(d);continue}const l=(x=C==null?void 0:C.attributes)!=null&&x.xmlns?document.createElementNS(C.attributes.xmlns,v):document.createElement(v);if(R.append(l),C.attributes&&this.setAttributes({html:l,element:C,storage:at,intent:m,linkService:I}),C.children&&C.children.length>0)B.push([C,-1,l]);else if(C.value){const d=document.createTextNode(C.value);n.XfaText.shouldBuildText(v)&&S.push(d),l.append(d)}}for(const p of k.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:S}}static update(j){const at=`matrix(${j.viewport.transform.join(",")})`;j.div.style.transform=at,j.div.hidden=!1}}e.XfaLayer=u},(_,e,M)=>{var P,m,N,B,k,S,x,p,A,R,C,v,l,d,O,Bn,c,Un,g,Hn,q,Wn,Y,un,ct,Gn,dt,fn,St,$n,L,Vn,o,qn,h,zn,T,Xn,W,oe,tt,pn,ut,Me,ht,Le,Ot,pe,It,gn,et,Ie,pt,Yn,Pt,mn,Vt,Kn,qt,Jn,Wt,bn,ft,Oe,K,ge;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var n=M(1),u=M(4),E=M(29),j=M(6),at=M(5);const vt=class vt extends u.AnnotationEditor{constructor(Q){super({...Q,name:"inkEditor"});G(this,O);G(this,c);G(this,g);G(this,q);G(this,Y);G(this,ct);G(this,dt);G(this,St);G(this,L);G(this,o);G(this,h);G(this,T);G(this,W);G(this,tt);G(this,ut);G(this,ht);G(this,Ot);G(this,It);G(this,et);G(this,qt);G(this,Wt);G(this,ft);G(this,K);G(this,P,0);G(this,m,0);G(this,N,this.canvasPointermove.bind(this));G(this,B,this.canvasPointerleave.bind(this));G(this,k,this.canvasPointerup.bind(this));G(this,S,this.canvasPointerdown.bind(this));G(this,x,new Path2D);G(this,p,!1);G(this,A,!1);G(this,R,!1);G(this,C,null);G(this,v,0);G(this,l,0);G(this,d,null);this.color=Q.color||null,this.thickness=Q.thickness||null,this.opacity=Q.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Q){u.AnnotationEditor.initialize(Q,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Q,xt){switch(Q){case n.AnnotationEditorParamsType.INK_THICKNESS:vt._defaultThickness=xt;break;case n.AnnotationEditorParamsType.INK_COLOR:vt._defaultColor=xt;break;case n.AnnotationEditorParamsType.INK_OPACITY:vt._defaultOpacity=xt/100;break}}updateParams(Q,xt){switch(Q){case n.AnnotationEditorParamsType.INK_THICKNESS:X(this,O,Bn).call(this,xt);break;case n.AnnotationEditorParamsType.INK_COLOR:X(this,c,Un).call(this,xt);break;case n.AnnotationEditorParamsType.INK_OPACITY:X(this,g,Hn).call(this,xt);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,vt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,vt._defaultColor||u.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(vt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||vt._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||vt._defaultColor||u.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??vt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(X(this,ut,Me).call(this),X(this,ht,Le).call(this)),this.isAttachedToDOM||(this.parent.add(this),X(this,Ot,pe).call(this)),X(this,K,ge).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,C).disconnect(),rt(this,C,null),super.remove())}setParent(Q){!this.parent&&Q?this._uiManager.removeShouldRescale(this):this.parent&&Q===null&&this._uiManager.addShouldRescale(this),super.setParent(Q)}onScaleChanging(){const[Q,xt]=this.parentDimensions,Nt=this.width*Q,Rt=this.height*xt;this.setDimensions(Nt,Rt)}enableEditMode(){t(this,p)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,S)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,S)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,p)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),rt(this,p,!0),this.div.classList.add("disabled"),X(this,K,ge).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Q){this._focusEventsAllowed&&(super.focusin(Q),this.enableEditMode())}canvasPointerdown(Q){Q.button!==0||!this.isInEditMode()||t(this,p)||(this.setInForeground(),Q.preventDefault(),Q.type!=="mouse"&&this.div.focus(),X(this,ct,Gn).call(this,Q.offsetX,Q.offsetY))}canvasPointermove(Q){Q.preventDefault(),X(this,dt,fn).call(this,Q.offsetX,Q.offsetY)}canvasPointerup(Q){Q.preventDefault(),X(this,tt,pn).call(this,Q)}canvasPointerleave(Q){X(this,tt,pn).call(this,Q)}get isResizable(){return!this.isEmpty()&&t(this,p)}render(){if(this.div)return this.div;let Q,xt;this.width&&(Q=this.x,xt=this.y),super.render(),u.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Qt=>{var At;return(At=this.div)==null?void 0:At.setAttribute("aria-label",Qt)});const[Nt,Rt,jt,Bt]=X(this,q,Wn).call(this);if(this.setAt(Nt,Rt,0,0),this.setDims(jt,Bt),X(this,ut,Me).call(this),this.width){const[Qt,At]=this.parentDimensions;this.setAspectRatio(this.width*Qt,this.height*At),this.setAt(Q*Qt,xt*At,this.width*Qt,this.height*At),rt(this,R,!0),X(this,Ot,pe).call(this),this.setDims(this.width*Qt,this.height*At),X(this,W,oe).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return X(this,ht,Le).call(this),this.div}setDimensions(Q,xt){const Nt=Math.round(Q),Rt=Math.round(xt);if(t(this,v)===Nt&&t(this,l)===Rt)return;rt(this,v,Nt),rt(this,l,Rt),this.canvas.style.visibility="hidden";const[jt,Bt]=this.parentDimensions;this.width=Q/jt,this.height=xt/Bt,this.fixAndSetPosition(),t(this,p)&&X(this,It,gn).call(this,Q,xt),X(this,Ot,pe).call(this),X(this,W,oe).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Q,xt,Nt){var z,J,lt;if(Q instanceof E.InkAnnotationElement)return null;const Rt=super.deserialize(Q,xt,Nt);Rt.thickness=Q.thickness,Rt.color=n.Util.makeHexColor(...Q.color),Rt.opacity=Q.opacity;const[jt,Bt]=Rt.pageDimensions,Qt=Rt.width*jt,At=Rt.height*Bt,Kt=Rt.parentScale,Dt=Q.thickness/2;rt(Rt,p,!0),rt(Rt,v,Math.round(Qt)),rt(Rt,l,Math.round(At));const{paths:U,rect:s,rotation:y}=Q;for(let{bezier:_t}of U){_t=X(z=vt,Vt,Kn).call(z,_t,s,y);const Ft=[];Rt.paths.push(Ft);let kt=Kt*(_t[0]-Dt),Xt=Kt*(_t[1]-Dt);for(let Lt=2,Gt=_t.length;Lt<Gt;Lt+=6){const Yt=Kt*(_t[Lt]-Dt),Jt=Kt*(_t[Lt+1]-Dt),Zt=Kt*(_t[Lt+2]-Dt),ie=Kt*(_t[Lt+3]-Dt),se=Kt*(_t[Lt+4]-Dt),re=Kt*(_t[Lt+5]-Dt);Ft.push([[kt,Xt],[Yt,Jt],[Zt,ie],[se,re]]),kt=se,Xt=re}const Mt=X(this,pt,Yn).call(this,Ft);Rt.bezierPath2D.push(Mt)}const H=X(J=Rt,Wt,bn).call(J);return rt(Rt,m,Math.max(u.AnnotationEditor.MIN_SIZE,H[2]-H[0])),rt(Rt,P,Math.max(u.AnnotationEditor.MIN_SIZE,H[3]-H[1])),X(lt=Rt,It,gn).call(lt,Qt,At),Rt}serialize(){if(this.isEmpty())return null;const Q=this.getRect(0,0),xt=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:xt,thickness:this.thickness,opacity:this.opacity,paths:X(this,qt,Jn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Q),pageIndex:this.pageIndex,rect:Q,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};P=new WeakMap,m=new WeakMap,N=new WeakMap,B=new WeakMap,k=new WeakMap,S=new WeakMap,x=new WeakMap,p=new WeakMap,A=new WeakMap,R=new WeakMap,C=new WeakMap,v=new WeakMap,l=new WeakMap,d=new WeakMap,O=new WeakSet,Bn=function(Q){const xt=this.thickness;this.addCommands({cmd:()=>{this.thickness=Q,X(this,K,ge).call(this)},undo:()=>{this.thickness=xt,X(this,K,ge).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},c=new WeakSet,Un=function(Q){const xt=this.color;this.addCommands({cmd:()=>{this.color=Q,X(this,W,oe).call(this)},undo:()=>{this.color=xt,X(this,W,oe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,Hn=function(Q){Q/=100;const xt=this.opacity;this.addCommands({cmd:()=>{this.opacity=Q,X(this,W,oe).call(this)},undo:()=>{this.opacity=xt,X(this,W,oe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},q=new WeakSet,Wn=function(){const{parentRotation:Q,parentDimensions:[xt,Nt]}=this;switch(Q){case 90:return[0,Nt,Nt,xt];case 180:return[xt,Nt,xt,Nt];case 270:return[xt,0,Nt,xt];default:return[0,0,xt,Nt]}},Y=new WeakSet,un=function(){const{ctx:Q,color:xt,opacity:Nt,thickness:Rt,parentScale:jt,scaleFactor:Bt}=this;Q.lineWidth=Rt*jt/Bt,Q.lineCap="round",Q.lineJoin="round",Q.miterLimit=10,Q.strokeStyle=`${xt}${(0,at.opacityToHex)(Nt)}`},ct=new WeakSet,Gn=function(Q,xt){this.canvas.addEventListener("contextmenu",j.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,B)),this.canvas.addEventListener("pointermove",t(this,N)),this.canvas.addEventListener("pointerup",t(this,k)),this.canvas.removeEventListener("pointerdown",t(this,S)),this.isEditing=!0,t(this,R)||(rt(this,R,!0),X(this,Ot,pe).call(this),this.thickness||(this.thickness=vt._defaultThickness),this.color||(this.color=vt._defaultColor||u.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=vt._defaultOpacity)),this.currentPath.push([Q,xt]),rt(this,A,!1),X(this,Y,un).call(this),rt(this,d,()=>{X(this,o,qn).call(this),t(this,d)&&window.requestAnimationFrame(t(this,d))}),window.requestAnimationFrame(t(this,d))},dt=new WeakSet,fn=function(Q,xt){const[Nt,Rt]=this.currentPath.at(-1);if(this.currentPath.length>1&&Q===Nt&&xt===Rt)return;const jt=this.currentPath;let Bt=t(this,x);if(jt.push([Q,xt]),rt(this,A,!0),jt.length<=2){Bt.moveTo(...jt[0]),Bt.lineTo(Q,xt);return}jt.length===3&&(rt(this,x,Bt=new Path2D),Bt.moveTo(...jt[0])),X(this,h,zn).call(this,Bt,...jt.at(-3),...jt.at(-2),Q,xt)},St=new WeakSet,$n=function(){if(this.currentPath.length===0)return;const Q=this.currentPath.at(-1);t(this,x).lineTo(...Q)},L=new WeakSet,Vn=function(Q,xt){rt(this,d,null),Q=Math.min(Math.max(Q,0),this.canvas.width),xt=Math.min(Math.max(xt,0),this.canvas.height),X(this,dt,fn).call(this,Q,xt),X(this,St,$n).call(this);let Nt;if(this.currentPath.length!==1)Nt=X(this,T,Xn).call(this);else{const At=[Q,xt];Nt=[[At,At.slice(),At.slice(),At]]}const Rt=t(this,x),jt=this.currentPath;this.currentPath=[],rt(this,x,new Path2D);const Bt=()=>{this.allRawPaths.push(jt),this.paths.push(Nt),this.bezierPath2D.push(Rt),this.rebuild()},Qt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(X(this,ut,Me).call(this),X(this,ht,Le).call(this)),X(this,K,ge).call(this))};this.addCommands({cmd:Bt,undo:Qt,mustExec:!0})},o=new WeakSet,qn=function(){if(!t(this,A))return;rt(this,A,!1);const Q=Math.ceil(this.thickness*this.parentScale),xt=this.currentPath.slice(-3),Nt=xt.map(Bt=>Bt[0]),Rt=xt.map(Bt=>Bt[1]);Math.min(...Nt)-Q,Math.max(...Nt)+Q,Math.min(...Rt)-Q,Math.max(...Rt)+Q;const{ctx:jt}=this;jt.save(),jt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Bt of this.bezierPath2D)jt.stroke(Bt);jt.stroke(t(this,x)),jt.restore()},h=new WeakSet,zn=function(Q,xt,Nt,Rt,jt,Bt,Qt){const At=(xt+Rt)/2,Kt=(Nt+jt)/2,Dt=(Rt+Bt)/2,U=(jt+Qt)/2;Q.bezierCurveTo(At+2*(Rt-At)/3,Kt+2*(jt-Kt)/3,Dt+2*(Rt-Dt)/3,U+2*(jt-U)/3,Dt,U)},T=new WeakSet,Xn=function(){const Q=this.currentPath;if(Q.length<=2)return[[Q[0],Q[0],Q.at(-1),Q.at(-1)]];const xt=[];let Nt,[Rt,jt]=Q[0];for(Nt=1;Nt<Q.length-2;Nt++){const[s,y]=Q[Nt],[H,z]=Q[Nt+1],J=(s+H)/2,lt=(y+z)/2,_t=[Rt+2*(s-Rt)/3,jt+2*(y-jt)/3],Ft=[J+2*(s-J)/3,lt+2*(y-lt)/3];xt.push([[Rt,jt],_t,Ft,[J,lt]]),[Rt,jt]=[J,lt]}const[Bt,Qt]=Q[Nt],[At,Kt]=Q[Nt+1],Dt=[Rt+2*(Bt-Rt)/3,jt+2*(Qt-jt)/3],U=[At+2*(Bt-At)/3,Kt+2*(Qt-Kt)/3];return xt.push([[Rt,jt],Dt,U,[At,Kt]]),xt},W=new WeakSet,oe=function(){if(this.isEmpty()){X(this,et,Ie).call(this);return}X(this,Y,un).call(this);const{canvas:Q,ctx:xt}=this;xt.setTransform(1,0,0,1,0,0),xt.clearRect(0,0,Q.width,Q.height),X(this,et,Ie).call(this);for(const Nt of this.bezierPath2D)xt.stroke(Nt)},tt=new WeakSet,pn=function(Q){this.canvas.removeEventListener("pointerleave",t(this,B)),this.canvas.removeEventListener("pointermove",t(this,N)),this.canvas.removeEventListener("pointerup",t(this,k)),this.canvas.addEventListener("pointerdown",t(this,S)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",j.noContextMenu)},10),X(this,L,Vn).call(this,Q.offsetX,Q.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ut=new WeakSet,Me=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",u.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Q=>{var xt;return(xt=this.canvas)==null?void 0:xt.setAttribute("aria-label",Q)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ht=new WeakSet,Le=function(){rt(this,C,new ResizeObserver(Q=>{const xt=Q[0].contentRect;xt.width&&xt.height&&this.setDimensions(xt.width,xt.height)})),t(this,C).observe(this.div)},Ot=new WeakSet,pe=function(){if(!t(this,R))return;const[Q,xt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Q),this.canvas.height=Math.ceil(this.height*xt),X(this,et,Ie).call(this)},It=new WeakSet,gn=function(Q,xt){const Nt=X(this,ft,Oe).call(this),Rt=(Q-Nt)/t(this,m),jt=(xt-Nt)/t(this,P);this.scaleFactor=Math.min(Rt,jt)},et=new WeakSet,Ie=function(){const Q=X(this,ft,Oe).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Q,this.translationY*this.scaleFactor+Q)},pt=new WeakSet,Yn=function(Q){const xt=new Path2D;for(let Nt=0,Rt=Q.length;Nt<Rt;Nt++){const[jt,Bt,Qt,At]=Q[Nt];Nt===0&&xt.moveTo(...jt),xt.bezierCurveTo(Bt[0],Bt[1],Qt[0],Qt[1],At[0],At[1])}return xt},Pt=new WeakSet,mn=function(Q,xt,Nt){const[Rt,jt,Bt,Qt]=xt;switch(Nt){case 0:for(let At=0,Kt=Q.length;At<Kt;At+=2)Q[At]+=Rt,Q[At+1]=Qt-Q[At+1];break;case 90:for(let At=0,Kt=Q.length;At<Kt;At+=2){const Dt=Q[At];Q[At]=Q[At+1]+Rt,Q[At+1]=Dt+jt}break;case 180:for(let At=0,Kt=Q.length;At<Kt;At+=2)Q[At]=Bt-Q[At],Q[At+1]+=jt;break;case 270:for(let At=0,Kt=Q.length;At<Kt;At+=2){const Dt=Q[At];Q[At]=Bt-Q[At+1],Q[At+1]=Qt-Dt}break;default:throw new Error("Invalid rotation")}return Q},Vt=new WeakSet,Kn=function(Q,xt,Nt){const[Rt,jt,Bt,Qt]=xt;switch(Nt){case 0:for(let At=0,Kt=Q.length;At<Kt;At+=2)Q[At]-=Rt,Q[At+1]=Qt-Q[At+1];break;case 90:for(let At=0,Kt=Q.length;At<Kt;At+=2){const Dt=Q[At];Q[At]=Q[At+1]-jt,Q[At+1]=Dt-Rt}break;case 180:for(let At=0,Kt=Q.length;At<Kt;At+=2)Q[At]=Bt-Q[At],Q[At+1]-=jt;break;case 270:for(let At=0,Kt=Q.length;At<Kt;At+=2){const Dt=Q[At];Q[At]=Qt-Q[At+1],Q[At+1]=Bt-Dt}break;default:throw new Error("Invalid rotation")}return Q},qt=new WeakSet,Jn=function(Q,xt,Nt,Rt){var Kt,Dt;const jt=[],Bt=this.thickness/2,Qt=Q*xt+Bt,At=Q*Nt+Bt;for(const U of this.paths){const s=[],y=[];for(let H=0,z=U.length;H<z;H++){const[J,lt,_t,Ft]=U[H],kt=Q*J[0]+Qt,Xt=Q*J[1]+At,Mt=Q*lt[0]+Qt,Lt=Q*lt[1]+At,Gt=Q*_t[0]+Qt,Yt=Q*_t[1]+At,Jt=Q*Ft[0]+Qt,Zt=Q*Ft[1]+At;H===0&&(s.push(kt,Xt),y.push(kt,Xt)),s.push(Mt,Lt,Gt,Yt,Jt,Zt),y.push(Mt,Lt),H===z-1&&y.push(Jt,Zt)}jt.push({bezier:X(Kt=vt,Pt,mn).call(Kt,s,Rt,this.rotation),points:X(Dt=vt,Pt,mn).call(Dt,y,Rt,this.rotation)})}return jt},Wt=new WeakSet,bn=function(){let Q=1/0,xt=-1/0,Nt=1/0,Rt=-1/0;for(const jt of this.paths)for(const[Bt,Qt,At,Kt]of jt){const Dt=n.Util.bezierBoundingBox(...Bt,...Qt,...At,...Kt);Q=Math.min(Q,Dt[0]),Nt=Math.min(Nt,Dt[1]),xt=Math.max(xt,Dt[2]),Rt=Math.max(Rt,Dt[3])}return[Q,Nt,xt,Rt]},ft=new WeakSet,Oe=function(){return t(this,p)?Math.ceil(this.thickness*this.parentScale):0},K=new WeakSet,ge=function(Q=!1){if(this.isEmpty())return;if(!t(this,p)){X(this,W,oe).call(this);return}const xt=X(this,Wt,bn).call(this),Nt=X(this,ft,Oe).call(this);rt(this,m,Math.max(u.AnnotationEditor.MIN_SIZE,xt[2]-xt[0])),rt(this,P,Math.max(u.AnnotationEditor.MIN_SIZE,xt[3]-xt[1]));const Rt=Math.ceil(Nt+t(this,m)*this.scaleFactor),jt=Math.ceil(Nt+t(this,P)*this.scaleFactor),[Bt,Qt]=this.parentDimensions;this.width=Rt/Bt,this.height=jt/Qt,this.setAspectRatio(Rt,jt);const At=this.translationX,Kt=this.translationY;this.translationX=-xt[0],this.translationY=-xt[1],X(this,Ot,pe).call(this),X(this,W,oe).call(this),rt(this,v,Rt),rt(this,l,jt),this.setDims(Rt,jt);const Dt=Q?Nt/this.scaleFactor/2:0;this.translate(At-this.translationX-Dt,Kt-this.translationY-Dt)},G(vt,pt),G(vt,Pt),G(vt,Vt),ne(vt,"_defaultColor",null),ne(vt,"_defaultOpacity",1),ne(vt,"_defaultThickness",1),ne(vt,"_type","ink");let I=vt;e.InkEditor=I},(_,e,M)=>{var I,P,m,N,B,k,S,x,p,A,R,Ee,v,Se,d,De,b,_n,F,Qn,$,Zn,w,yn,it,Ne,V,ts;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var n=M(1),u=M(4),E=M(6),j=M(29);const bt=class bt extends u.AnnotationEditor{constructor(L){super({...L,name:"stampEditor"});G(this,R);G(this,v);G(this,d);G(this,b);G(this,F);G(this,$);G(this,w);G(this,it);G(this,V);G(this,I,null);G(this,P,null);G(this,m,null);G(this,N,null);G(this,B,null);G(this,k,null);G(this,S,null);G(this,x,null);G(this,p,!1);G(this,A,!1);rt(this,N,L.bitmapUrl),rt(this,B,L.bitmapFile)}static initialize(L){u.AnnotationEditor.initialize(L)}static get supportedTypes(){const L=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",L.map(i=>`image/${i}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(L){return this.supportedTypes.includes(L)}static paste(L,i){i.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:L.getAsFile()})}remove(){var L,i;t(this,P)&&(rt(this,I,null),this._uiManager.imageManager.deleteId(t(this,P)),(L=t(this,k))==null||L.remove(),rt(this,k,null),(i=t(this,S))==null||i.disconnect(),rt(this,S,null)),super.remove()}rebuild(){if(!this.parent){t(this,P)&&X(this,d,De).call(this);return}super.rebuild(),this.div!==null&&(t(this,P)&&X(this,d,De).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,m)||t(this,I)||t(this,N)||t(this,B))}get isResizable(){return!0}render(){if(this.div)return this.div;let L,i;if(this.width&&(L=this.x,i=this.y),super.render(),this.div.hidden=!0,t(this,I)?X(this,b,_n).call(this):X(this,d,De).call(this),this.width){const[o,a]=this.parentDimensions;this.setAt(L*o,i*a,this.width*o,this.height*a)}return this.div}static deserialize(L,i,o){if(L instanceof j.StampAnnotationElement)return null;const a=super.deserialize(L,i,o),{rect:h,bitmapUrl:f,bitmapId:T,isSvg:D,accessibilityData:W}=L;T&&o.imageManager.isValidId(T)?rt(a,P,T):rt(a,N,f),rt(a,p,D);const[st,tt]=a.pageDimensions;return a.width=(h[2]-h[0])/st,a.height=(h[3]-h[1])/tt,W&&(a.altTextData=W),a}serialize(L=!1,i=null){if(this.isEmpty())return null;const o={annotationType:n.AnnotationEditorType.STAMP,bitmapId:t(this,P),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,p),structTreeParentId:this._structTreeParentId};if(L)return o.bitmapUrl=X(this,it,Ne).call(this,!0),o.accessibilityData=this.altTextData,o;const{decorative:a,altText:h}=this.altTextData;if(!a&&h&&(o.accessibilityData={type:"Figure",alt:h}),i===null)return o;i.stamps||(i.stamps=new Map);const f=t(this,p)?(o.rect[2]-o.rect[0])*(o.rect[3]-o.rect[1]):null;if(!i.stamps.has(t(this,P)))i.stamps.set(t(this,P),{area:f,serialized:o}),o.bitmap=X(this,it,Ne).call(this,!1);else if(t(this,p)){const T=i.stamps.get(t(this,P));f>T.area&&(T.area=f,T.serialized.bitmap.close(),T.serialized.bitmap=X(this,it,Ne).call(this,!1))}return o}};I=new WeakMap,P=new WeakMap,m=new WeakMap,N=new WeakMap,B=new WeakMap,k=new WeakMap,S=new WeakMap,x=new WeakMap,p=new WeakMap,A=new WeakMap,R=new WeakSet,Ee=function(L,i=!1){if(!L){this.remove();return}rt(this,I,L.bitmap),i||(rt(this,P,L.id),rt(this,p,L.isSvg)),X(this,b,_n).call(this)},v=new WeakSet,Se=function(){rt(this,m,null),this._uiManager.enableWaiting(!1),t(this,k)&&this.div.focus()},d=new WeakSet,De=function(){if(t(this,P)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,P)).then(i=>X(this,R,Ee).call(this,i,!0)).finally(()=>X(this,v,Se).call(this));return}if(t(this,N)){const i=t(this,N);rt(this,N,null),this._uiManager.enableWaiting(!0),rt(this,m,this._uiManager.imageManager.getFromUrl(i).then(o=>X(this,R,Ee).call(this,o)).finally(()=>X(this,v,Se).call(this)));return}if(t(this,B)){const i=t(this,B);rt(this,B,null),this._uiManager.enableWaiting(!0),rt(this,m,this._uiManager.imageManager.getFromFile(i).then(o=>X(this,R,Ee).call(this,o)).finally(()=>X(this,v,Se).call(this)));return}const L=document.createElement("input");L.type="file",L.accept=bt.supportedTypesStr,rt(this,m,new Promise(i=>{L.addEventListener("change",async()=>{if(!L.files||L.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(L.files[0]);X(this,R,Ee).call(this,o)}i()}),L.addEventListener("cancel",()=>{this.remove(),i()})}).finally(()=>X(this,v,Se).call(this))),L.click()},b=new WeakSet,_n=function(){const{div:L}=this;let{width:i,height:o}=t(this,I);const[a,h]=this.pageDimensions,f=.75;if(this.width)i=this.width*a,o=this.height*h;else if(i>f*a||o>f*h){const st=Math.min(f*a/i,f*h/o);i*=st,o*=st}const[T,D]=this.parentDimensions;this.setDims(i*T/a,o*D/h),this._uiManager.enableWaiting(!1);const W=rt(this,k,document.createElement("canvas"));L.append(W),L.hidden=!1,X(this,w,yn).call(this,i,o),X(this,V,ts).call(this),t(this,A)||(this.parent.addUndoableEditor(this),rt(this,A,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},F=new WeakSet,Qn=function(L,i){var f;const[o,a]=this.parentDimensions;this.width=L/o,this.height=i/a,this.setDims(L,i),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,x)!==null&&clearTimeout(t(this,x)),rt(this,x,setTimeout(()=>{rt(this,x,null),X(this,w,yn).call(this,L,i)},200))},$=new WeakSet,Zn=function(L,i){const{width:o,height:a}=t(this,I);let h=o,f=a,T=t(this,I);for(;h>2*L||f>2*i;){const D=h,W=f;h>2*L&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2)),f>2*i&&(f=f>=16384?Math.floor(f/2)-1:Math.ceil(f/2));const st=new OffscreenCanvas(h,f);st.getContext("2d").drawImage(T,0,0,D,W,0,0,h,f),T=st.transferToImageBitmap()}return T},w=new WeakSet,yn=function(L,i){L=Math.ceil(L),i=Math.ceil(i);const o=t(this,k);if(!o||o.width===L&&o.height===i)return;o.width=L,o.height=i;const a=t(this,p)?t(this,I):X(this,$,Zn).call(this,L,i),h=o.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(a,0,0,a.width,a.height,0,0,L,i)},it=new WeakSet,Ne=function(L){if(L){if(t(this,p)){const a=this._uiManager.imageManager.getSvgUrl(t(this,P));if(a)return a}const i=document.createElement("canvas");return{width:i.width,height:i.height}=t(this,I),i.getContext("2d").drawImage(t(this,I),0,0),i.toDataURL()}if(t(this,p)){const[i,o]=this.pageDimensions,a=Math.round(this.width*i*E.PixelsPerInch.PDF_TO_CSS_UNITS),h=Math.round(this.height*o*E.PixelsPerInch.PDF_TO_CSS_UNITS),f=new OffscreenCanvas(a,h);return f.getContext("2d").drawImage(t(this,I),0,0,t(this,I).width,t(this,I).height,0,0,a,h),f.transferToImageBitmap()}return structuredClone(t(this,I))},V=new WeakSet,ts=function(){rt(this,S,new ResizeObserver(L=>{const i=L[0].contentRect;i.width&&i.height&&X(this,F,Qn).call(this,i.width,i.height)})),t(this,S).observe(this.div)},ne(bt,"_type","stamp");let at=bt;e.StampEditor=at}],__webpack_module_cache__={};function __w_pdfjs_require__(_){var e=__webpack_module_cache__[_];if(e!==void 0)return e.exports;var M=__webpack_module_cache__[_]={exports:{}};return __webpack_modules__[_](M,M.exports,__w_pdfjs_require__),M.exports}var __webpack_exports__={};return(()=>{var _=__webpack_exports__;Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(_,"AnnotationEditorLayer",{enumerable:!0,get:function(){return E.AnnotationEditorLayer}}),Object.defineProperty(_,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(_,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(_,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return j.AnnotationEditorUIManager}}),Object.defineProperty(_,"AnnotationLayer",{enumerable:!0,get:function(){return at.AnnotationLayer}}),Object.defineProperty(_,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(_,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(_,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(_,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(_,"GlobalWorkerOptions",{enumerable:!0,get:function(){return I.GlobalWorkerOptions}}),Object.defineProperty(_,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(_,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(_,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(_,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(_,"PDFDataRangeTransport",{enumerable:!0,get:function(){return M.PDFDataRangeTransport}}),Object.defineProperty(_,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(_,"PDFWorker",{enumerable:!0,get:function(){return M.PDFWorker}}),Object.defineProperty(_,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(_,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(_,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(_,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(_,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(_,"SVGGraphics",{enumerable:!0,get:function(){return M.SVGGraphics}}),Object.defineProperty(_,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(_,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(_,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(_,"XfaLayer",{enumerable:!0,get:function(){return P.XfaLayer}}),Object.defineProperty(_,"build",{enumerable:!0,get:function(){return M.build}}),Object.defineProperty(_,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(_,"getDocument",{enumerable:!0,get:function(){return M.getDocument}}),Object.defineProperty(_,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(_,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(_,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(_,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(_,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(_,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(_,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(_,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(_,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(_,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(_,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(_,"updateTextLayer",{enumerable:!0,get:function(){return u.updateTextLayer}}),Object.defineProperty(_,"version",{enumerable:!0,get:function(){return M.version}});var e=__w_pdfjs_require__(1),M=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),u=__w_pdfjs_require__(26),E=__w_pdfjs_require__(27),j=__w_pdfjs_require__(5),at=__w_pdfjs_require__(29),I=__w_pdfjs_require__(14),P=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var __spreadArray=function(_,e,M){if(M||arguments.length===2)for(var n=0,u=e.length,E;n<u;n++)(E||!(n in e))&&(E||(E=Array.prototype.slice.call(e,0,n)),E[n]=e[n]);return _.concat(E||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(_,e){var M={};return allEvents.forEach(function(n){var u=_[n];u&&(e?M[n]=function(E){return u(E,e(n))}:M[n]=u)}),M}function makeCancellablePromise(_){var e=!1,M=new Promise(function(n,u){_.then(function(E){return!e&&n(E)}).catch(function(E){return!e&&u(E)})});return{promise:M,cancel:function(){e=!0}}}function r(_){var e,M,n="";if(typeof _=="string"||typeof _=="number")n+=_;else if(typeof _=="object")if(Array.isArray(_)){var u=_.length;for(e=0;e<u;e++)_[e]&&(M=r(_[e]))&&(n&&(n+=" "),n+=M)}else for(M in _)_[M]&&(n&&(n+=" "),n+=M);return n}function clsx(){for(var _,e,M=0,n="",u=arguments.length;M<u;M++)(_=arguments[M])&&(e=r(_))&&(n&&(n+=" "),n+=e);return n}var isProduction=!0,prefix="Invariant failed";function invariant(_,e){if(!_){if(isProduction)throw new Error(prefix);var M=typeof e=="function"?e():e,n=M?"".concat(prefix,": ").concat(M):prefix;throw new Error(n)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(_,e,M){for(M of _.keys())if(dequal(M,e))return M}function dequal(_,e){var M,n,u;if(_===e)return!0;if(_&&e&&(M=_.constructor)===e.constructor){if(M===Date)return _.getTime()===e.getTime();if(M===RegExp)return _.toString()===e.toString();if(M===Array){if((n=_.length)===e.length)for(;n--&&dequal(_[n],e[n]););return n===-1}if(M===Set){if(_.size!==e.size)return!1;for(n of _)if(u=n,u&&typeof u=="object"&&(u=find(e,u),!u)||!e.has(u))return!1;return!0}if(M===Map){if(_.size!==e.size)return!1;for(n of _)if(u=n[0],u&&typeof u=="object"&&(u=find(e,u),!u)||!dequal(n[1],e.get(u)))return!1;return!0}if(M===ArrayBuffer)_=new Uint8Array(_),e=new Uint8Array(e);else if(M===DataView){if((n=_.byteLength)===e.byteLength)for(;n--&&_.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(_)){if((n=_.byteLength)===e.byteLength)for(;n--&&_[n]===e[n];);return n===-1}if(!M||typeof _=="object"){n=0;for(M in _)if(has.call(_,M)&&++n&&!has.call(e,M)||!(M in e)||!dequal(_[M],e[M]))return!1;return Object.keys(e).length===n}}return _!==_&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:_,type:e}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},_)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(M=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(M):Array.isArray(e)?M(e):e.then(M)}).then(M=>{invariant(Array.isArray(M),`"${M}" is not a valid destination array.`);const n=M[0];new Promise(u=>{invariant(this.pdfDocument,"PDF document not loaded."),n instanceof Object?this.pdfDocument.getPageIndex(n).then(E=>{u(E)}).catch(()=>{invariant(!1,`"${n}" is not a valid page reference.`)}):typeof n=="number"?u(n):invariant(!1,`"${n}" is not a valid destination reference.`)}).then(u=>{const E=u+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(E>=1&&E<=this.pagesCount,`"${E}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:M,pageIndex:u,pageNumber:E})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const M=e-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:M,pageNumber:e})}addLinkAttributes(e,M,n){e.href=M,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(_){return typeof _<"u"}function isProvided(_){return isDefined(_)&&_!==null}function isString(_){return typeof _=="string"}function isArrayBuffer(_){return _ instanceof ArrayBuffer}function isBlob(_){return invariant(isBrowser,"isBlob can only be used in a browser environment"),_ instanceof Blob}function isDataURI(_){return isString(_)&&/^data:/.test(_)}function dataURItoByteString(_){invariant(isDataURI(_),"Invalid data URI.");const[e="",M=""]=_.split(",");return e.split(";").indexOf("base64")!==-1?atob(M):unescape(M)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(_){_&&_.cancel&&_.cancel()}function makePageCallback(_,e){return Object.defineProperty(_,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(_,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(_,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(_,"originalHeight",{get(){return this.view[3]},configurable:!0}),_}function isCancelException(_){return _.name==="RenderingCancelledException"}function loadFromFile(_){return new Promise((e,M)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return M(new Error("Error while reading a file."));e(n.result)},n.onerror=u=>{if(!u.target)return M(new Error("Error while reading a file."));const{error:E}=u.target;if(!E)return M(new Error("Error while reading a file."));switch(E.code){case E.NOT_FOUND_ERR:return M(new Error("Error while reading a file: File not found."));case E.SECURITY_ERR:return M(new Error("Error while reading a file: Security error."));case E.ABORT_ERR:return M(new Error("Error while reading a file: Aborted."));default:return M(new Error("Error while reading a file."))}},n.readAsArrayBuffer(_)})}function reducer(_,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return _}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const _={};return allEvents.forEach(e=>{_[e]=PropTypes.func}),_})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function _(e,M,n){const{[M]:u,pageNumber:E,pdf:j}=e;if(!isDefined(j))return null;if(isDefined(u)){if(typeof u!="number")return new Error(`\`${M}\` of type \`${typeof u}\` supplied to \`${n}\`, expected \`number\`.`);if(u<0)return new Error(`Expected \`${M}\` to be greater or equal to 0.`);const{numPages:at}=j;if(u+1>at)return new Error(`Expected \`${M}\` to be less or equal to ${at-1}.`)}else if(!isDefined(E))return new Error(`\`${M}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPageNumber=function _(e,M,n){const{[M]:u,pageIndex:E,pdf:j}=e;if(!isDefined(j))return null;if(isDefined(u)){if(typeof u!="number")return new Error(`\`${M}\` of type \`${typeof u}\` supplied to \`${n}\`, expected \`number\`.`);if(u<1)return new Error(`Expected \`${M}\` to be greater or equal to 1.`);const{numPages:at}=j;if(u>at)return new Error(`Expected \`${M}\` to be less or equal to ${at}.`)}else if(!isDefined(E))return new Error(`\`${M}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(_,e,M,n){function u(E){return E instanceof M?E:new M(function(j){j(E)})}return new(M||(M=Promise))(function(E,j){function at(m){try{P(n.next(m))}catch(N){j(N)}}function I(m){try{P(n.throw(m))}catch(N){j(N)}}function P(m){m.done?E(m.value):u(m.value).then(at,I)}P((n=n.apply(_,e||[])).next())})},__rest$1=function(_,e){var M={};for(var n in _)Object.prototype.hasOwnProperty.call(_,n)&&e.indexOf(n)<0&&(M[n]=_[n]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(_);u<n.length;u++)e.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(_,n[u])&&(M[n[u]]=_[n[u]]);return M};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(_,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const M=prompt("Enter the password to open this PDF file.");_(M);break}case PasswordResponses.INCORRECT_PASSWORD:{const M=prompt("Invalid password. Please try again.");_(M);break}}};function isParameterObject(_){return typeof _=="object"&&_!==null&&("data"in _||"range"in _||"url"in _)}const Document=reactExports.forwardRef(function _(e,M){var{children:n,className:u,error:E="Failed to load PDF file.",externalLinkRel:j,externalLinkTarget:at,file:I,inputRef:P,imageResourcesPath:m,loading:N="Loading PDF…",noData:B="No PDF file specified.",onItemClick:k,onLoadError:S,onLoadProgress:x,onLoadSuccess:p,onPassword:A=defaultOnPassword,onSourceError:R,onSourceSuccess:C,options:v,renderMode:l,rotate:d}=e,O=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[b,c]=useResolver(),{value:F,error:g}=b,[$,q]=useResolver(),{value:w,error:Y}=$,it=reactExports.useRef(new LinkService),ct=reactExports.useRef([]),V=reactExports.useRef(),dt=reactExports.useRef();reactExports.useEffect(()=>{I&&I!==V.current&&isParameterObject(I)&&(warning$1(!dequal(I,V.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),V.current=I)},[I]),reactExports.useEffect(()=>{v&&v!==dt.current&&(warning$1(!dequal(v,dt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),dt.current=v)},[v]);const bt=reactExports.useRef({scrollPageIntoView:gt=>{const{dest:ht,pageNumber:Ct,pageIndex:Ot=Ct-1}=gt;if(k){k({dest:ht,pageIndex:Ot,pageNumber:Ct});return}const Et=ct.current[Ot];if(Et){Et.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${Ct} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(M,()=>({linkService:it,pages:ct,viewer:bt}),[]);function St(){C&&C()}function Tt(){g&&(warning$1(!1,g.toString()),R&&R(g))}function L(){c({type:"RESET"})}reactExports.useEffect(L,[I,c]);const i=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!I)return null;if(typeof I=="string")return isDataURI(I)?{data:dataURItoByteString(I)}:(displayCORSWarning(),{url:I});if(I instanceof PDFDataRangeTransport)return{range:I};if(isArrayBuffer(I))return{data:I};if(isBrowser&&isBlob(I))return{data:yield loadFromFile(I)};if(invariant(typeof I=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(I),"Invalid parameter object: need either .data, .range or .url"),"url"in I&&typeof I.url=="string"){if(isDataURI(I.url)){const{url:gt}=I,ht=__rest$1(I,["url"]),Ct=dataURItoByteString(gt);return Object.assign({data:Ct},ht)}displayCORSWarning()}return I}),[I]);reactExports.useEffect(()=>{const gt=makeCancellablePromise(i());return gt.promise.then(ht=>{c({type:"RESOLVE",value:ht})}).catch(ht=>{c({type:"REJECT",error:ht})}),()=>{cancelRunningTask(gt)}},[i,c]),reactExports.useEffect(()=>{if(!(typeof F>"u")){if(F===!1){Tt();return}St()}},[F]);function o(){w&&(p&&p(w),ct.current=new Array(w.numPages),it.current.setDocument(w))}function a(){Y&&(warning$1(!1,Y.toString()),S&&S(Y))}function h(){q({type:"RESET"})}reactExports.useEffect(h,[q,F]);function f(){if(!F)return;const gt=v?Object.assign(Object.assign({},F),v):F,ht=pdfjs.getDocument(gt);x&&(ht.onProgress=x),A&&(ht.onPassword=A);const Ct=ht;return Ct.promise.then(Ot=>{q({type:"RESOLVE",value:Ot})}).catch(Ot=>{Ct.destroyed||q({type:"REJECT",error:Ot})}),()=>{Ct.destroy()}}reactExports.useEffect(f,[v,q,F]),reactExports.useEffect(()=>{if(!(typeof w>"u")){if(w===!1){a();return}o()}},[w]);function T(){it.current.setViewer(bt.current),it.current.setExternalLinkRel(j),it.current.setExternalLinkTarget(at)}reactExports.useEffect(T,[j,at]);function D(gt,ht){ct.current[gt]=ht}function W(gt){delete ct.current[gt]}const st=reactExports.useMemo(()=>({imageResourcesPath:m,linkService:it.current,onItemClick:k,pdf:w,registerPage:D,renderMode:l,rotate:d,unregisterPage:W}),[m,k,w,l,d]),tt=reactExports.useMemo(()=>makeEventProps(O,()=>w),[O,w]);function ot(){return React.createElement(DocumentContext.Provider,{value:st},n)}function ut(){return I?w==null?React.createElement(Message,{type:"loading"},typeof N=="function"?N():N):w===!1?React.createElement(Message,{type:"error"},typeof E=="function"?E():E):ot():React.createElement(Message,{type:"no-data"},typeof B=="function"?B():B)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",u),ref:P,style:{"--scale-factor":"1"}},tt),ut())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var _=[],e=0;e<arguments.length;e++)_[e]=arguments[e];var M=_.filter(Boolean);if(M.length<=1){var n=M[0];return n||null}return function(E){M.forEach(function(j){typeof j=="function"?j(E):j&&(j.current=E)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(_){return _ in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(_){return"children"in _}function isStructTreeNodeWithOnlyContentChild(_){return isStructTreeNode(_)?_.children.length===1&&0 in _.children&&"id"in _.children[0]:!1}function getRoleAttributes(_){const e={};if(isStructTreeNode(_)){const{role:M}=_,n=M.match(HEADING_PATTERN);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(isPdfRole(M)){const u=PDF_ROLE_TO_HTML_ROLE[M];u&&(e.role=u)}}return e}function getBaseAttributes(_){const e={};if(isStructTreeNode(_)){if(_.alt!==void 0&&(e["aria-label"]=_.alt),_.lang!==void 0&&(e.lang=_.lang),isStructTreeNodeWithOnlyContentChild(_)){const[M]=_.children;if(M){const n=getBaseAttributes(M);return Object.assign(Object.assign({},e),n)}}}else"id"in _&&(e["aria-owns"]=_.id);return e}function getAttributes(_){return _?Object.assign(Object.assign({},getRoleAttributes(_)),getBaseAttributes(_)):null}function StructTreeItem({className:_,node:e}){const M=reactExports.useMemo(()=>getAttributes(e),[e]),n=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((u,E)=>React.createElement(StructTreeItem,{key:E,node:u})),[e]);return React.createElement("span",Object.assign({className:_},M),n)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const _=usePageContext();invariant(_,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:M}=_,[n,u]=useResolver(),{value:E,error:j}=n,{customTextRenderer:at,page:I}=_;function P(){E&&M&&M(E)}function m(){j&&(warning$1(!1,j.toString()),e&&e(j))}function N(){u({type:"RESET"})}reactExports.useEffect(N,[u,I]);function B(){if(at||!I)return;const k=makeCancellablePromise(I.getStructTree()),S=k;return k.promise.then(x=>{u({type:"RESOLVE",value:x})}).catch(x=>{u({type:"REJECT",error:x})}),()=>cancelRunningTask(S)}return reactExports.useEffect(B,[at,I,u]),reactExports.useEffect(()=>{if(E!==void 0){if(E===!1){m();return}P()}},[E]),E?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:E}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(_){const e=usePageContext();invariant(e,"Unable to find Page context.");const M=Object.assign(Object.assign({},e),_),{_className:n,canvasBackground:u,devicePixelRatio:E=getDevicePixelRatio(),onRenderError:j,onRenderSuccess:at,page:I,renderForms:P,renderTextLayer:m,rotate:N,scale:B}=M,{canvasRef:k}=_;invariant(I,"Attempted to render page canvas, but no page was specified.");const S=reactExports.useRef(null);function x(){I&&at&&at(makePageCallback(I,B))}function p(l){isCancelException(l)||(warning$1(!1,l.toString()),j&&j(l))}const A=reactExports.useMemo(()=>I.getViewport({scale:B*E,rotation:N}),[E,I,N,B]),R=reactExports.useMemo(()=>I.getViewport({scale:B,rotation:N}),[I,N,B]);function C(){if(!I)return;I.cleanup();const{current:l}=S;if(!l)return;l.width=A.width,l.height=A.height,l.style.width=`${Math.floor(R.width)}px`,l.style.height=`${Math.floor(R.height)}px`,l.style.visibility="hidden";const d={annotationMode:P?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:l.getContext("2d",{alpha:!1}),viewport:A};u&&(d.background=u);const O=I.render(d),b=O;return O.promise.then(()=>{l.style.visibility="",x()}).catch(p),()=>cancelRunningTask(b)}reactExports.useEffect(C,[u,S,E,I,P,A,R]);const v=reactExports.useCallback(()=>{const{current:l}=S;l&&(l.width=0,l.height=0)},[S]);return reactExports.useEffect(()=>v,[v]),React.createElement("canvas",{className:`${n}__canvas`,dir:"ltr",ref:mergeRefs(k,S),style:{display:"block",userSelect:"none"}},m?React.createElement(StructTree,null):null)}function PageSVG(){const _=usePageContext();invariant(_,"Unable to find Page context.");const{_className:e,onRenderSuccess:M,onRenderError:n,page:u,rotate:E,scale:j}=_;invariant(u,"Attempted to render page SVG, but no page was specified.");const[at,I]=useResolver(),{value:P,error:m}=at;function N(){u&&M&&M(makePageCallback(u,j))}function B(){m&&(isCancelException(m)||(warning$1(!1,m.toString()),n&&n(m)))}const k=reactExports.useMemo(()=>u.getViewport({scale:j,rotation:E}),[u,E,j]);function S(){I({type:"RESET"})}reactExports.useEffect(S,[u,I,k]);function x(){if(!u)return;const C=makeCancellablePromise(u.getOperatorList());return C.promise.then(v=>{new pdfjs.SVGGraphics(u.commonObjs,u.objs).getSVG(v,k).then(d=>{if(!(d instanceof SVGElement))throw new Error("getSVG returned unexpected result.");I({type:"RESOLVE",value:d})}).catch(d=>{I({type:"REJECT",error:d})})}).catch(v=>{I({type:"REJECT",error:v})}),()=>cancelRunningTask(C)}reactExports.useEffect(x,[u,I,k]),reactExports.useEffect(()=>{if(P!==void 0){if(P===!1){B();return}N()}},[P]);function p(C){if(!C||!P)return;C.firstElementChild||C.appendChild(P);const{width:v,height:l}=k;P.setAttribute("width",`${v}`),P.setAttribute("height",`${l}`)}const{width:A,height:R}=k;return React.createElement("div",{className:`${e}__svg`,ref:C=>p(C),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:A,height:R,userSelect:"none"}})}function isTextItem(_){return"str"in _}function TextLayer(){const _=usePageContext();invariant(_,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:M,onGetTextSuccess:n,onRenderTextLayerError:u,onRenderTextLayerSuccess:E,page:j,pageIndex:at,pageNumber:I,rotate:P,scale:m}=_;invariant(j,"Attempted to load page text content, but no page was specified.");const[N,B]=useResolver(),{value:k,error:S}=N,x=reactExports.useRef(null),p=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function A(){k&&n&&n(k)}function R(){S&&(warning$1(!1,S.toString()),M&&M(S))}function C(){B({type:"RESET"})}reactExports.useEffect(C,[j,B]);function v(){if(!j)return;const g=makeCancellablePromise(j.getTextContent()),$=g;return g.promise.then(q=>{B({type:"RESOLVE",value:q})}).catch(q=>{B({type:"REJECT",error:q})}),()=>cancelRunningTask($)}reactExports.useEffect(v,[j,B]),reactExports.useEffect(()=>{if(k!==void 0){if(k===!1){R();return}A()}},[k]);const l=reactExports.useCallback(()=>{E&&E()},[E]),d=reactExports.useCallback(g=>{warning$1(!1,g.toString()),u&&u(g)},[u]);function O(){const g=p.current;g&&g.classList.add("active")}function b(){const g=p.current;g&&g.classList.remove("active")}const c=reactExports.useMemo(()=>j.getViewport({scale:m,rotation:P}),[j,P,m]);function F(){if(!j||!k)return;const{current:g}=x;if(!g)return;g.innerHTML="";const $=j.streamTextContent({includeMarkedContent:!0}),q={container:g,textContentSource:$,viewport:c},w=pdfjs.renderTextLayer(q),Y=w;return w.promise.then(()=>{const it=document.createElement("div");it.className="endOfContent",g.append(it),p.current=it;const ct=g.querySelectorAll('[role="presentation"]');if(e){let V=0;k.items.forEach((dt,bt)=>{if(!isTextItem(dt))return;const St=ct[V];if(!St)return;const Tt=e(Object.assign({pageIndex:at,pageNumber:I,itemIndex:bt},dt));St.innerHTML=Tt,V+=dt.str&&dt.hasEOL?2:1})}l()}).catch(d),()=>cancelRunningTask(Y)}return reactExports.useLayoutEffect(F,[e,d,l,j,at,I,k,c]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:b,onMouseDown:O,ref:x})}function AnnotationLayer(){const _=useDocumentContext(),e=usePageContext();invariant(e,"Unable to find Page context.");const M=Object.assign(Object.assign({},_),e),{imageResourcesPath:n,linkService:u,onGetAnnotationsError:E,onGetAnnotationsSuccess:j,onRenderAnnotationLayerError:at,onRenderAnnotationLayerSuccess:I,page:P,pdf:m,renderForms:N,rotate:B,scale:k=1}=M;invariant(m,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(P,"Attempted to load page annotations, but no page was specified."),invariant(u,"Attempted to load page annotations, but no linkService was specified.");const[S,x]=useResolver(),{value:p,error:A}=S,R=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){p&&j&&j(p)}function v(){A&&(warning$1(!1,A.toString()),E&&E(A))}function l(){x({type:"RESET"})}reactExports.useEffect(l,[x,P]);function d(){if(!P)return;const g=makeCancellablePromise(P.getAnnotations()),$=g;return g.promise.then(q=>{x({type:"RESOLVE",value:q})}).catch(q=>{x({type:"REJECT",error:q})}),()=>{cancelRunningTask($)}}reactExports.useEffect(d,[x,P,N]),reactExports.useEffect(()=>{if(p!==void 0){if(p===!1){v();return}C()}},[p]);function O(){I&&I()}function b(g){warning$1(!1,`${g}`),at&&at(g)}const c=reactExports.useMemo(()=>P.getViewport({scale:k,rotation:B}),[P,B,k]);function F(){if(!m||!P||!u||!p)return;const{current:g}=R;if(!g)return;const $=c.clone({dontFlip:!0}),q={accessibilityManager:null,annotationCanvasMap:null,div:g,l10n:null,page:P,viewport:$},w={annotations:p,annotationStorage:m.annotationStorage,div:g,downloadManager:null,imageResourcesPath:n,linkService:u,page:P,renderForms:N,viewport:$};g.innerHTML="";try{new pdfjs.AnnotationLayer(q).render(w),O()}catch(Y){b(Y)}return()=>{}}return reactExports.useEffect(F,[p,n,u,P,N,c]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:R})}var __rest=function(_,e){var M={};for(var n in _)Object.prototype.hasOwnProperty.call(_,n)&&e.indexOf(n)<0&&(M[n]=_[n]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(_);u<n.length;u++)e.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(_,n[u])&&(M[n[u]]=_[n[u]]);return M};const defaultScale=1,Page=function _(e){const M=useDocumentContext(),n=Object.assign(Object.assign({},M),e),{_className:u="react-pdf__Page",_enableRegisterUnregisterPage:E=!0,canvasBackground:j,canvasRef:at,children:I,className:P,customRenderer:m,customTextRenderer:N,devicePixelRatio:B,error:k="Failed to load the page.",height:S,inputRef:x,loading:p="Loading page…",noData:A="No page specified.",onGetAnnotationsError:R,onGetAnnotationsSuccess:C,onGetStructTreeError:v,onGetStructTreeSuccess:l,onGetTextError:d,onGetTextSuccess:O,onLoadError:b,onLoadSuccess:c,onRenderAnnotationLayerError:F,onRenderAnnotationLayerSuccess:g,onRenderError:$,onRenderSuccess:q,onRenderTextLayerError:w,onRenderTextLayerSuccess:Y,pageIndex:it,pageNumber:ct,pdf:V,registerPage:dt,renderAnnotationLayer:bt=!0,renderForms:St=!1,renderMode:Tt="canvas",renderTextLayer:L=!0,rotate:i,scale:o=defaultScale,unregisterPage:a,width:h}=n,f=__rest(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[T,D]=useResolver(),{value:W,error:st}=T,tt=reactExports.useRef(null);invariant(V,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const ot=isProvided(ct)?ct-1:it??null,ut=ct??(isProvided(it)?it+1:null),gt=i??(W?W.rotate:null),ht=reactExports.useMemo(()=>{if(!W)return null;let $t=1;const Wt=o??defaultScale;if(h||S){const zt=W.getViewport({scale:1,rotation:gt});h?$t=h/zt.width:S&&($t=S/zt.height)}return Wt*$t},[S,W,gt,o,h]);function Ct(){return()=>{isProvided(ot)&&E&&a&&a(ot)}}reactExports.useEffect(Ct,[E,V,ot,a]);function Ot(){if(c){if(!W||!ht)return;c(makePageCallback(W,ht))}if(E&&dt){if(!isProvided(ot)||!tt.current)return;dt(ot,tt.current)}}function Et(){st&&(warning$1(!1,st.toString()),b&&b(st))}function It(){D({type:"RESET"})}reactExports.useEffect(It,[D,V,ot]);function mt(){if(!V||!ut)return;const $t=makeCancellablePromise(V.getPage(ut)),Wt=$t;return $t.promise.then(zt=>{D({type:"RESOLVE",value:zt})}).catch(zt=>{D({type:"REJECT",error:zt})}),()=>cancelRunningTask(Wt)}reactExports.useEffect(mt,[D,V,ot,ut,dt]),reactExports.useEffect(()=>{if(W!==void 0){if(W===!1){Et();return}Ot()}},[W,ht]);const et=reactExports.useMemo(()=>W&&isProvided(ot)&&ut&&isProvided(gt)&&isProvided(ht)?{_className:u,canvasBackground:j,customTextRenderer:N,devicePixelRatio:B,onGetAnnotationsError:R,onGetAnnotationsSuccess:C,onGetStructTreeError:v,onGetStructTreeSuccess:l,onGetTextError:d,onGetTextSuccess:O,onRenderAnnotationLayerError:F,onRenderAnnotationLayerSuccess:g,onRenderError:$,onRenderSuccess:q,onRenderTextLayerError:w,onRenderTextLayerSuccess:Y,page:W,pageIndex:ot,pageNumber:ut,renderForms:St,renderTextLayer:L,rotate:gt,scale:ht}:null,[u,j,N,B,R,C,v,l,d,O,F,g,$,q,w,Y,W,ot,ut,St,L,gt,ht]),nt=reactExports.useMemo(()=>makeEventProps(f,()=>W&&(ht?makePageCallback(W,ht):void 0)),[f,W,ht]),pt=`${ot}@${ht}/${gt}`,wt=`${ot}/${gt}`;function Pt(){switch(Tt){case"custom":return invariant(m,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(m,{key:`${pt}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${wt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${pt}_canvas`,canvasRef:at})}}function Ut(){return L?React.createElement(TextLayer,{key:`${pt}_text`}):null}function Vt(){return bt?React.createElement(AnnotationLayer,{key:`${pt}_annotations`}):null}function Ht(){return React.createElement(PageContext.Provider,{value:et},Pt(),Ut(),Vt(),I)}function qt(){return ut?V===null||W===void 0||W===null?React.createElement(Message,{type:"loading"},typeof p=="function"?p():p):V===!1||W===!1?React.createElement(Message,{type:"error"},typeof k=="function"?k():k):Ht():React.createElement(Message,{type:"no-data"},typeof A=="function"?A():A)}return React.createElement("div",Object.assign({className:clsx(u,P),"data-page-number":ut,ref:mergeRefs(x,tt),style:{"--scale-factor":`${ht}`,backgroundColor:j||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},nt),qt())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs.GlobalWorkerOptions.workerSrc="/pdf.worker.js";const options={cMapUrl:"/cmaps/",standardFontDataUrl:"/standard_fonts/"},maxWidth=800;function PdfPreview({pdfUrl:_}){const[e,M]=reactExports.useState(),[n]=reactExports.useState();function u({numPages:j}){var at;(at=E.current)==null||at.call(E),M(j)}const E=reactExports.useRef();return jsxRuntimeExports.jsx("div",{className:"Example",children:jsxRuntimeExports.jsx("div",{className:"Example__container",children:jsxRuntimeExports.jsx("div",{className:"Example__container__document",children:jsxRuntimeExports.jsx(Document$1,{file:_,onLoadError:()=>{var j;(j=E.current)==null||j.call(E)},onLoadSuccess:u,options,children:Array.from(new Array(e),(j,at)=>jsxRuntimeExports.jsx(Page$1,{pageNumber:at+1,width:n?Math.min(n,maxWidth):maxWidth},`page_${at+1}`))})})})})}var Status=(_=>(_.Active="active",_.Deactivated="deactivated",_.Fullfilled="fullfilled",_.FullyFunded="fully_funded",_.Pending="pending",_.Rejected="rejected",_.Sold="sold",_.SoldOut="sold_out",_.Suspended="suspended",_))(Status||{}),TypeEnum=(_=>(_.CapitalRaising="capital_raising",_.Equity="equity",_.Partnerships="partnerships",_.SellABusiness="sell_a_business",_.StartupPitch="startup_pitch",_))(TypeEnum||{}),DealType=(_=>(_.ALL="",_.PARTNERSHIPS="partnerships",_.CAPITAL_RAISING="capital_raising",_.STARTUP_PITCH="startup_pitch",_.EQUITY="equity",_.SELL_A_BUSINESS="sell_a_business",_))(DealType||{});const RejectReasonModal=({resolver:_})=>{const[e]=Form.useForm();return _.form=e,jsxRuntimeExports.jsx(Form,{form:e,children:jsxRuntimeExports.jsx(Form.Item,{label:"reject_reason",name:"reject_reason",rules:[{required:!0}],initialValue:"",children:jsxRuntimeExports.jsx(Input.TextArea,{rows:12})})})},getHighlights=(_,e)=>_.map((M,n)=>{let u=[...e,n];return{title:u.join("-"),dataIndex:n,key:u.join("-"),fieldConfig:{formOptions:{label:u.join("-"),name:u}}}}),getAttachments=(_,e)=>_.map((M,n)=>{let u=[...e,n];return{title:u.join("-"),dataIndex:n,key:u.join("-"),fieldConfig:{render(){return jsxRuntimeExports.jsx("a",{onClick:()=>{let E=M.replace("https://d2k5mqgnyo4nix.cloudfront.net","/doc");Modal.confirm({width:"950px",style:{position:"relative"},content:jsxRuntimeExports.jsx(PdfPreview,{pdfUrl:E})})},children:M})},formOptions:{label:u.join("-"),name:u}}}}),getTeams=(_,e)=>{let M=[];return _.forEach((n,u)=>{let E=[...e,u],j=[...E,"name"],at=[...E,"title"],I=[...E,"image"];M.push({title:j.join("-"),dataIndex:"name",key:j.join("-"),fieldConfig:{formOptions:{label:j.join("-"),name:j}}}),M.push({title:at.join("-"),dataIndex:"title",key:at.join("-"),fieldConfig:{formOptions:{label:at.join("-"),name:at}}}),M.push({title:I.join("-"),dataIndex:"image",key:I.join("-"),fieldConfig:{render(){return jsxRuntimeExports.jsxs(Form.Item,{label:E.join("-"),children:[jsxRuntimeExports.jsx(Typography,{children:n.image}),jsxRuntimeExports.jsx("img",{width:"30%",src:n.image,alt:n.image})]})},formOptions:{label:I.join("-"),name:I}}})}),M},getPics=(_,e)=>_.map((M,n)=>{let u=[...e,n];return{title:u.join("-"),dataIndex:n,key:u.join("-"),fieldConfig:{render(){return jsxRuntimeExports.jsxs(Form.Item,{label:u.join("-"),children:[jsxRuntimeExports.jsx(Typography,{children:M}),jsxRuntimeExports.jsx("img",{width:"30%",src:M,alt:M})]})},formOptions:{label:u.join("-"),name:u}}}}),getFaqs=(_,e)=>{let M=[];debugger;return _.forEach((n,u)=>{let E=[...e,u],j=[...E,"question"],at=[...E,"answer"];M.push({title:j.join("-"),dataIndex:"question",key:j.join("-"),fieldConfig:{formOptions:{label:j.join("-"),name:j}}}),M.push({title:at.join("-"),dataIndex:"answer",key:at.join("-"),fieldConfig:{formOptions:{label:at.join("-"),name:at}}})}),M},useConfig=()=>{var I,P,m,N,B,k,S,x,p,A,R,C,v,l,d,O,b;const{setIsAddModalShow:_,queryAct:e,approveAct:M,rejectAct:n,dataList:u,recordData:E,formVersion:j}=useFlat("dealStore");let at=[{isSearch:!0,dataIndex:"ask.capital_raising.amount",fieldConfig:{scope:["modal"],inputAttrConfig:{disabled:!0},formOptions:{initialValue:(P=(I=E==null?void 0:E.ask)==null?void 0:I.capital_raising)==null?void 0:P.amount,rules:[{required:!0}],label:"amount",name:["ask","capital_raising","amount"]}}}];return(E==null?void 0:E.type)==DealType.EQUITY&&(at=[{isSearch:!0,dataIndex:"ask.equity.amount",fieldConfig:{scope:["modal"],inputAttrConfig:{disabled:!0},formOptions:{initialValue:(N=(m=E==null?void 0:E.ask)==null?void 0:m.equity)==null?void 0:N.amount,rules:[{required:!0}],label:"amount",name:["ask","equity","amount"]}}},{isSearch:!0,dataIndex:"ask.equity.usage",fieldConfig:{scope:["modal"],inputAttrConfig:{disabled:!0},formOptions:{initialValue:(k=(B=E==null?void 0:E.ask)==null?void 0:B.equity)==null?void 0:k.usage,rules:[{required:!0}],label:"usage",name:["ask","equity","usage"]}}},{isSearch:!0,dataIndex:"ask.equity.partners",fieldConfig:{scope:["modal"],inputAttrConfig:{disabled:!0},formOptions:{initialValue:(x=(S=E==null?void 0:E.ask)==null?void 0:S.equity)==null?void 0:x.partners,rules:[{required:!0}],label:"partners",name:["ask","equity","partners"]}}}]),(E==null?void 0:E.type)==DealType.STARTUP_PITCH&&(at=[{isSearch:!0,dataIndex:"ask.start_up_pitch.amount",fieldConfig:{scope:["modal"],inputAttrConfig:{disabled:!0},formOptions:{initialValue:(A=(p=E==null?void 0:E.ask)==null?void 0:p.startup_pitch)==null?void 0:A.amount,rules:[{required:!0}],label:"amount",name:["ask","start_up_pitch","amount"]}}},{isSearch:!0,dataIndex:"ask.start_up_pitch.usage",fieldConfig:{scope:["modal"],inputAttrConfig:{disabled:!0},formOptions:{initialValue:(R=E==null?void 0:E.ask)==null?void 0:R.startup_pitch.usage,rules:[{required:!0}],label:"usage",name:["ask","start_up_pitch","usage"]}}},{isSearch:!0,dataIndex:"ask.start_up_pitch.partners",fieldConfig:{scope:["modal"],inputAttrConfig:{disabled:!0},formOptions:{initialValue:(v=(C=E==null?void 0:E.ask)==null?void 0:C.startup_pitch)==null?void 0:v.partners,rules:[{required:!0}],label:"partners",name:["ask","start_up_pitch","partners"]}}}]),(E==null?void 0:E.type)==DealType.PARTNERSHIPS&&(at=[{isSearch:!0,dataIndex:"ask.partnerships.partners",fieldConfig:{scope:["modal"],inputAttrConfig:{disabled:!0},formOptions:{initialValue:(d=(l=E==null?void 0:E.ask)==null?void 0:l.partnerships)==null?void 0:d.partners,rules:[{required:!0}],label:"partners",name:["ask","partnerships","partners"]}}}]),(E==null?void 0:E.type)==DealType.SELL_A_BUSINESS&&(at=[{isSearch:!0,dataIndex:"ask.sell_a_business.amount",fieldConfig:{scope:["modal"],inputAttrConfig:{disabled:!0},formOptions:{initialValue:(O=E==null?void 0:E.ask)==null?void 0:O.sell_a_business.amount,rules:[{required:!0}],label:"amount",name:["ask","sell_a_business","amount"]}}},{isSearch:!0,dataIndex:"ask.sell_a_business.vendor_finance",fieldConfig:{scope:["modal"],inputAttrConfig:{disabled:!0},formOptions:{initialValue:(b=E==null?void 0:E.ask)==null?void 0:b.sell_a_business.vendor_finance,rules:[{required:!0}],label:"usage",name:["ask","sell_a_business","vendor_finance"]}}}]),usePageConfig(()=>{var c;return[fieldCreater("id",{fieldConfig:{scope:["table"]}}),{title:"user_id",dataIndex:"user_id",key:"user_id",fieldConfig:{isSearch:!0,scope:["table"],formOptions:{label:"user_id",name:"user_id"}}},{title:"type",dataIndex:"type",key:"type",fieldConfig:{isSearch:!0,type:"Select",options:[TypeEnum.CapitalRaising,TypeEnum.Equity,TypeEnum.Partnerships,TypeEnum.SellABusiness,TypeEnum.StartupPitch],inputAttrConfig:{disabled:!0},formOptions:{required:!0,label:"type",name:"type"}}},{title:"title",isSearch:!0,dataIndex:"title",key:"title",fieldConfig:{inputAttrConfig:{disabled:!0},formOptions:{initialValue:E==null?void 0:E.title,rules:[{required:!0}],label:"title",name:"title"}},render:(F,g)=>jsxRuntimeExports.jsx("a",{onClick:()=>{_({isShowAddModal:!0,recordData:g,isDetail:!0})},children:g.title})},{title:"overview",isSearch:!0,dataIndex:"overview",key:"overview",fieldConfig:{type:"TextArea",inputAttrConfig:{autoSize:{minRows:3}},formOptions:{initialValue:E==null?void 0:E.overview,rules:[{required:!0}],label:"overview",name:"overview"}}},{isSearch:!0,dataIndex:"address",key:"address",fieldConfig:{inputAttrConfig:{disabled:!0},formOptions:{initialValue:E==null?void 0:E.address,rules:[{required:!0}],label:"address",name:"address"}}},...at,{title:"logo",dataIndex:"logo",key:"logo",fieldConfig:{render(){return jsxRuntimeExports.jsxs(Form.Item,{label:"logo",children:[jsxRuntimeExports.jsx(Typography,{children:E==null?void 0:E.logo}),jsxRuntimeExports.jsx("img",{width:"50%",src:E==null?void 0:E.logo,alt:E==null?void 0:E.logo})]})},formOptions:{label:E==null?void 0:E.logo,name:E==null?void 0:E.logo}}},...getHighlights((E==null?void 0:E.highlights)||[],["highlights"]),...getPics((E==null?void 0:E.pics)||[],["pics"]),{title:"is_submitted",dataIndex:"is_submitted",key:"is_submitted",fieldConfig:{type:"Switch",isSearch:!1,scope:["table","modal"],formOptions:{label:"is_submitted"}},render:F=>jsxRuntimeExports.jsx(Switch,{checked:F})},{title:"is_draft",dataIndex:"is_draft",key:"is_draft",fieldConfig:{type:"Switch",isSearch:!1,scope:["table","modal"],formOptions:{label:"is_draft"}},render:F=>jsxRuntimeExports.jsx(Switch,{checked:F})},{title:"is_approved",dataIndex:"is_approved",key:"is_approved",fieldConfig:{type:"Switch",isSearch:!1,scope:["table","modal"],formOptions:{label:"is_approved"}},render:F=>jsxRuntimeExports.jsx(Switch,{checked:F})},{title:"official_deal_id",dataIndex:"official_deal_id",key:"official_deal_id",fieldConfig:{scope:[],isSearch:!1,formOptions:{label:"official_deal_id"}}},{title:"category_id",dataIndex:"category_id",key:"category_id",fieldConfig:{formOptions:{label:"category_id"},type:"Input",isSearch:!1}},{title:"prime_category",dataIndex:"prime_category_name",key:"prime_category_name",fieldConfig:{formOptions:{label:"prime_category"}}},{title:"status",dataIndex:"status",key:"status",fieldConfig:{isSearch:!0,type:"Select",options:[Status.Active,Status.Deactivated,Status.Fullfilled,Status.FullyFunded,Status.Pending,Status.Rejected,Status.Sold,Status.SoldOut,Status.Suspended],formOptions:{label:"status",name:"status"}}},{title:"reject_reason",dataIndex:"reject_reason",key:"reject_reason",fieldConfig:{type:"TextArea",scope:["table","modal"],formOptions:{label:"reject_reason"}}},{title:"components.business_name",dataIndex:"components.business_name",key:"components.business_name",fieldConfig:{type:"TextArea",formOptions:{label:"business_name",name:["components","business_name"]}}},{title:"components.business_website",dataIndex:"components.business_website",key:"components.business_website",fieldConfig:{type:"TextArea",formOptions:{label:"business_website",name:["components","business_website"]}}},{title:"components.problem_to_be_solved",dataIndex:"components.problem_to_be_solved",key:"components.problem_to_be_solved",fieldConfig:{type:"TextArea",formOptions:{label:"problem_to_be_solved",name:["components","problem_to_be_solved"]}}},{title:"components.solution",dataIndex:"components.solution",key:"components.solution",fieldConfig:{type:"TextArea",formOptions:{label:"solution",name:["components","solution"]}}},{title:"components.achivement",dataIndex:"components.achivement",key:"components.achivement",fieldConfig:{type:"TextArea",formOptions:{label:"achivement",name:["components","achivement"]}}},{title:"components.business_model",dataIndex:"components.business_model",key:"components.business_model",fieldConfig:{type:"TextArea",formOptions:{label:"business_model",name:["components","business_model"]}}},{title:"components.funding",dataIndex:"components.funding",key:"components.funding",fieldConfig:{type:"TextArea",formOptions:{label:"funding",name:["components","funding"]}}},{title:"market.target_market",dataIndex:"market.target_market",key:"market.target_market",fieldConfig:{type:"TextArea",formOptions:{label:"target_market",name:["market","target_market"]}}},{title:"market.opportunity_description",dataIndex:"market.opportunity_description",key:"market.opportunity_description",fieldConfig:{type:"TextArea",formOptions:{label:"opportunity_description",name:["market","opportunity_description"]}}},{title:"market.enviroment",dataIndex:"market.enviroment",key:"market.enviroment",fieldConfig:{type:"TextArea",formOptions:{label:"enviroment",name:["market","enviroment"]}}},{title:"documents_social.linkedin",dataIndex:"documents_social.linkedin",key:"documents_social.linkedin",fieldConfig:{type:"TextArea",formOptions:{label:"linkedin",name:["documents_social","linkedin"]}}},{title:"documents_social.facebook",dataIndex:"documents_social.facebook",key:"documents_social.facebook",fieldConfig:{type:"TextArea",formOptions:{label:"facebook",name:["documents_social","facebook"]}}},{title:"documents_social.attachments",dataIndex:"documents_social.attachments",key:"documents_social.attachments",fieldConfig:{type:"TextArea",formOptions:{label:"instagram",name:["documents_social","instagram"]}}},...getAttachments(((c=E==null?void 0:E.documents_social)==null?void 0:c.attachments)||[],["documents_social","attachments"]),...getTeams((E==null?void 0:E.teams)||[],["teams"]),...getFaqs((E==null?void 0:E.faq)||[],["faq"]),{title:"action",key:"action",render:(F,g)=>jsxRuntimeExports.jsxs(Space,{size:"middle",children:[jsxRuntimeExports.jsx("a",{onClick:async()=>{_({isShowAddModal:!0,recordData:g})},children:"edit"}),g.is_draft&&g.is_submitted&&!g.is_approved&&jsxRuntimeExports.jsx("a",{onClick:async()=>{await M({id:g.id,title:g.title}),await e(),staticMethods.info({message:"success!"})},children:"approve"}),g.is_draft&&g.is_submitted&&!g.is_approved&&jsxRuntimeExports.jsx("a",{onClick:async()=>{let $={form:null};Modal.confirm({title:"reject reason",content:jsxRuntimeExports.jsx(RejectReasonModal,{resolver:$}),icon:null,async onOk(){await $.form.validateFields();const q={id:g.id,reject_reason:$.form.getFieldValue("reject_reason")};await n(q),await e()}})},children:"reject"})]})}]},[u,j,E])},ModalForm=()=>{const[_]=Form.useForm(),{setIsAddModalShow:e,addAct:M,updateAct:n,queryAct:u,recordData:E,pageNum:j,pageSize:at,isShowAddModal:I,isDetail:P}=useFlat("dealStore"),{formList:m}=useConfig(),N=useFormFields(m,{formIns:_,isJustShow:P});reactExports.useEffect(()=>{E&&_.setFieldsValue(E)},[E]);let B=P?{footer:[]}:{};return jsxRuntimeExports.jsx(Modal,{width:"60vw",open:I,title:E?"Update":"Add",...B,onCancel:()=>{_.resetFields(),e({isShowAddModal:!1})},onOk:()=>{_.validateFields().then(async k=>{await(E?n:M)(k),e({isShowAddModal:!1}),_.resetFields(),u({page:j,page_size:at})}).catch(k=>{console.log("Validate Failed:",k)})},children:jsxRuntimeExports.jsx(Form,{form:_,onFieldsChange:()=>{},children:N})})},AdvancedSearchForm=()=>{const{searchList:_}=useConfig(),[e,M]=reactExports.useState(!1);let n=4;const u=useSearchFields(_,{count:n}),[E]=Form.useForm(),{queryAct:j,pageSize:at}=useFlat("dealStore"),I=P=>{console.log("Received values of form: ",P)};return jsxRuntimeExports.jsxs(Form,{form:E,name:"advanced_search",className:"ant-advanced-search-form",onFinish:I,children:[jsxRuntimeExports.jsx(Row,{gutter:24,children:e?u:u.slice(0,n)}),jsxRuntimeExports.jsx(Row,{children:jsxRuntimeExports.jsxs(Col,{span:24,style:{textAlign:"right"},children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{j({...E.getFieldsValue(),page:1,page_size:at})},type:"primary",htmlType:"submit",children:"Search"}),jsxRuntimeExports.jsx(Button,{style:{margin:"0 8px"},onClick:()=>{E.resetFields()},children:"Clear"}),jsxRuntimeExports.jsxs("a",{style:{fontSize:12},onClick:()=>{M(!e)},children:[e?jsxRuntimeExports.jsx(UpOutlined,{}):jsxRuntimeExports.jsx(DownOutlined,{})," Collapse"]})]})})]})},App=()=>jsxRuntimeExports.jsx("div",{style:{marginBottom:"32px"},children:jsxRuntimeExports.jsx(AdvancedSearchForm,{})}),container="_container_18572_1",styles={container},DealPage=()=>{const{pageNum:_,pageSize:e,loading:M,total:n,dataList:u,queryAct:E}=useFlat("dealStore"),{columns:j}=useConfig();reactExports.useEffect(()=>{at(_,e)},[]);const at=async(I=1,P)=>{await E({page:I,page_size:P})};return jsxRuntimeExports.jsxs("div",{className:styles.content,children:[jsxRuntimeExports.jsx(App,{}),jsxRuntimeExports.jsx(ModalForm,{}),jsxRuntimeExports.jsx(Table,{rowKey:I=>I.id,loading:M,pagination:{pageSize:e,current:_,total:n,onChange(I,P){console.log(I,P),at(I,P)}},columns:j,dataSource:u})]})};export{DealPage as default};
