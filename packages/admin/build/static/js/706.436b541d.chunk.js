"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[706],{7706:function(e,t,i){i.r(t),i.d(t,{default:function(){return k}});var n=i(8e3),a=i(4574),r=i(340),l=i(2466),s=i(2501),o=i(7801),d=i(2725),c=i(9334),u=i(3018);const p=["prime","parent","sub"];var m=()=>{const[e]=(0,d.o)(),{setAddModalShowAct:t,deleteAct:i,queryAct:n,setIsDetailAct:a,dataList:r,formVersion:s}=e;return(0,l.Gm)((()=>[{title:"name",dataIndex:"name",key:"name",fieldConfig:{formOptions:{label:"name",name:"name",rules:[{required:!0},{type:"string",min:4,max:60}]}},render:(e,i)=>(0,u.jsx)("a",{onClick:()=>{a(!0),t(!0,i)},children:e})},{title:"description",dataIndex:"description",key:"description",fieldConfig:{isSearch:!0,formOptions:{label:"description",name:"description",rules:[{required:!0},{type:"string",min:4,max:60}]}}},{title:"type",dataIndex:"type",key:"type",fieldConfig:{isSearch:!0,inputType:"Select",options:p,formOptions:{initialValue:p[0],label:"type",name:"type",rules:[{required:!0}]}}},{title:"prime_id",dataIndex:"prime_id",key:"prime_id",fieldConfig:{isSearch:!0,inputType:"Select",options:()=>r.filter((e=>!e.parent_id)).map((e=>({key:e.id,value:e.id,label:e.name}))),formOptions:{rules:[{type:"number"}],label:"prime_id",name:"prime_id"},inputOptions:{allowClear:!0}}},{title:"parent_id",dataIndex:"parent_id",key:"parent_id",fieldConfig:{isSearch:!0,inputType:"Select",options:t=>{var i;let{formIns:n}=t,a=null===n||void 0===n||null===(i=n.getFieldsValue())||void 0===i?void 0:i.prime_id;return a?e.dataList.filter((e=>e.prime_id===a)).map((e=>({key:e.id,value:e.id,label:e.name}))):[]},formOptions:{label:"parent_id",name:"parent_id"},inputOptions:{allowClear:!0}}},{title:"action",key:"action",render:(e,a)=>(0,u.jsxs)(c.Z,{size:"middle",children:[(0,u.jsx)("a",{onClick:()=>{t(!0,a)},children:"edit"}),(0,u.jsx)("a",{onClick:()=>{o.Z.confirm({content:"are you sure?",onOk:async()=>{await i({id:a.id}),n()}})},children:"delete"})]})}]),[r,s])};var f=()=>{const[e]=s.Z.useForm(),{setAddModalShowAct:t,addAct:i,updateAct:n,queryAct:a,refreshFormVersionAct:c,recordData:p,isShowAddModal:f,isDetail:h}=(0,d.o)()[0],{formList:y}=m(),g=(0,l.uA)(y,{formIns:e,isJustShow:h});(0,r.useEffect)((()=>{p&&(e.setFieldsValue(p),c())}),[p]);let x=h?{footer:[]}:{};const v=(0,r.useRef)();return(0,u.jsx)(o.Z,{open:f,title:"add",...x,onCancel:()=>{e.resetFields(),t(!1)},onOk:()=>{e.validateFields().then((async r=>{let l=p?n:i;await l(r),t(!1),e.resetFields(),a()})).catch((e=>{console.log("Validate Failed:",e)}))},children:(0,u.jsx)(s.Z,{form:e,onFieldsChange:(t,i)=>{"prime_id"===t[0].name&&v.current!==t[0].value&&(v.current=t[0].value,e.setFieldValue("parent_id","")),c()},children:g})})},h=i(1377),y=i(936),g=i(5166),x=i(9473);const v=()=>{const{searchList:e}=m(),[t,i]=(0,r.useState)(!1);const a=(0,l.Wc)(e,{count:4}),[o]=s.Z.useForm(),{queryAct:c,pageSize:p}=(0,d.o)()[0];return(0,u.jsxs)(s.Z,{form:o,name:"advanced_search",className:"ant-advanced-search-form",onFinish:e=>{console.log("Received values of form: ",e)},children:[(0,u.jsx)(g.Z,{gutter:24,children:t?a:a.slice(0,4)}),(0,u.jsx)(g.Z,{children:(0,u.jsxs)(x.Z,{span:24,style:{textAlign:"right"},children:[(0,u.jsx)(n.Z,{onClick:()=>{c({...o.getFieldsValue(),page:1,page_size:p})},type:"primary",htmlType:"submit",children:"Search"}),(0,u.jsx)(n.Z,{style:{margin:"0 8px"},onClick:()=>{o.resetFields()},children:"Clear"}),(0,u.jsxs)("a",{style:{fontSize:12},onClick:()=>{i(!t)},children:[t?(0,u.jsx)(h.Z,{}):(0,u.jsx)(y.Z,{})," Collapse"]})]})})]})};var Z=e=>(0,u.jsx)("div",{style:{marginBottom:"32px"},children:(0,u.jsx)(v,{})}),j={container:"style_container__0jOlI"};var k=()=>{const{pageNum:e,pageSize:t,loading:i,total:l,dataList:s,queryAct:o,setAddModalShowAct:c}=(0,d.o)()[0],{columns:p}=m();(0,r.useEffect)((()=>{h(e,t)}),[]);const h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;await o({page:e,page_size:t})};return(0,u.jsxs)("div",{className:j.content,children:[(0,u.jsx)(Z,{}),(0,u.jsx)(n.Z,{type:"primary",onClick:()=>{c(!0)},style:{marginBottom:12},children:"+ add"}),(0,u.jsx)(f,{}),(0,u.jsx)(a.Z,{rowKey:e=>e.id,loading:i,pagination:{pageSize:t,current:e,total:l,onChange(e,t){console.log(e,t),h(e,t)}},columns:p,dataSource:s})]})}},936:function(e,t,i){var n=i(6076),a=i(340),r=i(6375),l=i(5145),s=function(e,t){return a.createElement(l.Z,(0,n.Z)({},e,{ref:t,icon:r.Z}))};t.Z=a.forwardRef(s)},1377:function(e,t,i){i.d(t,{Z:function(){return o}});var n=i(6076),a=i(340),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},l=i(5145),s=function(e,t){return a.createElement(l.Z,(0,n.Z)({},e,{ref:t,icon:r}))};var o=a.forwardRef(s)},5166:function(e,t,i){var n=i(8672);t.Z=n.Z}}]);
//# sourceMappingURL=706.436b541d.chunk.js.map