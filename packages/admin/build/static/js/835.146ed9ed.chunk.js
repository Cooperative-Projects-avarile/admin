"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[835],{3835:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var i=n(8e3),a=n(4574),o=n(340),l=n(2466),s=n(2501),r=n(7801),c=n(4680),d=n(1293),u=n(9334),p=n(3018);const f=["connected","finished"];var y=()=>{const{setAddModalShowAct:e,deleteAct:t,queryAct:n,setIsDetailAct:i}=(0,c.o)()[0],{dataList:a,queryAct:s}=(0,l.dy)("enquiryPageStore")[0],{dataList:y,queryAct:h}=(0,l.dy)("opportunityPageStore")[0],{dataList:m,queryAct:g}=(0,l.dy)("usersPageStore")[0];return(0,o.useEffect)((()=>{null!==y&&void 0!==y&&y.length||h(),null!==m&&void 0!==m&&m.length||g(),null!==a&&void 0!==a&&a.length||s()}),[]),(0,l.Gm)((()=>[{title:"content",dataIndex:"content",key:"content",fieldConfig:{isSearch:!0,formOptions:{label:"content",name:"content",rules:[{required:!0},{type:"string",min:4,max:60}]}},render:(t,n)=>(0,p.jsx)("a",{onClick:()=>{i(!0),e(!0,n)},children:t})},{title:"type",dataIndex:"type",key:"type",fieldConfig:{isSearch:!0,inputType:"Select",options:f,formOptions:{label:"type",name:"type",rules:[{required:!0},{type:"string",min:4,max:60}]}}},(0,d.vZ)("quanlity"),(0,d.vZ)("time"),(0,d.vZ)("communication"),(0,d.vZ)("service"),(0,d.vZ)("general"),(0,d.vZ)("id",{scope:["table","search"]}),(0,d.fB)("user_id",{fieldConfig:{inputType:"Select",options:()=>m.map((e=>({label:e.email,value:e.id,key:e.id})))}}),(0,d.fB)("opportunity_id",{fieldConfig:{inputType:"Select",options:()=>y.map((e=>({label:e.title,value:e.id,key:e.id})))}}),(0,d.fB)("enquiry_id",{fieldConfig:{inputType:"Select",options:()=>a.map((e=>({label:e.title,value:e.id,key:e.id})))}}),{title:"action",key:"action",render:(i,a)=>(0,p.jsxs)(u.Z,{size:"middle",children:[(0,p.jsx)("a",{onClick:()=>{e(!0,a)},children:"edit"}),(0,p.jsx)("a",{onClick:()=>{r.Z.confirm({content:"are you sure?",onOk:async()=>{await t({id:a.id}),n()}})},children:"delete"})]})}]),[a,y,m])};var h=()=>{const[e]=s.Z.useForm(),{setAddModalShowAct:t,addAct:n,updateAct:i,queryAct:a,recordData:d,isShowAddModal:u,isDetail:f}=(0,c.o)()[0],{formList:h}=y(),m=(0,l.uA)(h,{isJustShow:f,formIns:e});(0,o.useEffect)((()=>{d&&e.setFieldsValue(d)}),[d]);let g=f?{footer:[]}:{};return(0,p.jsx)(r.Z,{open:u,title:"add",...g,onCancel:()=>{e.resetFields(),t(!1)},onOk:()=>{e.validateFields().then((async o=>{let l=d?i:n;await l(o),t(!1),e.resetFields(),a()})).catch((e=>{console.log("Validate Failed:",e)}))},children:(0,p.jsx)(s.Z,{form:e,children:m})})},m=n(1377),g=n(936),v=n(5166),x=n(9473);const Z=()=>{const{searchList:e}=y(),[t,n]=(0,o.useState)(!1);const a=(0,l.Wc)(e,{count:4}),[r]=s.Z.useForm(),{queryAct:d,pageSize:u}=(0,c.o)()[0];return(0,p.jsxs)(s.Z,{form:r,name:"advanced_search",className:"ant-advanced-search-form",onFinish:e=>{console.log("Received values of form: ",e)},children:[(0,p.jsx)(v.Z,{gutter:24,children:t?a:a.slice(0,4)}),(0,p.jsx)(v.Z,{children:(0,p.jsxs)(x.Z,{span:24,style:{textAlign:"right"},children:[(0,p.jsx)(i.Z,{onClick:()=>{d({...r.getFieldsValue(),page:1,page_size:u})},type:"primary",htmlType:"submit",children:"Search"}),(0,p.jsx)(i.Z,{style:{margin:"0 8px"},onClick:()=>{r.resetFields()},children:"Clear"}),(0,p.jsxs)("a",{style:{fontSize:12},onClick:()=>{n(!t)},children:[t?(0,p.jsx)(m.Z,{}):(0,p.jsx)(g.Z,{})," Collapse"]})]})})]})};var j=e=>(0,p.jsx)("div",{style:{marginBottom:"32px"},children:(0,p.jsx)(Z,{})}),A={container:"style_container__bqpVC"};var S=()=>{const{pageNum:e,pageSize:t,loading:n,total:l,dataList:s,queryAct:r,setAddModalShowAct:d}=(0,c.o)()[0],{columns:u}=y();(0,o.useEffect)((()=>{f(e,t)}),[]);const f=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;await r({page:e,page_size:t})};return(0,p.jsxs)("div",{className:A.content,children:[(0,p.jsx)(j,{}),(0,p.jsx)(i.Z,{type:"primary",onClick:()=>{d(!0)},style:{marginBottom:12},children:"+ add"}),(0,p.jsx)(h,{}),(0,p.jsx)(a.Z,{scroll:{x:1500,y:300},rowKey:e=>e.id,loading:n,pagination:{pageSize:t,current:e,total:l,onChange(e,t){console.log(e,t),f(e,t)}},columns:u,dataSource:s})]})}},936:function(e,t,n){var i=n(6076),a=n(340),o=n(6375),l=n(5145),s=function(e,t){return a.createElement(l.Z,(0,i.Z)({},e,{ref:t,icon:o.Z}))};t.Z=a.forwardRef(s)},1377:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(6076),a=n(340),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},l=n(5145),s=function(e,t){return a.createElement(l.Z,(0,i.Z)({},e,{ref:t,icon:o}))};var r=a.forwardRef(s)},5166:function(e,t,n){var i=n(8672);t.Z=i.Z}}]);
//# sourceMappingURL=835.146ed9ed.chunk.js.map