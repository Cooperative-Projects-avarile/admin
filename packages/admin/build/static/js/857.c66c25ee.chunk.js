"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[857],{2294:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(340),l="animateText_content__m5kUN",i="animateText_container__AIsE0",a=n(3018);let s=[""],o=["rgb(110,64,170)","rgb(150,61,179)","rgb(191,60,175)","rgb(228,65,157)","rgb(254,75,131)","rgb(255,94,99)","rgb(255,120,71)","rgb(251,150,51)","rgb(226,183,47)","rgb(198,214,60)","rgb(175,240,91)","rgb(127,246,88)","rgb(82,246,103)","rgb(48,239,130)","rgb(29,223,163)","rgb(26,199,194)","rgb(35,171,216)","rgb(54,140,225)","rgb(76,110,219)","rgb(96,84,200)"],d={text:"",prefix:-5,skillI:0,skillP:0,step:1,direction:"forward",delay:3};let c=function(e,t){switch(arguments.length){case 1:return parseInt((Math.random()*e+1).toString(),10);case 2:return parseInt((Math.random()*(t-e+1)+e).toString(),10);default:return 0}}(15,150),u=!1,h=!1,m=!0;function p(e,t,n){if(d.step)d.step--;else if(d.step=1,d.prefix<0)d.prefix>=0&&(d.text+=""[d.prefix]),d.prefix++;else switch(d.direction){case"forward":d.skillP<t.length?(d.text+=t[d.skillP],d.skillP++):d.delay?d.delay--:(d.direction="backward",d.delay=3);break;case"backward":d.skillP>0?(d.text=d.text.slice(0,-1),d.skillP--):(d.skillI=(d.skillI+1)%s.length,d.direction="forward")}let r;null!=n&&(d.text=n.substring(0,d.skillP),d.skillP>n.length&&(d.skillP=n.length)),e.textContent=d.text,r=d.prefix<0?Math.min(5,5+d.prefix):Math.min(5,t.length-d.skillP),e.appendChild(function(e){let t=document.createDocumentFragment();for(let n=0;e>n;n++){let e=document.createElement("span");e.textContent=g(),e.style.color=x(),t.appendChild(e)}return t}(r))}function x(){return o[Math.floor(Math.random()*o.length)]}function g(){return String.fromCharCode(94*Math.random()+33)}var f=e=>{const{texts:t}=e;let n=(0,r.useRef)(),o=(0,r.useRef)();function x(){setTimeout((()=>{n.current&&g()}),c)}function g(){setTimeout((()=>{if(h&&null!=n.current){u;let e=n.current,r=d.skillI,l=t[r],i=s[r];l!==i?(p(e,i,l),s[r]=l):p(e,i)}(m||d.skillP<s[0].length)&&g()}),75)}return(0,r.useEffect)((()=>{s=t,h=true,m=true,d.delay=3,m||s.length>1&&console.warn("\u5728\u8bbe\u7f6einfinite=false\u7684\u60c5\u51b5\u4e0b\uff0c\u4ec5\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4e32\u751f\u6548\uff0c\u540e\u7eed\u5b57\u7b26\u4e32\u4e0d\u518d\u663e\u793a\u3002"),x()}),[]),(0,a.jsxs)("div",{className:l,children:[(0,a.jsx)("pre",{ref:n,className:i,id:"container"}),(0,a.jsx)("pre",{ref:o})]})}},3296:function(e,t,n){n.d(t,{X:function(){return s}});var r=n(5170),l=n(4037),i=n(7204),a=n(3018);var s=e=>{let{options:t,...n}=e;return(0,a.jsx)(r.Z,{valuePropName:"fileList",...n,children:(0,a.jsx)(l.Z,{listType:"picture-card",data:{token:sessionStorage.getItem("QINIU_TOKEN"),key:"img/"+(new Date).getTime()},onChange:e=>{"done"===e.file.status?i.ZP.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&i.ZP.error("".concat(e.file.name," file upload failed."))},action:"https://upload-z2.qiniup.com",...t,children:(0,a.jsx)("div",{children:(0,a.jsx)("div",{style:{marginTop:8},children:"\u4e0a\u4f20"})})})})};n(2294)},5170:function(e,t,n){var r=n(2501),l=n(3018);t.Z=e=>{let{Comp:t,rules:n,isForm:i=!0,children:a,...s}=e,o={...s};return(0,l.jsx)(l.Fragment,{children:i?(0,l.jsx)(r.Z.Item,{rules:n||[{required:!0,message:"\u4e0d\u53ef\u4e3a\u7a7a!"}],...o,children:a}):(0,l.jsx)(t,{})})}},6857:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var r=n(2466),l=n(9334),i=n(4574),a=n(340),s="articlePage_content__ZqLxl",o="articlePage_operate_board__mc+zd",d=n(3296),c=n(2501),u=n(7801),h=n(3627),m=n(3870),p=n(1170),x=n(4461),g=n(8e3),f=n(8106),j=n(4037),b=n(3018);const{Dragger:v}=j.Z;var k=e=>{const{handleUploadMd:t}=e,n={beforeUpload:e=>{const n=new FileReader;return n.readAsText(e),n.onload=function(e){t(e.target.result)},!1},name:"file",multiple:!0,showUploadList:!1};return(0,b.jsxs)(v,{...n,children:[(0,b.jsx)("p",{className:"ant-upload-drag-icon",children:(0,b.jsx)(f.Z,{})}),(0,b.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u4e0a\u4f20"}),(0,b.jsx)("p",{className:"ant-upload-hint",children:"\u652f\u6301\u5355\u4e2a\u6216\u6279\u91cf\u4e0a\u4f20\u3002\u4e25\u7981\u4e0a\u4f20\u516c\u53f8\u6570\u636e\u6216\u5176\u4ed6\u5e26\u6709\u7248\u6743\u7684\u6587\u4ef6"})]})};const Z=e=>Array.isArray(e)?e:(null!==e&&void 0!==e&&e.fileList.response,null!==e&&void 0!==e&&e.fileList[0].response?null===e||void 0===e?void 0:e.fileList.map((e=>e.response.hash)):null===e||void 0===e?void 0:e.fileList),y=e=>{let{open:t,onCreate:n,onCancel:l}=e;const[i]=(0,r.oC)("articleStore"),{articleTypeList:s}=i.state,[o]=c.Z.useForm(),[g,f]=(0,a.useState)(!1);return(0,b.jsx)(u.Z,{open:t,title:"\u65b0\u5efa\u6587\u7ae0",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onCancel:()=>{o.resetFields(),l()},onOk:()=>{o.validateFields().then((e=>{o.resetFields(),n(e)})).catch((e=>{console.log("Validate Failed:",e)}))},children:(0,b.jsxs)(c.Z,{form:o,layout:"vertical",name:"form_in_modal",initialValues:{modifier:"public"},children:[(0,b.jsx)(c.Z.Item,{name:"title",label:"\u6587\u7ae0\u6807\u9898",rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],children:(0,b.jsx)(h.Z,{})}),(0,b.jsx)(c.Z.Item,{name:"subTitle",rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],label:"\u526f\u6807\u9898",children:(0,b.jsx)(h.Z,{type:"textarea"})}),(0,b.jsx)(c.Z.Item,{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],name:"courseTypeList",label:"\u5206\u7c7b",valuePropName:"number",children:(0,b.jsx)(m.Z,{mode:"tags",children:s.map((e=>(0,b.jsx)(m.Z.Option,{value:String(e.id),children:e.name},e.id)))})}),(0,b.jsxs)(c.Z.Item,{required:!0,label:(0,b.jsxs)("div",{children:["\u6b63\u6587",(0,b.jsxs)(p.ZP.Group,{defaultValue:g?"1":"2",value:g?"1":"2",onChange:e=>{f("1"===e.target.value)},style:{marginLeft:"12px"},children:[(0,b.jsx)(p.ZP,{value:"1",children:"\u4e0a\u4f20md\u6587\u4ef6"}),(0,b.jsx)(p.ZP,{value:"2",children:"\u7c98\u8d34\u6587\u672c"})]})]}),children:[!g&&(0,b.jsx)(c.Z.Item,{name:"content",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6b63\u6587!"}],children:(0,b.jsx)(h.Z.TextArea,{style:{minHeight:"200px"}})}),g&&(0,b.jsx)(c.Z.Item,{children:(0,b.jsx)(k,{handleUploadMd:e=>{o.setFieldValue("content",e),f(!1)}})})]}),(0,b.jsx)(d.X,{options:{maxCount:1,itemRender:(e,t,n)=>n[0]?(0,b.jsx)(x.Z,{width:100,height:100,src:"https://qiniu.moderate.run/"+n[0]}):""},name:"cover",label:"\u5c01\u9762",getValueFromEvent:Z})]})})};var C=e=>{let{handleUpload:t}=e;const[n,r]=(0,a.useState)(!1);return(0,b.jsxs)("span",{style:{marginRight:"12px"},children:[(0,b.jsx)(g.Z,{type:"primary",onClick:()=>{r(!0)},children:"+ \u65b0\u589e\u6587\u7ae0"}),(0,b.jsx)(y,{open:n,onCreate:e=>{t(e),r(!1)},onCancel:()=>{r(!1)}})]})};const I=[{title:"\u7f16\u53f7",dataIndex:"id",key:"id"},{title:"\u6587\u7ae0\u540d\u79f0",dataIndex:"title",key:"title",render:e=>(0,b.jsx)("a",{children:e})},{title:"\u526f\u6807\u9898",dataIndex:"subTitle",key:"subTitle",render:e=>(0,b.jsx)("a",{children:e})},{title:"\u64cd\u4f5c",key:"action",render:(e,t)=>(0,b.jsx)(l.Z,{size:"middle",children:(0,b.jsx)("a",{children:"\u4fee\u6539"})})}];var P=()=>{const[e]=(0,r.dy)("articleStore"),{pageNum:t,pageSize:n,total:l,articleList:d,addArticle:c,createArticleList:u}=e,{loading:h,run:m}=(0,r.pL)(u,{auto:!0,debounceTime:1e3}),{loading:p,run:x}=(0,r.pL)(c,{auto:!1,single:!0}),g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;await m({pageNum:e,pageSize:t})};return(0,a.useEffect)((()=>{g(t,n)}),[]),(0,b.jsxs)("div",{className:s,children:[(0,b.jsx)("div",{className:o,children:(0,b.jsx)(C,{handleUpload:e=>{e.cover=e.cover.join(","),x(e).then((e=>{}))}})}),(0,b.jsx)(i.Z,{rowKey:e=>e.id,loading:h&&p,pagination:{pageSize:n,current:t,total:l,onChange(e,t){console.log(e,t),g(e,t)}},columns:I,dataSource:d})]})}}}]);
//# sourceMappingURL=857.c66c25ee.chunk.js.map